<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java Fork Join æ¡†æ¶ | JAVACORE</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/javacore/favicon.ico">
    <meta name="description" content="Java æ•™ç¨‹">
    
    <link rel="preload" href="/javacore/assets/css/0.styles.b629dfcc.css" as="style"><link rel="preload" href="/javacore/assets/js/app.62a93b3d.js" as="script"><link rel="preload" href="/javacore/assets/js/4.156ff030.js" as="script"><link rel="preload" href="/javacore/assets/js/32.fd822274.js" as="script"><link rel="preload" href="/javacore/assets/js/5.cb43ecfb.js" as="script"><link rel="prefetch" href="/javacore/assets/js/10.914d71f6.js"><link rel="prefetch" href="/javacore/assets/js/11.d42a0004.js"><link rel="prefetch" href="/javacore/assets/js/12.ebe9232a.js"><link rel="prefetch" href="/javacore/assets/js/13.5288142e.js"><link rel="prefetch" href="/javacore/assets/js/14.9d818b0a.js"><link rel="prefetch" href="/javacore/assets/js/15.b38fe602.js"><link rel="prefetch" href="/javacore/assets/js/16.5241809d.js"><link rel="prefetch" href="/javacore/assets/js/17.78168216.js"><link rel="prefetch" href="/javacore/assets/js/18.c92f16c4.js"><link rel="prefetch" href="/javacore/assets/js/19.099e9533.js"><link rel="prefetch" href="/javacore/assets/js/20.2a48e7e2.js"><link rel="prefetch" href="/javacore/assets/js/21.32368b62.js"><link rel="prefetch" href="/javacore/assets/js/22.5252e8af.js"><link rel="prefetch" href="/javacore/assets/js/23.24096651.js"><link rel="prefetch" href="/javacore/assets/js/24.86b4a663.js"><link rel="prefetch" href="/javacore/assets/js/25.59ab8bc9.js"><link rel="prefetch" href="/javacore/assets/js/26.0721512b.js"><link rel="prefetch" href="/javacore/assets/js/27.c4d59768.js"><link rel="prefetch" href="/javacore/assets/js/28.04551164.js"><link rel="prefetch" href="/javacore/assets/js/29.db12912f.js"><link rel="prefetch" href="/javacore/assets/js/30.0d802d5e.js"><link rel="prefetch" href="/javacore/assets/js/31.9963f4e9.js"><link rel="prefetch" href="/javacore/assets/js/33.cbd2593d.js"><link rel="prefetch" href="/javacore/assets/js/34.67771b2b.js"><link rel="prefetch" href="/javacore/assets/js/35.fcd73a73.js"><link rel="prefetch" href="/javacore/assets/js/36.3c7702f7.js"><link rel="prefetch" href="/javacore/assets/js/37.b6845161.js"><link rel="prefetch" href="/javacore/assets/js/38.72a934f9.js"><link rel="prefetch" href="/javacore/assets/js/39.38104d31.js"><link rel="prefetch" href="/javacore/assets/js/40.09a7bf54.js"><link rel="prefetch" href="/javacore/assets/js/41.645609ce.js"><link rel="prefetch" href="/javacore/assets/js/42.ec4b0d8c.js"><link rel="prefetch" href="/javacore/assets/js/43.b1fa9ba2.js"><link rel="prefetch" href="/javacore/assets/js/44.fedde9b2.js"><link rel="prefetch" href="/javacore/assets/js/45.48adb696.js"><link rel="prefetch" href="/javacore/assets/js/46.13ace3f9.js"><link rel="prefetch" href="/javacore/assets/js/47.165b1fe4.js"><link rel="prefetch" href="/javacore/assets/js/48.d0429b0d.js"><link rel="prefetch" href="/javacore/assets/js/49.46309662.js"><link rel="prefetch" href="/javacore/assets/js/50.d5b30588.js"><link rel="prefetch" href="/javacore/assets/js/51.e77fd12c.js"><link rel="prefetch" href="/javacore/assets/js/52.46d67c4c.js"><link rel="prefetch" href="/javacore/assets/js/53.1e725d70.js"><link rel="prefetch" href="/javacore/assets/js/54.b9ef9b8e.js"><link rel="prefetch" href="/javacore/assets/js/55.e7b94782.js"><link rel="prefetch" href="/javacore/assets/js/56.3a8f1cf6.js"><link rel="prefetch" href="/javacore/assets/js/57.66e8a115.js"><link rel="prefetch" href="/javacore/assets/js/58.ee387dc3.js"><link rel="prefetch" href="/javacore/assets/js/59.3f67cc42.js"><link rel="prefetch" href="/javacore/assets/js/6.6edee210.js"><link rel="prefetch" href="/javacore/assets/js/60.bc134987.js"><link rel="prefetch" href="/javacore/assets/js/61.0672a9d0.js"><link rel="prefetch" href="/javacore/assets/js/62.e670038b.js"><link rel="prefetch" href="/javacore/assets/js/63.0080282f.js"><link rel="prefetch" href="/javacore/assets/js/64.67d22444.js"><link rel="prefetch" href="/javacore/assets/js/65.a136cc8f.js"><link rel="prefetch" href="/javacore/assets/js/66.144da426.js"><link rel="prefetch" href="/javacore/assets/js/67.4959b85e.js"><link rel="prefetch" href="/javacore/assets/js/68.82ee0966.js"><link rel="prefetch" href="/javacore/assets/js/69.1032b73f.js"><link rel="prefetch" href="/javacore/assets/js/7.046e5a1b.js"><link rel="prefetch" href="/javacore/assets/js/8.77fb8967.js"><link rel="prefetch" href="/javacore/assets/js/9.ebfa537e.js"><link rel="prefetch" href="/javacore/assets/js/vendors~flowchart.20a64d45.js"><link rel="prefetch" href="/javacore/assets/js/vendors~notification.ea176280.js">
    <link rel="stylesheet" href="/javacore/assets/css/0.styles.b629dfcc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javacore/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/dev/common/dunwu-logo-200.png" alt="JAVACORE" class="logo"> <span class="site-name can-hide">JAVACORE</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/javacore/basics/" class="nav-link">
  åŸºç¡€ç‰¹æ€§
</a></div><div class="nav-item"><a href="/javacore/advanced/" class="nav-link">
  é«˜çº§ç‰¹æ€§
</a></div><div class="nav-item"><a href="/javacore/container/" class="nav-link">
  å®¹å™¨
</a></div><div class="nav-item"><a href="/javacore/io/" class="nav-link">
  IO
</a></div><div class="nav-item"><a href="/javacore/concurrent/" class="nav-link router-link-active">
  å¹¶å‘
</a></div><div class="nav-item"><a href="/javacore/jvm/" class="nav-link">
  JVM
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javatech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/javacore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/javacore/basics/" class="nav-link">
  åŸºç¡€ç‰¹æ€§
</a></div><div class="nav-item"><a href="/javacore/advanced/" class="nav-link">
  é«˜çº§ç‰¹æ€§
</a></div><div class="nav-item"><a href="/javacore/container/" class="nav-link">
  å®¹å™¨
</a></div><div class="nav-item"><a href="/javacore/io/" class="nav-link">
  IO
</a></div><div class="nav-item"><a href="/javacore/concurrent/" class="nav-link router-link-active">
  å¹¶å‘
</a></div><div class="nav-item"><a href="/javacore/jvm/" class="nav-link">
  JVM
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javatech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/javacore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java Fork Join æ¡†æ¶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javacore/concurrent/ForkJoin%E6%A1%86%E6%9E%B6.html#_1-completablefuture" class="sidebar-link">1. CompletableFuture</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/concurrent/ForkJoin%E6%A1%86%E6%9E%B6.html#_1-1-runasync-å’Œ-supplyasync-æ–¹æ³•" class="sidebar-link">1.1. runAsync å’Œ supplyAsync æ–¹æ³•</a></li></ul></li><li><a href="/javacore/concurrent/ForkJoin%E6%A1%86%E6%9E%B6.html#_2-completionstage" class="sidebar-link">2. CompletionStage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/concurrent/ForkJoin%E6%A1%86%E6%9E%B6.html#_2-1-ä¸²è¡Œå…³ç³»" class="sidebar-link">2.1. ä¸²è¡Œå…³ç³»</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/ForkJoin%E6%A1%86%E6%9E%B6.html#_2-2-æè¿°-and-æ±‡èšå…³ç³»" class="sidebar-link">2.2. æè¿° AND æ±‡èšå…³ç³»</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/ForkJoin%E6%A1%86%E6%9E%B6.html#_2-3-æè¿°-or-æ±‡èšå…³ç³»" class="sidebar-link">2.3. æè¿° OR æ±‡èšå…³ç³»</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/ForkJoin%E6%A1%86%E6%9E%B6.html#_2-4-å¼‚å¸¸å¤„ç†" class="sidebar-link">2.4. å¼‚å¸¸å¤„ç†</a></li></ul></li><li><a href="/javacore/concurrent/ForkJoin%E6%A1%86%E6%9E%B6.html#_3-fork-join" class="sidebar-link">3. Fork/Join</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/concurrent/ForkJoin%E6%A1%86%E6%9E%B6.html#_3-1-forkjoinpool-å·¥ä½œåŸç†" class="sidebar-link">3.1. ForkJoinPool å·¥ä½œåŸç†</a></li></ul></li><li><a href="/javacore/concurrent/ForkJoin%E6%A1%86%E6%9E%B6.html#_4-å‚è€ƒèµ„æ–™" class="sidebar-link">4. å‚è€ƒèµ„æ–™</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="java-fork-join-æ¡†æ¶"><a href="#java-fork-join-æ¡†æ¶" class="header-anchor">#</a> Java Fork Join æ¡†æ¶</h1> <p><strong>å¯¹äºç®€å•çš„å¹¶è¡Œä»»åŠ¡ï¼Œä½ å¯ä»¥é€šè¿‡â€œçº¿ç¨‹æ±  +Futureâ€çš„æ–¹æ¡ˆæ¥è§£å†³ï¼›å¦‚æœä»»åŠ¡ä¹‹é—´æœ‰èšåˆå…³ç³»ï¼Œæ— è®ºæ˜¯ AND èšåˆè¿˜æ˜¯ OR èšåˆï¼Œéƒ½å¯ä»¥é€šè¿‡ CompletableFuture æ¥è§£å†³ï¼›è€Œæ‰¹é‡çš„å¹¶è¡Œä»»åŠ¡ï¼Œåˆ™å¯ä»¥é€šè¿‡ CompletionService æ¥è§£å†³ã€‚</strong></p> <ul><li><a href="#1-completablefuture">1. CompletableFuture</a> <ul><li><a href="#11-runasync-%E5%92%8C-supplyasync-%E6%96%B9%E6%B3%95">1.1. runAsync å’Œ supplyAsync æ–¹æ³•</a></li></ul></li> <li><a href="#2-completionstage">2. CompletionStage</a> <ul><li><a href="#21-%E4%B8%B2%E8%A1%8C%E5%85%B3%E7%B3%BB">2.1. ä¸²è¡Œå…³ç³»</a></li> <li><a href="#22-%E6%8F%8F%E8%BF%B0-and-%E6%B1%87%E8%81%9A%E5%85%B3%E7%B3%BB">2.2. æè¿° AND æ±‡èšå…³ç³»</a></li> <li><a href="#23-%E6%8F%8F%E8%BF%B0-or-%E6%B1%87%E8%81%9A%E5%85%B3%E7%B3%BB">2.3. æè¿° OR æ±‡èšå…³ç³»</a></li> <li><a href="#24-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">2.4. å¼‚å¸¸å¤„ç†</a></li></ul></li> <li><a href="#3-forkjoin">3. Fork/Join</a> <ul><li><a href="#31-forkjoinpool-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">3.1. ForkJoinPool å·¥ä½œåŸç†</a></li></ul></li> <li><a href="#4-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">4. å‚è€ƒèµ„æ–™</a></li></ul> <h2 id="_1-completablefuture"><a href="#_1-completablefuture" class="header-anchor">#</a> 1. CompletableFuture</h2> <h3 id="_1-1-runasync-å’Œ-supplyasync-æ–¹æ³•"><a href="#_1-1-runasync-å’Œ-supplyasync-æ–¹æ³•" class="header-anchor">#</a> 1.1. runAsync å’Œ supplyAsync æ–¹æ³•</h3> <p>CompletableFuture æä¾›äº†å››ä¸ªé™æ€æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> runnable<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> runnable<span class="token punctuation">,</span> <span class="token class-name">Executor</span> executor<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token function">supplyAsync</span><span class="token punctuation">(</span><span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> supplier<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token function">supplyAsync</span><span class="token punctuation">(</span><span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> supplier<span class="token punctuation">,</span> <span class="token class-name">Executor</span> executor<span class="token punctuation">)</span>
</code></pre></div><p>æ²¡æœ‰æŒ‡å®š Executor çš„æ–¹æ³•ä¼šä½¿ç”¨ ForkJoinPool.commonPool() ä½œä¸ºå®ƒçš„çº¿ç¨‹æ± æ‰§è¡Œå¼‚æ­¥ä»£ç ã€‚å¦‚æœæŒ‡å®šçº¿ç¨‹æ± ï¼Œåˆ™ä½¿ç”¨æŒ‡å®šçš„çº¿ç¨‹æ± è¿è¡Œã€‚ä»¥ä¸‹æ‰€æœ‰çš„æ–¹æ³•éƒ½ç±»åŒã€‚</p> <ul><li>runAsync æ–¹æ³•ä¸æ”¯æŒè¿”å›å€¼ã€‚</li> <li>supplyAsync å¯ä»¥æ”¯æŒè¿”å›å€¼ã€‚</li></ul> <h2 id="_2-completionstage"><a href="#_2-completionstage" class="header-anchor">#</a> 2. CompletionStage</h2> <p>CompletionStage æ¥å£å¯ä»¥æ¸…æ™°åœ°æè¿°ä»»åŠ¡ä¹‹é—´çš„æ—¶åºå…³ç³»ï¼Œå¦‚<strong>ä¸²è¡Œå…³ç³»ã€å¹¶è¡Œå…³ç³»ã€æ±‡èšå…³ç³»</strong>ç­‰ã€‚</p> <h3 id="_2-1-ä¸²è¡Œå…³ç³»"><a href="#_2-1-ä¸²è¡Œå…³ç³»" class="header-anchor">#</a> 2.1. ä¸²è¡Œå…³ç³»</h3> <p>CompletionStage æ¥å£é‡Œé¢æè¿°ä¸²è¡Œå…³ç³»ï¼Œä¸»è¦æ˜¯ thenApplyã€thenAcceptã€thenRun å’Œ thenCompose è¿™å››ä¸ªç³»åˆ—çš„æ¥å£ã€‚</p> <p>thenApply ç³»åˆ—å‡½æ•°é‡Œå‚æ•° fn çš„ç±»å‹æ˜¯æ¥å£ <code>Function&lt;T, R&gt;</code>ï¼Œè¿™ä¸ªæ¥å£é‡Œä¸ CompletionStage ç›¸å…³çš„æ–¹æ³•æ˜¯ <code>R apply(T t)</code>ï¼Œè¿™ä¸ªæ–¹æ³•æ—¢èƒ½æ¥æ”¶å‚æ•°ä¹Ÿæ”¯æŒè¿”å›å€¼ï¼Œæ‰€ä»¥ thenApply ç³»åˆ—æ–¹æ³•è¿”å›çš„æ˜¯<code>CompletionStage</code>ã€‚</p> <p>è€Œ thenAccept ç³»åˆ—æ–¹æ³•é‡Œå‚æ•° consumer çš„ç±»å‹æ˜¯æ¥å£ <code>Consumer&lt;T&gt;</code>ï¼Œè¿™ä¸ªæ¥å£é‡Œä¸ CompletionStage ç›¸å…³çš„æ–¹æ³•æ˜¯ <code>void accept(T t)</code>ï¼Œè¿™ä¸ªæ–¹æ³•è™½ç„¶æ”¯æŒå‚æ•°ï¼Œä½†å´ä¸æ”¯æŒå›å€¼ï¼Œæ‰€ä»¥ thenAccept ç³»åˆ—æ–¹æ³•è¿”å›çš„æ˜¯<code>CompletionStage&lt;Void&gt;</code>ã€‚</p> <p>thenRun ç³»åˆ—æ–¹æ³•é‡Œ action çš„å‚æ•°æ˜¯ Runnableï¼Œæ‰€ä»¥ action æ—¢ä¸èƒ½æ¥æ”¶å‚æ•°ä¹Ÿä¸æ”¯æŒè¿”å›å€¼ï¼Œæ‰€ä»¥ thenRun ç³»åˆ—æ–¹æ³•è¿”å›çš„ä¹Ÿæ˜¯<code>CompletionStage&lt;Void&gt;</code>ã€‚</p> <p>è¿™äº›æ–¹æ³•é‡Œé¢ Async ä»£è¡¨çš„æ˜¯å¼‚æ­¥æ‰§è¡Œ fnã€consumer æˆ–è€… actionã€‚å…¶ä¸­ï¼Œéœ€è¦ä½ æ³¨æ„çš„æ˜¯ thenCompose ç³»åˆ—æ–¹æ³•ï¼Œè¿™ä¸ªç³»åˆ—çš„æ–¹æ³•ä¼šæ–°åˆ›å»ºå‡ºä¸€ä¸ªå­æµç¨‹ï¼Œæœ€ç»ˆç»“æœå’Œ thenApply ç³»åˆ—æ˜¯ç›¸åŒçš„ã€‚</p> <h3 id="_2-2-æè¿°-and-æ±‡èšå…³ç³»"><a href="#_2-2-æè¿°-and-æ±‡èšå…³ç³»" class="header-anchor">#</a> 2.2. æè¿° AND æ±‡èšå…³ç³»</h3> <p>CompletionStage æ¥å£é‡Œé¢æè¿° AND æ±‡èšå…³ç³»ï¼Œä¸»è¦æ˜¯ thenCombineã€thenAcceptBoth å’Œ runAfterBoth ç³»åˆ—çš„æ¥å£ï¼Œè¿™äº›æ¥å£çš„åŒºåˆ«ä¹Ÿæ˜¯æºè‡ª fnã€consumerã€action è¿™ä¸‰ä¸ªæ ¸å¿ƒå‚æ•°ä¸åŒã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>CompletionStage&lt;R&gt; thenCombine(other, fn);
CompletionStage&lt;R&gt; thenCombineAsync(other, fn);
CompletionStage&lt;Void&gt; thenAcceptBoth(other, consumer);
CompletionStage&lt;Void&gt; thenAcceptBothAsync(other, consumer);
CompletionStage&lt;Void&gt; runAfterBoth(other, action);
CompletionStage&lt;Void&gt; runAfterBothAsync(other, action);
</code></pre></div><h3 id="_2-3-æè¿°-or-æ±‡èšå…³ç³»"><a href="#_2-3-æè¿°-or-æ±‡èšå…³ç³»" class="header-anchor">#</a> 2.3. æè¿° OR æ±‡èšå…³ç³»</h3> <p>CompletionStage æ¥å£é‡Œé¢æè¿° OR æ±‡èšå…³ç³»ï¼Œä¸»è¦æ˜¯ applyToEitherã€acceptEither å’Œ runAfterEither ç³»åˆ—çš„æ¥å£ï¼Œè¿™äº›æ¥å£çš„åŒºåˆ«ä¹Ÿæ˜¯æºè‡ª fnã€consumerã€action è¿™ä¸‰ä¸ªæ ¸å¿ƒå‚æ•°ä¸åŒã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>CompletionStage applyToEither(other, fn);
CompletionStage applyToEitherAsync(other, fn);
CompletionStage acceptEither(other, consumer);
CompletionStage acceptEitherAsync(other, consumer);
CompletionStage runAfterEither(other, action);
CompletionStage runAfterEitherAsync(other, action);
</code></pre></div><p>ä¸‹é¢çš„ç¤ºä¾‹ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ applyToEither() æ–¹æ³•æ¥æè¿°ä¸€ä¸ª OR æ±‡èšå…³ç³»ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>CompletableFuture&lt;String&gt; f1 =
  CompletableFuture.supplyAsync(()-&gt;{
    int t = getRandom(5, 10);
    sleep(t, TimeUnit.SECONDS);
    return String.valueOf(t);
});

CompletableFuture&lt;String&gt; f2 =
  CompletableFuture.supplyAsync(()-&gt;{
    int t = getRandom(5, 10);
    sleep(t, TimeUnit.SECONDS);
    return String.valueOf(t);
});

CompletableFuture&lt;String&gt; f3 =
  f1.applyToEither(f2,s -&gt; s);

System.out.println(f3.join());
</code></pre></div><h3 id="_2-4-å¼‚å¸¸å¤„ç†"><a href="#_2-4-å¼‚å¸¸å¤„ç†" class="header-anchor">#</a> 2.4. å¼‚å¸¸å¤„ç†</h3> <p>è™½ç„¶ä¸Šé¢æˆ‘ä»¬æåˆ°çš„ fnã€consumerã€action å®ƒä»¬çš„æ ¸å¿ƒæ–¹æ³•éƒ½<strong>ä¸å…è®¸æŠ›å‡ºå¯æ£€æŸ¥å¼‚å¸¸ï¼Œä½†æ˜¯å´æ— æ³•é™åˆ¶å®ƒä»¬æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸</strong>ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼Œæ‰§è¡Œ <code>7/0</code> å°±ä¼šå‡ºç°é™¤é›¶é”™è¯¯è¿™ä¸ªè¿è¡Œæ—¶å¼‚å¸¸ã€‚éå¼‚æ­¥ç¼–ç¨‹é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ try{}catch{} æ¥æ•è·å¹¶å¤„ç†å¼‚å¸¸ï¼Œé‚£åœ¨å¼‚æ­¥ç¼–ç¨‹é‡Œé¢ï¼Œå¼‚å¸¸è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</p> <div class="language- extra-class"><pre class="language-text"><code>CompletableFuture&lt;Integer&gt;
  f0 = CompletableFuture.
    .supplyAsync(()-&gt;(7/0))
    .thenApply(r-&gt;r*10);
System.out.println(f0.join());
</code></pre></div><p>CompletionStage æ¥å£ç»™æˆ‘ä»¬æä¾›çš„æ–¹æ¡ˆéå¸¸ç®€å•ï¼Œæ¯” try{}catch{}è¿˜è¦ç®€å•ï¼Œä¸‹é¢æ˜¯ç›¸å…³çš„æ–¹æ³•ï¼Œä½¿ç”¨è¿™äº›æ–¹æ³•è¿›è¡Œå¼‚å¸¸å¤„ç†å’Œä¸²è¡Œæ“ä½œæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ”¯æŒé“¾å¼ç¼–ç¨‹æ–¹å¼ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>CompletionStage exceptionally(fn);
CompletionStage&lt;R&gt; whenComplete(consumer);
CompletionStage&lt;R&gt; whenCompleteAsync(consumer);
CompletionStage&lt;R&gt; handle(fn);
CompletionStage&lt;R&gt; handleAsync(fn);
</code></pre></div><p>ä¸‹é¢çš„ç¤ºä¾‹ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ exceptionally() æ–¹æ³•æ¥å¤„ç†å¼‚å¸¸ï¼Œexceptionally() çš„ä½¿ç”¨éå¸¸ç±»ä¼¼äº try{}catch{}ä¸­çš„ catch{}ï¼Œä½†æ˜¯ç”±äºæ”¯æŒé“¾å¼ç¼–ç¨‹æ–¹å¼ï¼Œæ‰€ä»¥ç›¸å¯¹æ›´ç®€å•ã€‚æ—¢ç„¶æœ‰ try{}catch{}ï¼Œé‚£å°±ä¸€å®šè¿˜æœ‰ try{}finally{}ï¼ŒwhenComplete() å’Œ handle() ç³»åˆ—æ–¹æ³•å°±ç±»ä¼¼äº try{}finally{}ä¸­çš„ finally{}ï¼Œæ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ whenComplete() ä¸­çš„å›è°ƒå‡½æ•° consumer å’Œ handle() ä¸­çš„å›è°ƒå‡½æ•° fnã€‚whenComplete() å’Œ handle() çš„åŒºåˆ«åœ¨äº whenComplete() ä¸æ”¯æŒè¿”å›ç»“æœï¼Œè€Œ handle() æ˜¯æ”¯æŒè¿”å›ç»“æœçš„ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>CompletableFuture&lt;Integer&gt;
  f0 = CompletableFuture
    .supplyAsync(()-&gt;7/0))
    .thenApply(r-&gt;r*10)
    .exceptionally(e-&gt;0);
System.out.println(f0.join());
</code></pre></div><h2 id="_3-fork-join"><a href="#_3-fork-join" class="header-anchor">#</a> 3. Fork/Join</h2> <p>Fork/Join æ˜¯ä¸€ä¸ªå¹¶è¡Œè®¡ç®—çš„æ¡†æ¶ï¼Œä¸»è¦å°±æ˜¯ç”¨æ¥æ”¯æŒåˆ†æ²»ä»»åŠ¡æ¨¡å‹çš„ï¼Œè¿™ä¸ªè®¡ç®—æ¡†æ¶é‡Œçš„<strong>Fork å¯¹åº”çš„æ˜¯åˆ†æ²»ä»»åŠ¡æ¨¡å‹é‡Œçš„ä»»åŠ¡åˆ†è§£ï¼ŒJoin å¯¹åº”çš„æ˜¯ç»“æœåˆå¹¶</strong>ã€‚Fork/Join è®¡ç®—æ¡†æ¶ä¸»è¦åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯<strong>åˆ†æ²»ä»»åŠ¡çš„çº¿ç¨‹æ±  ForkJoinPool</strong>ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯<strong>åˆ†æ²»ä»»åŠ¡ ForkJoinTask</strong>ã€‚è¿™ä¸¤éƒ¨åˆ†çš„å…³ç³»ç±»ä¼¼äº ThreadPoolExecutor å’Œ Runnable çš„å…³ç³»ï¼Œéƒ½å¯ä»¥ç†è§£ä¸ºæäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± ï¼Œåªä¸è¿‡åˆ†æ²»ä»»åŠ¡æœ‰è‡ªå·±ç‹¬ç‰¹ç±»å‹ ForkJoinTaskã€‚</p> <p>ForkJoinTask æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒçš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæœ€æ ¸å¿ƒçš„æ˜¯ fork() æ–¹æ³•å’Œ join() æ–¹æ³•ï¼Œå…¶ä¸­ fork() æ–¹æ³•ä¼šå¼‚æ­¥åœ°æ‰§è¡Œä¸€ä¸ªå­ä»»åŠ¡ï¼Œè€Œ join() æ–¹æ³•åˆ™ä¼šé˜»å¡å½“å‰çº¿ç¨‹æ¥ç­‰å¾…å­ä»»åŠ¡çš„æ‰§è¡Œç»“æœã€‚ForkJoinTask æœ‰ä¸¤ä¸ªå­ç±»â€”â€”RecursiveAction å’Œ RecursiveTaskï¼Œé€šè¿‡åå­—ä½ å°±åº”è¯¥èƒ½çŸ¥é“ï¼Œå®ƒä»¬éƒ½æ˜¯ç”¨é€’å½’çš„æ–¹å¼æ¥å¤„ç†åˆ†æ²»ä»»åŠ¡çš„ã€‚è¿™ä¸¤ä¸ªå­ç±»éƒ½å®šä¹‰äº†æŠ½è±¡æ–¹æ³• compute()ï¼Œä¸è¿‡åŒºåˆ«æ˜¯ RecursiveAction å®šä¹‰çš„ compute() æ²¡æœ‰è¿”å›å€¼ï¼Œè€Œ RecursiveTask å®šä¹‰çš„ compute() æ–¹æ³•æ˜¯æœ‰è¿”å›å€¼çš„ã€‚è¿™ä¸¤ä¸ªå­ç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦ä½ å®šä¹‰å­ç±»å»æ‰©å±•ã€‚</p> <h3 id="_3-1-forkjoinpool-å·¥ä½œåŸç†"><a href="#_3-1-forkjoinpool-å·¥ä½œåŸç†" class="header-anchor">#</a> 3.1. ForkJoinPool å·¥ä½œåŸç†</h3> <p>Fork/Join å¹¶è¡Œè®¡ç®—çš„æ ¸å¿ƒç»„ä»¶æ˜¯ ForkJoinPoolï¼Œæ‰€ä»¥ä¸‹é¢æˆ‘ä»¬å°±æ¥ç®€å•ä»‹ç»ä¸€ä¸‹ ForkJoinPool çš„å·¥ä½œåŸç†ã€‚</p> <p>é€šè¿‡ä¸“æ å‰é¢æ–‡ç« çš„å­¦ä¹ ï¼Œä½ åº”è¯¥å·²ç»çŸ¥é“ ThreadPoolExecutor æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç”Ÿäº§è€… - æ¶ˆè´¹è€…æ¨¡å¼çš„å®ç°ï¼Œå†…éƒ¨æœ‰ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿™ä¸ªä»»åŠ¡é˜Ÿåˆ—æ˜¯ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é€šä¿¡çš„åª’ä»‹ï¼›ThreadPoolExecutor å¯ä»¥æœ‰å¤šä¸ªå·¥ä½œçº¿ç¨‹ï¼Œä½†æ˜¯è¿™äº›å·¥ä½œçº¿ç¨‹éƒ½å…±äº«ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ã€‚</p> <p>ForkJoinPool æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªç”Ÿäº§è€… - æ¶ˆè´¹è€…çš„å®ç°ï¼Œä½†æ˜¯æ›´åŠ æ™ºèƒ½ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„ ForkJoinPool å·¥ä½œåŸç†å›¾æ¥ç†è§£å…¶åŸç†ã€‚ThreadPoolExecutor å†…éƒ¨åªæœ‰ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œè€Œ ForkJoinPool å†…éƒ¨æœ‰å¤šä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œå½“æˆ‘ä»¬é€šè¿‡ ForkJoinPool çš„ invoke() æˆ–è€… submit() æ–¹æ³•æäº¤ä»»åŠ¡æ—¶ï¼ŒForkJoinPool æ ¹æ®ä¸€å®šçš„è·¯ç”±è§„åˆ™æŠŠä»»åŠ¡æäº¤åˆ°ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœä»»åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šåˆ›å»ºå‡ºå­ä»»åŠ¡ï¼Œé‚£ä¹ˆå­ä»»åŠ¡ä¼šæäº¤åˆ°å·¥ä½œçº¿ç¨‹å¯¹åº”çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚</p> <p>å¦‚æœå·¥ä½œçº¿ç¨‹å¯¹åº”çš„ä»»åŠ¡é˜Ÿåˆ—ç©ºäº†ï¼Œæ˜¯ä¸æ˜¯å°±æ²¡æ´»å„¿å¹²äº†å‘¢ï¼Ÿä¸æ˜¯çš„ï¼ŒForkJoinPool æ”¯æŒä¸€ç§å«åšâ€œ<strong>ä»»åŠ¡çªƒå–</strong>â€çš„æœºåˆ¶ï¼Œå¦‚æœå·¥ä½œçº¿ç¨‹ç©ºé—²äº†ï¼Œé‚£å®ƒå¯ä»¥â€œçªƒå–â€å…¶ä»–å·¥ä½œä»»åŠ¡é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­ï¼Œçº¿ç¨‹ T2 å¯¹åº”çš„ä»»åŠ¡é˜Ÿåˆ—å·²ç»ç©ºäº†ï¼Œå®ƒå¯ä»¥â€œçªƒå–â€çº¿ç¨‹ T1 å¯¹åº”çš„ä»»åŠ¡é˜Ÿåˆ—çš„ä»»åŠ¡ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œæ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹éƒ½ä¸ä¼šé—²ä¸‹æ¥äº†ã€‚</p> <p>ForkJoinPool ä¸­çš„ä»»åŠ¡é˜Ÿåˆ—é‡‡ç”¨çš„æ˜¯åŒç«¯é˜Ÿåˆ—ï¼Œå·¥ä½œçº¿ç¨‹æ­£å¸¸è·å–ä»»åŠ¡å’Œâ€œçªƒå–ä»»åŠ¡â€åˆ†åˆ«æ˜¯ä»ä»»åŠ¡é˜Ÿåˆ—ä¸åŒçš„ç«¯æ¶ˆè´¹ï¼Œè¿™æ ·èƒ½é¿å…å¾ˆå¤šä¸å¿…è¦çš„æ•°æ®ç«äº‰ã€‚æˆ‘ä»¬è¿™é‡Œä»‹ç»çš„ä»…ä»…æ˜¯ç®€åŒ–åçš„åŸç†ï¼ŒForkJoinPool çš„å®ç°è¿œæ¯”æˆ‘ä»¬è¿™é‡Œä»‹ç»çš„å¤æ‚ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå»ºè®®å»çœ‹å®ƒçš„æºç ã€‚</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200703141326.png" alt="img"></p> <h2 id="_4-å‚è€ƒèµ„æ–™"><a href="#_4-å‚è€ƒèµ„æ–™" class="header-anchor">#</a> 4. å‚è€ƒèµ„æ–™</h2> <ul><li><a href="https://book.douban.com/subject/10484692/" target="_blank" rel="noopener noreferrer">ã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://book.douban.com/subject/26591326/" target="_blank" rel="noopener noreferrer">ã€ŠJava å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://time.geekbang.org/column/intro/100023901" target="_blank" rel="noopener noreferrer">ã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.jianshu.com/p/6bac52527ca4" target="_blank" rel="noopener noreferrer">CompletableFuture ä½¿ç”¨è¯¦è§£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/javacore/edit/master/docs/concurrent/ForkJoinæ¡†æ¶.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">3 minutes ago</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/javacore/assets/js/app.62a93b3d.js" defer></script><script src="/javacore/assets/js/4.156ff030.js" defer></script><script src="/javacore/assets/js/32.fd822274.js" defer></script><script src="/javacore/assets/js/5.cb43ecfb.js" defer></script>
  </body>
</html>
