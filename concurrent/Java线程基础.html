<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java çº¿ç¨‹åŸºç¡€ | JAVACORE</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/javacore/favicon.ico">
    <meta name="description" content="Java æ•™ç¨‹">
    
    <link rel="preload" href="/javacore/assets/css/0.styles.b629dfcc.css" as="style"><link rel="preload" href="/javacore/assets/js/app.62a93b3d.js" as="script"><link rel="preload" href="/javacore/assets/js/4.156ff030.js" as="script"><link rel="preload" href="/javacore/assets/js/39.38104d31.js" as="script"><link rel="preload" href="/javacore/assets/js/5.cb43ecfb.js" as="script"><link rel="prefetch" href="/javacore/assets/js/10.914d71f6.js"><link rel="prefetch" href="/javacore/assets/js/11.d42a0004.js"><link rel="prefetch" href="/javacore/assets/js/12.ebe9232a.js"><link rel="prefetch" href="/javacore/assets/js/13.5288142e.js"><link rel="prefetch" href="/javacore/assets/js/14.9d818b0a.js"><link rel="prefetch" href="/javacore/assets/js/15.b38fe602.js"><link rel="prefetch" href="/javacore/assets/js/16.5241809d.js"><link rel="prefetch" href="/javacore/assets/js/17.78168216.js"><link rel="prefetch" href="/javacore/assets/js/18.c92f16c4.js"><link rel="prefetch" href="/javacore/assets/js/19.099e9533.js"><link rel="prefetch" href="/javacore/assets/js/20.2a48e7e2.js"><link rel="prefetch" href="/javacore/assets/js/21.32368b62.js"><link rel="prefetch" href="/javacore/assets/js/22.5252e8af.js"><link rel="prefetch" href="/javacore/assets/js/23.24096651.js"><link rel="prefetch" href="/javacore/assets/js/24.86b4a663.js"><link rel="prefetch" href="/javacore/assets/js/25.59ab8bc9.js"><link rel="prefetch" href="/javacore/assets/js/26.0721512b.js"><link rel="prefetch" href="/javacore/assets/js/27.c4d59768.js"><link rel="prefetch" href="/javacore/assets/js/28.04551164.js"><link rel="prefetch" href="/javacore/assets/js/29.db12912f.js"><link rel="prefetch" href="/javacore/assets/js/30.0d802d5e.js"><link rel="prefetch" href="/javacore/assets/js/31.9963f4e9.js"><link rel="prefetch" href="/javacore/assets/js/32.fd822274.js"><link rel="prefetch" href="/javacore/assets/js/33.cbd2593d.js"><link rel="prefetch" href="/javacore/assets/js/34.67771b2b.js"><link rel="prefetch" href="/javacore/assets/js/35.fcd73a73.js"><link rel="prefetch" href="/javacore/assets/js/36.3c7702f7.js"><link rel="prefetch" href="/javacore/assets/js/37.b6845161.js"><link rel="prefetch" href="/javacore/assets/js/38.72a934f9.js"><link rel="prefetch" href="/javacore/assets/js/40.09a7bf54.js"><link rel="prefetch" href="/javacore/assets/js/41.645609ce.js"><link rel="prefetch" href="/javacore/assets/js/42.ec4b0d8c.js"><link rel="prefetch" href="/javacore/assets/js/43.b1fa9ba2.js"><link rel="prefetch" href="/javacore/assets/js/44.fedde9b2.js"><link rel="prefetch" href="/javacore/assets/js/45.48adb696.js"><link rel="prefetch" href="/javacore/assets/js/46.13ace3f9.js"><link rel="prefetch" href="/javacore/assets/js/47.165b1fe4.js"><link rel="prefetch" href="/javacore/assets/js/48.d0429b0d.js"><link rel="prefetch" href="/javacore/assets/js/49.46309662.js"><link rel="prefetch" href="/javacore/assets/js/50.d5b30588.js"><link rel="prefetch" href="/javacore/assets/js/51.e77fd12c.js"><link rel="prefetch" href="/javacore/assets/js/52.46d67c4c.js"><link rel="prefetch" href="/javacore/assets/js/53.1e725d70.js"><link rel="prefetch" href="/javacore/assets/js/54.b9ef9b8e.js"><link rel="prefetch" href="/javacore/assets/js/55.e7b94782.js"><link rel="prefetch" href="/javacore/assets/js/56.3a8f1cf6.js"><link rel="prefetch" href="/javacore/assets/js/57.66e8a115.js"><link rel="prefetch" href="/javacore/assets/js/58.ee387dc3.js"><link rel="prefetch" href="/javacore/assets/js/59.3f67cc42.js"><link rel="prefetch" href="/javacore/assets/js/6.6edee210.js"><link rel="prefetch" href="/javacore/assets/js/60.bc134987.js"><link rel="prefetch" href="/javacore/assets/js/61.0672a9d0.js"><link rel="prefetch" href="/javacore/assets/js/62.e670038b.js"><link rel="prefetch" href="/javacore/assets/js/63.0080282f.js"><link rel="prefetch" href="/javacore/assets/js/64.67d22444.js"><link rel="prefetch" href="/javacore/assets/js/65.a136cc8f.js"><link rel="prefetch" href="/javacore/assets/js/66.144da426.js"><link rel="prefetch" href="/javacore/assets/js/67.4959b85e.js"><link rel="prefetch" href="/javacore/assets/js/68.82ee0966.js"><link rel="prefetch" href="/javacore/assets/js/69.1032b73f.js"><link rel="prefetch" href="/javacore/assets/js/7.046e5a1b.js"><link rel="prefetch" href="/javacore/assets/js/8.77fb8967.js"><link rel="prefetch" href="/javacore/assets/js/9.ebfa537e.js"><link rel="prefetch" href="/javacore/assets/js/vendors~flowchart.20a64d45.js"><link rel="prefetch" href="/javacore/assets/js/vendors~notification.ea176280.js">
    <link rel="stylesheet" href="/javacore/assets/css/0.styles.b629dfcc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javacore/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/dev/common/dunwu-logo-200.png" alt="JAVACORE" class="logo"> <span class="site-name can-hide">JAVACORE</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/javacore/basics/" class="nav-link">
  åŸºç¡€ç‰¹æ€§
</a></div><div class="nav-item"><a href="/javacore/advanced/" class="nav-link">
  é«˜çº§ç‰¹æ€§
</a></div><div class="nav-item"><a href="/javacore/container/" class="nav-link">
  å®¹å™¨
</a></div><div class="nav-item"><a href="/javacore/io/" class="nav-link">
  IO
</a></div><div class="nav-item"><a href="/javacore/concurrent/" class="nav-link router-link-active">
  å¹¶å‘
</a></div><div class="nav-item"><a href="/javacore/jvm/" class="nav-link">
  JVM
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javatech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/javacore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/javacore/basics/" class="nav-link">
  åŸºç¡€ç‰¹æ€§
</a></div><div class="nav-item"><a href="/javacore/advanced/" class="nav-link">
  é«˜çº§ç‰¹æ€§
</a></div><div class="nav-item"><a href="/javacore/container/" class="nav-link">
  å®¹å™¨
</a></div><div class="nav-item"><a href="/javacore/io/" class="nav-link">
  IO
</a></div><div class="nav-item"><a href="/javacore/concurrent/" class="nav-link router-link-active">
  å¹¶å‘
</a></div><div class="nav-item"><a href="/javacore/jvm/" class="nav-link">
  JVM
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javatech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot æ•™ç¨‹ ğŸ“š
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/javacore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java çº¿ç¨‹åŸºç¡€</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_1-çº¿ç¨‹ç®€ä»‹" class="sidebar-link">1. çº¿ç¨‹ç®€ä»‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_1-1-ä»€ä¹ˆæ˜¯è¿›ç¨‹" class="sidebar-link">1.1. ä»€ä¹ˆæ˜¯è¿›ç¨‹</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_1-2-ä»€ä¹ˆæ˜¯çº¿ç¨‹" class="sidebar-link">1.2. ä»€ä¹ˆæ˜¯çº¿ç¨‹</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_1-3-è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«" class="sidebar-link">1.3. è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</a></li></ul></li><li><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_2-åˆ›å»ºçº¿ç¨‹" class="sidebar-link">2. åˆ›å»ºçº¿ç¨‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_2-1-thread" class="sidebar-link">2.1. Thread</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_2-2-runnable" class="sidebar-link">2.2. Runnable</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_2-3-callableã€futureã€futuretask" class="sidebar-link">2.3. Callableã€Futureã€FutureTask</a></li></ul></li><li><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_3-çº¿ç¨‹åŸºæœ¬ç”¨æ³•" class="sidebar-link">3. çº¿ç¨‹åŸºæœ¬ç”¨æ³•</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_3-1-çº¿ç¨‹ä¼‘çœ " class="sidebar-link">3.1. çº¿ç¨‹ä¼‘çœ </a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_3-2-çº¿ç¨‹ç¤¼è®©" class="sidebar-link">3.2. çº¿ç¨‹ç¤¼è®©</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_3-3-ç»ˆæ­¢çº¿ç¨‹" class="sidebar-link">3.3. ç»ˆæ­¢çº¿ç¨‹</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_3-4-å®ˆæŠ¤çº¿ç¨‹" class="sidebar-link">3.4. å®ˆæŠ¤çº¿ç¨‹</a></li></ul></li><li><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_4-çº¿ç¨‹é€šä¿¡" class="sidebar-link">4. çº¿ç¨‹é€šä¿¡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_4-1-wait-notify-notifyall" class="sidebar-link">4.1. wait/notify/notifyAll</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_4-2-join" class="sidebar-link">4.2. join</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_4-3-ç®¡é“" class="sidebar-link">4.3. ç®¡é“</a></li></ul></li><li><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_5-çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ" class="sidebar-link">5. çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_6-çº¿ç¨‹å¸¸è§é—®é¢˜" class="sidebar-link">6. çº¿ç¨‹å¸¸è§é—®é¢˜</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_6-1-sleepã€yieldã€join-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«" class="sidebar-link">6.1. sleepã€yieldã€join æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_6-2-ä¸ºä»€ä¹ˆ-sleep-å’Œ-yield-æ–¹æ³•æ˜¯é™æ€çš„" class="sidebar-link">6.2. ä¸ºä»€ä¹ˆ sleep å’Œ yield æ–¹æ³•æ˜¯é™æ€çš„</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_6-3-java-çº¿ç¨‹æ˜¯å¦æŒ‰ç…§çº¿ç¨‹ä¼˜å…ˆçº§ä¸¥æ ¼æ‰§è¡Œ" class="sidebar-link">6.3. Java çº¿ç¨‹æ˜¯å¦æŒ‰ç…§çº¿ç¨‹ä¼˜å…ˆçº§ä¸¥æ ¼æ‰§è¡Œ</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_6-4-ä¸€ä¸ªçº¿ç¨‹ä¸¤æ¬¡è°ƒç”¨-start-æ–¹æ³•ä¼šæ€æ ·" class="sidebar-link">6.4. ä¸€ä¸ªçº¿ç¨‹ä¸¤æ¬¡è°ƒç”¨ start()æ–¹æ³•ä¼šæ€æ ·</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_6-5-start-å’Œ-run-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«" class="sidebar-link">6.5. start å’Œ run æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_6-6-å¯ä»¥ç›´æ¥è°ƒç”¨-thread-ç±»çš„-run-æ–¹æ³•ä¹ˆ" class="sidebar-link">6.6. å¯ä»¥ç›´æ¥è°ƒç”¨ Thread ç±»çš„ run æ–¹æ³•ä¹ˆ</a></li></ul></li><li><a href="/javacore/concurrent/Java%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80.html#_7-å‚è€ƒèµ„æ–™" class="sidebar-link">7. å‚è€ƒèµ„æ–™</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="java-çº¿ç¨‹åŸºç¡€"><a href="#java-çº¿ç¨‹åŸºç¡€" class="header-anchor">#</a> Java çº¿ç¨‹åŸºç¡€</h1> <blockquote><p><strong>ğŸ“¦ æœ¬æ–‡ä»¥åŠç¤ºä¾‹æºç å·²å½’æ¡£åœ¨ <a href="https://github.com/dunwu/javacore/" target="_blank" rel="noopener noreferrer">javacore<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p> <p><strong>å…³é”®è¯ï¼š<code>Thread</code>ã€<code>Runnable</code>ã€<code>Callable</code>ã€<code>Future</code>ã€<code>wait</code>ã€<code>notify</code>ã€<code>notifyAll</code>ã€<code>join</code>ã€<code>sleep</code>ã€<code>yeild</code>ã€<code>çº¿ç¨‹çŠ¶æ€</code>ã€<code>çº¿ç¨‹é€šä¿¡</code></strong></p></blockquote> <ul><li><a href="#1-%E7%BA%BF%E7%A8%8B%E7%AE%80%E4%BB%8B">1. çº¿ç¨‹ç®€ä»‹</a> <ul><li><a href="#11-%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%9B%E7%A8%8B">1.1. ä»€ä¹ˆæ˜¯è¿›ç¨‹</a></li> <li><a href="#12-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BA%BF%E7%A8%8B">1.2. ä»€ä¹ˆæ˜¯çº¿ç¨‹</a></li> <li><a href="#13-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB">1.3. è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</a></li></ul></li> <li><a href="#2-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B">2. åˆ›å»ºçº¿ç¨‹</a> <ul><li><a href="#21-thread">2.1. Thread</a></li> <li><a href="#22-runnable">2.2. Runnable</a></li> <li><a href="#23-callablefuturefuturetask">2.3. Callableã€Futureã€FutureTask</a></li></ul></li> <li><a href="#3-%E7%BA%BF%E7%A8%8B%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95">3. çº¿ç¨‹åŸºæœ¬ç”¨æ³•</a> <ul><li><a href="#31-%E7%BA%BF%E7%A8%8B%E4%BC%91%E7%9C%A0">3.1. çº¿ç¨‹ä¼‘çœ </a></li> <li><a href="#32-%E7%BA%BF%E7%A8%8B%E7%A4%BC%E8%AE%A9">3.2. çº¿ç¨‹ç¤¼è®©</a></li> <li><a href="#33-%E7%BB%88%E6%AD%A2%E7%BA%BF%E7%A8%8B">3.3. ç»ˆæ­¢çº¿ç¨‹</a></li> <li><a href="#34-%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B">3.4. å®ˆæŠ¤çº¿ç¨‹</a></li></ul></li> <li><a href="#4-%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1">4. çº¿ç¨‹é€šä¿¡</a> <ul><li><a href="#41-waitnotifynotifyall">4.1. wait/notify/notifyAll</a></li> <li><a href="#42-join">4.2. join</a></li> <li><a href="#43-%E7%AE%A1%E9%81%93">4.3. ç®¡é“</a></li></ul></li> <li><a href="#5-%E7%BA%BF%E7%A8%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">5. çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ</a></li> <li><a href="#6-%E7%BA%BF%E7%A8%8B%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">6. çº¿ç¨‹å¸¸è§é—®é¢˜</a> <ul><li><a href="#61-sleepyieldjoin-%E6%96%B9%E6%B3%95%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB">6.1. sleepã€yieldã€join æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«</a></li> <li><a href="#62-%E4%B8%BA%E4%BB%80%E4%B9%88-sleep-%E5%92%8C-yield-%E6%96%B9%E6%B3%95%E6%98%AF%E9%9D%99%E6%80%81%E7%9A%84">6.2. ä¸ºä»€ä¹ˆ sleep å’Œ yield æ–¹æ³•æ˜¯é™æ€çš„</a></li> <li><a href="#63-java-%E7%BA%BF%E7%A8%8B%E6%98%AF%E5%90%A6%E6%8C%89%E7%85%A7%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7%E4%B8%A5%E6%A0%BC%E6%89%A7%E8%A1%8C">6.3. Java çº¿ç¨‹æ˜¯å¦æŒ‰ç…§çº¿ç¨‹ä¼˜å…ˆçº§ä¸¥æ ¼æ‰§è¡Œ</a></li> <li><a href="#64-%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B%E4%B8%A4%E6%AC%A1%E8%B0%83%E7%94%A8-start%E6%96%B9%E6%B3%95%E4%BC%9A%E6%80%8E%E6%A0%B7">6.4. ä¸€ä¸ªçº¿ç¨‹ä¸¤æ¬¡è°ƒç”¨ start()æ–¹æ³•ä¼šæ€æ ·</a></li> <li><a href="#65-start-%E5%92%8C-run-%E6%96%B9%E6%B3%95%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB">6.5. <code>start</code> å’Œ <code>run</code> æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«</a></li> <li><a href="#66-%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E8%B0%83%E7%94%A8-thread-%E7%B1%BB%E7%9A%84-run-%E6%96%B9%E6%B3%95%E4%B9%88">6.6. å¯ä»¥ç›´æ¥è°ƒç”¨ <code>Thread</code> ç±»çš„ <code>run</code> æ–¹æ³•ä¹ˆ</a></li></ul></li> <li><a href="#7-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">7. å‚è€ƒèµ„æ–™</a></li></ul> <h2 id="_1-çº¿ç¨‹ç®€ä»‹"><a href="#_1-çº¿ç¨‹ç®€ä»‹" class="header-anchor">#</a> 1. çº¿ç¨‹ç®€ä»‹</h2> <h3 id="_1-1-ä»€ä¹ˆæ˜¯è¿›ç¨‹"><a href="#_1-1-ä»€ä¹ˆæ˜¯è¿›ç¨‹" class="header-anchor">#</a> 1.1. ä»€ä¹ˆæ˜¯è¿›ç¨‹</h3> <p>ç®€è¨€ä¹‹ï¼Œ<strong>è¿›ç¨‹å¯è§†ä¸ºä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åº</strong>ã€‚å®ƒæ˜¯ç³»ç»Ÿè¿è¡Œç¨‹åºçš„åŸºæœ¬å•ä½ï¼Œå› æ­¤è¿›ç¨‹æ˜¯åŠ¨æ€çš„ã€‚è¿›ç¨‹æ˜¯å…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ã€‚è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ã€‚</p> <h3 id="_1-2-ä»€ä¹ˆæ˜¯çº¿ç¨‹"><a href="#_1-2-ä»€ä¹ˆæ˜¯çº¿ç¨‹" class="header-anchor">#</a> 1.2. ä»€ä¹ˆæ˜¯çº¿ç¨‹</h3> <p>çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œè°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚çº¿ç¨‹ä¹Ÿå«è½»é‡çº§è¿›ç¨‹ï¼ˆLight Weight Processï¼‰ï¼Œåœ¨ä¸€ä¸ªè¿›ç¨‹é‡Œå¯ä»¥åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹éƒ½æ‹¥æœ‰å„è‡ªçš„è®¡æ•°å™¨ã€å †æ ˆå’Œå±€éƒ¨å˜é‡ç­‰å±æ€§ï¼Œå¹¶ä¸”èƒ½å¤Ÿè®¿é—®å…±äº«çš„å†…å­˜å˜é‡ã€‚</p> <h3 id="_1-3-è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«"><a href="#_1-3-è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«" class="header-anchor">#</a> 1.3. è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</h3> <ul><li>ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚</li> <li>çº¿ç¨‹æ¯”è¿›ç¨‹åˆ’åˆ†æ›´ç»†ï¼Œæ‰€ä»¥æ‰§è¡Œå¼€é”€æ›´å°ï¼Œå¹¶å‘æ€§æ›´é«˜ã€‚</li> <li>è¿›ç¨‹æ˜¯ä¸€ä¸ªå®ä½“ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„èµ„æºï¼›è€ŒåŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„èµ„æºã€‚</li></ul> <h2 id="_2-åˆ›å»ºçº¿ç¨‹"><a href="#_2-åˆ›å»ºçº¿ç¨‹" class="header-anchor">#</a> 2. åˆ›å»ºçº¿ç¨‹</h2> <p>åˆ›å»ºçº¿ç¨‹æœ‰ä¸‰ç§æ–¹å¼ï¼š</p> <ul><li>ç»§æ‰¿ <code>Thread</code> ç±»</li> <li>å®ç° <code>Runnable</code> æ¥å£</li> <li>å®ç° <code>Callable</code> æ¥å£</li></ul> <h3 id="_2-1-thread"><a href="#_2-1-thread" class="header-anchor">#</a> 2.1. Thread</h3> <p>é€šè¿‡ç»§æ‰¿ <code>Thread</code> ç±»åˆ›å»ºçº¿ç¨‹çš„æ­¥éª¤ï¼š</p> <ol><li>å®šä¹‰ <code>Thread</code> ç±»çš„å­ç±»ï¼Œå¹¶è¦†å†™è¯¥ç±»çš„ <code>run</code> æ–¹æ³•ã€‚<code>run</code> æ–¹æ³•çš„æ–¹æ³•ä½“å°±ä»£è¡¨äº†çº¿ç¨‹è¦å®Œæˆçš„ä»»åŠ¡ï¼Œå› æ­¤æŠŠ <code>run</code> æ–¹æ³•ç§°ä¸ºæ‰§è¡Œä½“ã€‚</li> <li>åˆ›å»º <code>Thread</code> å­ç±»çš„å®ä¾‹ï¼Œå³åˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡ã€‚</li> <li>è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ <code>start</code> æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å®ä¾‹åŒ–å¯¹è±¡</span>
        <span class="token class-name">MyThread</span> tA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token string">&quot;Thread çº¿ç¨‹-A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MyThread</span> tB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token string">&quot;Thread çº¿ç¨‹-B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è°ƒç”¨çº¿ç¨‹ä¸»ä½“</span>
        tA<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tB<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token keyword">int</span> ticket <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>

        <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>ticket <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; å–å‡ºäº†ç¬¬ &quot;</span> <span class="token operator">+</span> ticket <span class="token operator">+</span> <span class="token string">&quot; å¼ ç¥¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                ticket<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-2-runnable"><a href="#_2-2-runnable" class="header-anchor">#</a> 2.2. Runnable</h3> <p><strong>å®ç° <code>Runnable</code> æ¥å£ä¼˜äºç»§æ‰¿ <code>Thread</code> ç±»</strong>ï¼Œå› ä¸ºï¼š</p> <ul><li>Java ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œæ‰€æœ‰çš„ç±»éƒ½åªå…è®¸ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œä½†å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚å¦‚æœç»§æ‰¿äº† <code>Thread</code> ç±»å°±æ— æ³•ç»§æ‰¿å…¶å®ƒç±»ï¼Œè¿™ä¸åˆ©äºæ‰©å±•ã€‚</li> <li>ç±»å¯èƒ½åªè¦æ±‚å¯æ‰§è¡Œå°±è¡Œï¼Œç»§æ‰¿æ•´ä¸ª <code>Thread</code> ç±»å¼€é”€è¿‡å¤§ã€‚</li></ul> <p>é€šè¿‡å®ç° <code>Runnable</code> æ¥å£åˆ›å»ºçº¿ç¨‹çš„æ­¥éª¤ï¼š</p> <ol><li>å®šä¹‰ <code>Runnable</code> æ¥å£çš„å®ç°ç±»ï¼Œå¹¶è¦†å†™è¯¥æ¥å£çš„ <code>run</code> æ–¹æ³•ã€‚è¯¥ <code>run</code> æ–¹æ³•çš„æ–¹æ³•ä½“åŒæ ·æ˜¯è¯¥çº¿ç¨‹çš„çº¿ç¨‹æ‰§è¡Œä½“ã€‚</li> <li>åˆ›å»º <code>Runnable</code> å®ç°ç±»çš„å®ä¾‹ï¼Œå¹¶ä»¥æ­¤å®ä¾‹ä½œä¸º <code>Thread</code> çš„ target æ¥åˆ›å»º <code>Thread</code> å¯¹è±¡ï¼Œè¯¥ <code>Thread</code> å¯¹è±¡æ‰æ˜¯çœŸæ­£çš„çº¿ç¨‹å¯¹è±¡ã€‚</li> <li>è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ <code>start</code> æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunnableDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å®ä¾‹åŒ–å¯¹è±¡</span>
        <span class="token class-name">Thread</span> tA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Runnable çº¿ç¨‹-A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> tB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Runnable çº¿ç¨‹-B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è°ƒç”¨çº¿ç¨‹ä¸»ä½“</span>
        tA<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tB<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token keyword">int</span> ticket <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>ticket <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; å–å‡ºäº†ç¬¬ &quot;</span> <span class="token operator">+</span> ticket <span class="token operator">+</span> <span class="token string">&quot; å¼ ç¥¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                ticket<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-3-callableã€futureã€futuretask"><a href="#_2-3-callableã€futureã€futuretask" class="header-anchor">#</a> 2.3. Callableã€Futureã€FutureTask</h3> <p><strong>ç»§æ‰¿ Thread ç±»å’Œå®ç° Runnable æ¥å£è¿™ä¸¤ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼éƒ½æ²¡æœ‰è¿”å›å€¼</strong>ã€‚æ‰€ä»¥ï¼Œçº¿ç¨‹æ‰§è¡Œå®Œåï¼Œæ— æ³•å¾—åˆ°æ‰§è¡Œç»“æœã€‚ä½†å¦‚æœæœŸæœ›å¾—åˆ°æ‰§è¡Œç»“æœè¯¥æ€ä¹ˆåšï¼Ÿ</p> <p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJava 1.5 åï¼Œæä¾›äº† <code>Callable</code> æ¥å£å’Œ <code>Future</code> æ¥å£ï¼Œé€šè¿‡å®ƒä»¬ï¼Œå¯ä»¥åœ¨çº¿ç¨‹æ‰§è¡Œç»“æŸåï¼Œè¿”å›æ‰§è¡Œç»“æœã€‚</p> <h4 id="callable"><a href="#callable" class="header-anchor">#</a> Callable</h4> <p>Callable æ¥å£åªå£°æ˜äº†ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å«åš call()ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * Computes a result, or throws an exception if unable to do so.
     *
     * @return computed result
     * @throws Exception if unable to compute a result
     */</span>
    <span class="token class-name">V</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é‚£ä¹ˆæ€ä¹ˆä½¿ç”¨ Callable å‘¢ï¼Ÿä¸€èˆ¬æƒ…å†µä¸‹æ˜¯é…åˆ ExecutorService æ¥ä½¿ç”¨çš„ï¼Œåœ¨ ExecutorService æ¥å£ä¸­å£°æ˜äº†è‹¥å¹²ä¸ª submit æ–¹æ³•çš„é‡è½½ç‰ˆæœ¬ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> task<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> task<span class="token punctuation">,</span> <span class="token class-name">T</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> task<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ç¬¬ä¸€ä¸ª submit æ–¹æ³•é‡Œé¢çš„å‚æ•°ç±»å‹å°±æ˜¯ Callableã€‚</p> <h4 id="future"><a href="#future" class="header-anchor">#</a> Future</h4> <p>Future å°±æ˜¯å¯¹äºå…·ä½“çš„ Callable ä»»åŠ¡çš„æ‰§è¡Œç»“æœè¿›è¡Œå–æ¶ˆã€æŸ¥è¯¢æ˜¯å¦å®Œæˆã€è·å–ç»“æœã€‚å¿…è¦æ—¶å¯ä»¥é€šè¿‡ get æ–¹æ³•è·å–æ‰§è¡Œç»“æœï¼Œè¯¥æ–¹æ³•ä¼šé˜»å¡ç›´åˆ°ä»»åŠ¡è¿”å›ç»“æœã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> mayInterruptIfRunning<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> <span class="token function">isCancelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> <span class="token function">isDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">V</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">;</span>
    <span class="token class-name">V</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">long</span> timeout<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="futuretask"><a href="#futuretask" class="header-anchor">#</a> FutureTask</h4> <p>FutureTask ç±»å®ç°äº† RunnableFuture æ¥å£ï¼ŒRunnableFuture ç»§æ‰¿äº† Runnable æ¥å£å’Œ Future æ¥å£ã€‚</p> <p>æ‰€ä»¥ï¼ŒFutureTask æ—¢å¯ä»¥ä½œä¸º Runnable è¢«çº¿ç¨‹æ‰§è¡Œï¼Œåˆå¯ä»¥ä½œä¸º Future å¾—åˆ° Callable çš„è¿”å›å€¼ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">RunnableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token keyword">public</span> <span class="token class-name">FutureTask</span><span class="token punctuation">(</span><span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> callable<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">FutureTask</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> runnable<span class="token punctuation">,</span> <span class="token class-name">V</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">RunnableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Runnable</span><span class="token punctuation">,</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>äº‹å®ä¸Šï¼ŒFutureTask æ˜¯ Future æ¥å£çš„ä¸€ä¸ªå”¯ä¸€å®ç°ç±»ã€‚</p> <h4 id="callable-future-futuretask-ç¤ºä¾‹"><a href="#callable-future-futuretask-ç¤ºä¾‹" class="header-anchor">#</a> Callable + Future + FutureTask ç¤ºä¾‹</h4> <p>é€šè¿‡å®ç° <code>Callable</code> æ¥å£åˆ›å»ºçº¿ç¨‹çš„æ­¥éª¤ï¼š</p> <ol><li>åˆ›å»º <code>Callable</code> æ¥å£çš„å®ç°ç±»ï¼Œå¹¶å®ç° <code>call</code> æ–¹æ³•ã€‚è¯¥ <code>call</code> æ–¹æ³•å°†ä½œä¸ºçº¿ç¨‹æ‰§è¡Œä½“ï¼Œå¹¶ä¸”æœ‰è¿”å›å€¼ã€‚</li> <li>åˆ›å»º <code>Callable</code> å®ç°ç±»çš„å®ä¾‹ï¼Œä½¿ç”¨ <code>FutureTask</code> ç±»æ¥åŒ…è£… <code>Callable</code> å¯¹è±¡ï¼Œè¯¥ <code>FutureTask</code> å¯¹è±¡å°è£…äº†è¯¥ <code>Callable</code> å¯¹è±¡çš„ <code>call</code> æ–¹æ³•çš„è¿”å›å€¼ã€‚</li> <li>ä½¿ç”¨ <code>FutureTask</code> å¯¹è±¡ä½œä¸º <code>Thread</code> å¯¹è±¡çš„ target åˆ›å»ºå¹¶å¯åŠ¨æ–°çº¿ç¨‹ã€‚</li> <li>è°ƒç”¨ <code>FutureTask</code> å¯¹è±¡çš„ <code>get</code> æ–¹æ³•æ¥è·å¾—çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„è¿”å›å€¼ã€‚</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CallableDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> callable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>callable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>future<span class="token punctuation">,</span> <span class="token string">&quot;Callable çº¿ç¨‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä»»åŠ¡è€—æ—¶ï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000000</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;æ¯«ç§’&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> <span class="token operator">|</span> <span class="token class-name">ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token keyword">int</span> ticket <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">long</span> begin <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>ticket <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; å–å‡ºäº†ç¬¬ &quot;</span> <span class="token operator">+</span> ticket <span class="token operator">+</span> <span class="token string">&quot; å¼ ç¥¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                ticket<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> begin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-çº¿ç¨‹åŸºæœ¬ç”¨æ³•"><a href="#_3-çº¿ç¨‹åŸºæœ¬ç”¨æ³•" class="header-anchor">#</a> 3. çº¿ç¨‹åŸºæœ¬ç”¨æ³•</h2> <p>çº¿ç¨‹ï¼ˆ<code>Thread</code>ï¼‰åŸºæœ¬æ–¹æ³•æ¸…å•ï¼š</p> <table><thead><tr><th>æ–¹æ³•</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>run</code></td> <td>çº¿ç¨‹çš„æ‰§è¡Œå®ä½“ã€‚</td></tr> <tr><td><code>start</code></td> <td>çº¿ç¨‹çš„å¯åŠ¨æ–¹æ³•ã€‚</td></tr> <tr><td><code>currentThread</code></td> <td>è¿”å›å¯¹å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨ã€‚</td></tr> <tr><td><code>setName</code></td> <td>è®¾ç½®çº¿ç¨‹åç§°ã€‚</td></tr> <tr><td><code>getName</code></td> <td>è·å–çº¿ç¨‹åç§°ã€‚</td></tr> <tr><td><code>setPriority</code></td> <td>è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§ã€‚Java ä¸­çš„çº¿ç¨‹ä¼˜å…ˆçº§çš„èŒƒå›´æ˜¯ [1,10]ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹åœ¨è¿è¡Œæ—¶ä¼šå…·æœ‰ä¼˜å…ˆæƒã€‚å¯ä»¥é€šè¿‡ <code>thread.setPriority(Thread.MAX_PRIORITY)</code> çš„æ–¹å¼è®¾ç½®ï¼Œé»˜è®¤ä¼˜å…ˆçº§ä¸º 5ã€‚</td></tr> <tr><td><code>getPriority</code></td> <td>è·å–çº¿ç¨‹ä¼˜å…ˆçº§ã€‚</td></tr> <tr><td><code>setDaemon</code></td> <td>è®¾ç½®çº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚</td></tr> <tr><td><code>isDaemon</code></td> <td>åˆ¤æ–­çº¿ç¨‹æ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚</td></tr> <tr><td><code>isAlive</code></td> <td>åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å¯åŠ¨ã€‚</td></tr> <tr><td><code>interrupt</code></td> <td>ä¸­æ–­å¦ä¸€ä¸ªçº¿ç¨‹çš„è¿è¡ŒçŠ¶æ€ã€‚</td></tr> <tr><td><code>interrupted</code></td> <td>æµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦å·²è¢«ä¸­æ–­ã€‚é€šè¿‡æ­¤æ–¹æ³•å¯ä»¥æ¸…é™¤çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœè¦è¿ç»­è°ƒç”¨æ­¤æ–¹æ³•ä¸¤æ¬¡ï¼Œåˆ™ç¬¬äºŒæ¬¡è°ƒç”¨å°†è¿”å› falseï¼ˆé™¤éå½“å‰çº¿ç¨‹åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ¸…é™¤å…¶ä¸­æ–­çŠ¶æ€ä¹‹åä¸”åœ¨ç¬¬äºŒæ¬¡è°ƒç”¨æ£€æŸ¥å…¶çŠ¶æ€ä¹‹å‰å†æ¬¡ä¸­æ–­ï¼‰ã€‚</td></tr> <tr><td><code>join</code></td> <td>å¯ä»¥ä½¿ä¸€ä¸ªçº¿ç¨‹å¼ºåˆ¶è¿è¡Œï¼Œçº¿ç¨‹å¼ºåˆ¶è¿è¡ŒæœŸé—´ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•è¿è¡Œï¼Œå¿…é¡»ç­‰å¾…æ­¤çº¿ç¨‹å®Œæˆä¹‹åæ‰å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚</td></tr> <tr><td><code>Thread.sleep</code></td> <td>é™æ€æ–¹æ³•ã€‚å°†å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ ã€‚</td></tr> <tr><td><code>Thread.yield</code></td> <td>é™æ€æ–¹æ³•ã€‚å°†å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹æš‚åœï¼Œè®©å…¶ä»–çº¿ç¨‹æ‰§è¡Œã€‚</td></tr></tbody></table> <h3 id="_3-1-çº¿ç¨‹ä¼‘çœ "><a href="#_3-1-çº¿ç¨‹ä¼‘çœ " class="header-anchor">#</a> 3.1. çº¿ç¨‹ä¼‘çœ </h3> <p><strong>ä½¿ç”¨ <code>Thread.sleep</code> æ–¹æ³•å¯ä»¥ä½¿å¾—å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹è¿›å…¥ä¼‘çœ çŠ¶æ€ã€‚</strong></p> <p>ä½¿ç”¨ <code>Thread.sleep</code> éœ€è¦å‘å…¶ä¼ å…¥ä¸€ä¸ªæ•´æ•°å€¼ï¼Œè¿™ä¸ªå€¼è¡¨ç¤ºçº¿ç¨‹å°†è¦ä¼‘çœ çš„æ¯«ç§’æ•°ã€‚</p> <p><code>Thread.sleep</code> æ–¹æ³•å¯èƒ½ä¼šæŠ›å‡º <code>InterruptedException</code>ï¼Œå› ä¸ºå¼‚å¸¸ä¸èƒ½è·¨çº¿ç¨‹ä¼ æ’­å› <code>main</code> ä¸­ï¼Œå› æ­¤å¿…é¡»åœ¨æœ¬åœ°è¿›è¡Œå¤„ç†ã€‚çº¿ç¨‹ä¸­æŠ›å‡ºçš„å…¶å®ƒå¼‚å¸¸ä¹ŸåŒæ ·éœ€è¦åœ¨æœ¬åœ°è¿›è¡Œå¤„ç†ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadSleepDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token string">&quot;çº¿ç¨‹A&quot;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token string">&quot;çº¿ç¨‹B&quot;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token string">&quot;çº¿ç¨‹C&quot;</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

        <span class="token comment">/** çº¿ç¨‹åç§° */</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

        <span class="token comment">/** ä¼‘çœ æ—¶é—´ */</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> time<span class="token punctuation">;</span>

        <span class="token keyword">private</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">=</span> time<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// ä¼‘çœ æŒ‡å®šçš„æ—¶é—´</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;ä¼‘çœ &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">+</span> <span class="token string">&quot;æ¯«ç§’ã€‚&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-2-çº¿ç¨‹ç¤¼è®©"><a href="#_3-2-çº¿ç¨‹ç¤¼è®©" class="header-anchor">#</a> 3.2. çº¿ç¨‹ç¤¼è®©</h3> <p><code>Thread.yield</code> æ–¹æ³•çš„è°ƒç”¨å£°æ˜äº†å½“å‰çº¿ç¨‹å·²ç»å®Œæˆäº†ç”Ÿå‘½å‘¨æœŸä¸­æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œå¯ä»¥åˆ‡æ¢ç»™å…¶å®ƒçº¿ç¨‹æ¥æ‰§è¡Œ ã€‚</p> <p>è¯¥æ–¹æ³•åªæ˜¯å¯¹çº¿ç¨‹è°ƒåº¦å™¨çš„ä¸€ä¸ªå»ºè®®ï¼Œè€Œä¸”ä¹Ÿåªæ˜¯å»ºè®®å…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„å…¶å®ƒçº¿ç¨‹å¯ä»¥è¿è¡Œã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadYieldDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">MyThread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token string">&quot;çº¿ç¨‹A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token string">&quot;çº¿ç¨‹B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;è¿è¡Œï¼Œi = &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;çº¿ç¨‹ç¤¼è®©ï¼š&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-3-ç»ˆæ­¢çº¿ç¨‹"><a href="#_3-3-ç»ˆæ­¢çº¿ç¨‹" class="header-anchor">#</a> 3.3. ç»ˆæ­¢çº¿ç¨‹</h3> <blockquote><p><strong><code>Thread</code> ä¸­çš„ <code>stop</code> æ–¹æ³•æœ‰ç¼ºé™·ï¼Œå·²åºŸå¼ƒ</strong>ã€‚</p> <p>ä½¿ç”¨ <code>Thread.stop</code> åœæ­¢çº¿ç¨‹ä¼šå¯¼è‡´å®ƒè§£é”æ‰€æœ‰å·²é”å®šçš„ç›‘è§†å™¨ï¼ˆç”±äºæœªç»æ£€æŸ¥çš„ <code>ThreadDeath</code> å¼‚å¸¸ä¼šåœ¨å †æ ˆä¸­ä¼ æ’­ï¼Œè¿™æ˜¯è‡ªç„¶çš„ç»“æœï¼‰ã€‚ å¦‚æœå…ˆå‰ç”±è¿™äº›ç›‘è§†å™¨ä¿æŠ¤çš„ä»»ä½•å¯¹è±¡å¤„äºä¸ä¸€è‡´çŠ¶æ€ï¼Œåˆ™æŸåçš„å¯¹è±¡å°†å¯¹å…¶ä»–çº¿ç¨‹å¯è§ï¼Œä»è€Œå¯èƒ½å¯¼è‡´ä»»æ„è¡Œä¸ºã€‚</p> <p>stop() æ–¹æ³•ä¼šçœŸçš„æ€æ­»çº¿ç¨‹ï¼Œä¸ç»™çº¿ç¨‹å–˜æ¯çš„æœºä¼šï¼Œå¦‚æœçº¿ç¨‹æŒæœ‰ ReentrantLock é”ï¼Œè¢« stop() çš„çº¿ç¨‹å¹¶ä¸ä¼šè‡ªåŠ¨è°ƒç”¨ ReentrantLock çš„ unlock() å»é‡Šæ”¾é”ï¼Œé‚£å…¶ä»–çº¿ç¨‹å°±å†ä¹Ÿæ²¡æœºä¼šè·å¾— ReentrantLock é”ï¼Œè¿™å®åœ¨æ˜¯å¤ªå±é™©äº†ã€‚æ‰€ä»¥è¯¥æ–¹æ³•å°±ä¸å»ºè®®ä½¿ç”¨äº†ï¼Œç±»ä¼¼çš„æ–¹æ³•è¿˜æœ‰ suspend() å’Œ resume() æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•åŒæ ·ä¹Ÿéƒ½ä¸å»ºè®®ä½¿ç”¨äº†ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿå°±ä¸å¤šä»‹ç»äº†ã€‚<code>Thread.stop</code> çš„è®¸å¤šç”¨æ³•åº”ç”±ä»…ä¿®æ”¹æŸäº›å˜é‡ä»¥æŒ‡ç¤ºç›®æ ‡çº¿ç¨‹åº”åœæ­¢è¿è¡Œçš„ä»£ç ä»£æ›¿ã€‚ ç›®æ ‡çº¿ç¨‹åº”å®šæœŸæ£€æŸ¥æ­¤å˜é‡ï¼Œå¦‚æœè¯¥å˜é‡æŒ‡ç¤ºè¦åœæ­¢è¿è¡Œï¼Œåˆ™åº”æŒ‰æœ‰åºæ–¹å¼ä»å…¶è¿è¡Œæ–¹æ³•è¿”å›ã€‚å¦‚æœç›®æ ‡çº¿ç¨‹ç­‰å¾…å¾ˆé•¿æ—¶é—´ï¼ˆä¾‹å¦‚ï¼Œåœ¨æ¡ä»¶å˜é‡ä¸Šï¼‰ï¼Œåˆ™åº”ä½¿ç”¨ä¸­æ–­æ–¹æ³•æ¥ä¸­æ–­ç­‰å¾…ã€‚</p></blockquote> <p>å½“ä¸€ä¸ªçº¿ç¨‹è¿è¡Œæ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯ä»¥ç›´æ¥é€šè¿‡ <code>interrupt</code> æ–¹æ³•ä¸­æ–­å…¶è¿è¡ŒçŠ¶æ€ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">MyThread</span> mt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®ä¾‹åŒ–Runnableå­ç±»å¯¹è±¡</span>
        <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>mt<span class="token punctuation">,</span> <span class="token string">&quot;çº¿ç¨‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®ä¾‹åŒ–Threadå¯¹è±¡</span>
        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯åŠ¨çº¿ç¨‹</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// çº¿ç¨‹ä¼‘çœ 2ç§’</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;3ã€ä¼‘çœ è¢«ç»ˆæ­¢&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        t<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸­æ–­çº¿ç¨‹æ‰§è¡Œ</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;1ã€è¿›å…¥run()æ–¹æ³•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// çº¿ç¨‹ä¼‘çœ 10ç§’</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;2ã€å·²ç»å®Œæˆäº†ä¼‘çœ &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;3ã€ä¼‘çœ è¢«ç»ˆæ­¢&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›è°ƒç”¨å¤„</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;4ã€run()æ–¹æ³•æ­£å¸¸ç»“æŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœä¸€ä¸ªçº¿ç¨‹çš„ <code>run</code> æ–¹æ³•æ‰§è¡Œä¸€ä¸ªæ— é™å¾ªç¯ï¼Œå¹¶ä¸”æ²¡æœ‰æ‰§è¡Œ <code>sleep</code> ç­‰ä¼šæŠ›å‡º <code>InterruptedException</code> çš„æ“ä½œï¼Œé‚£ä¹ˆè°ƒç”¨çº¿ç¨‹çš„ <code>interrupt</code> æ–¹æ³•å°±æ— æ³•ä½¿çº¿ç¨‹æå‰ç»“æŸã€‚</p> <p>ä½†æ˜¯è°ƒç”¨ <code>interrupt</code> æ–¹æ³•ä¼šè®¾ç½®çº¿ç¨‹çš„ä¸­æ–­æ ‡è®°ï¼Œæ­¤æ—¶è°ƒç”¨ <code>interrupted</code> æ–¹æ³•ä¼šè¿”å› <code>true</code>ã€‚å› æ­¤å¯ä»¥åœ¨å¾ªç¯ä½“ä¸­ä½¿ç”¨ <code>interrupted</code> æ–¹æ³•æ¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å¤„äºä¸­æ–­çŠ¶æ€ï¼Œä»è€Œæå‰ç»“æŸçº¿ç¨‹ã€‚</p> <p>å®‰å…¨åœ°ç»ˆæ­¢çº¿ç¨‹æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p> <ul><li>å®šä¹‰ <code>volatile</code> æ ‡å¿—ä½ï¼Œåœ¨ <code>run</code> æ–¹æ³•ä¸­ä½¿ç”¨æ ‡å¿—ä½æ§åˆ¶çº¿ç¨‹ç»ˆæ­¢</li> <li>ä½¿ç”¨ <code>interrupt</code> æ–¹æ³•å’Œ <code>Thread.interrupted</code> æ–¹æ³•é…åˆä½¿ç”¨æ¥æ§åˆ¶çº¿ç¨‹ç»ˆæ­¢</li></ul> <p>ã€ç¤ºä¾‹ã€‘ä½¿ç”¨ <code>volatile</code> æ ‡å¿—ä½æ§åˆ¶çº¿ç¨‹ç»ˆæ­¢</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadStopDemo2</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">MyTask</span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>task<span class="token punctuation">,</span> <span class="token string">&quot;MyTask&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        task<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyTask</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">long</span> count <span class="token operator">=</span> <span class="token number">0L</span><span class="token punctuation">;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; çº¿ç¨‹å¯åŠ¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; çº¿ç¨‹ç»ˆæ­¢&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/**
         * é€šè¿‡ volatile æ ‡å¿—ä½æ¥æ§åˆ¶çº¿ç¨‹ç»ˆæ­¢
         */</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>ã€ç¤ºä¾‹ã€‘ä½¿ç”¨ <code>interrupt</code> æ–¹æ³•å’Œ <code>Thread.interrupted</code> æ–¹æ³•é…åˆä½¿ç”¨æ¥æ§åˆ¶çº¿ç¨‹ç»ˆæ­¢</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadStopDemo3</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">MyTask</span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>task<span class="token punctuation">,</span> <span class="token string">&quot;MyTask&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyTask</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">long</span> count <span class="token operator">=</span> <span class="token number">0L</span><span class="token punctuation">;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; çº¿ç¨‹å¯åŠ¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// é€šè¿‡ Thread.interrupted å’Œ interrupt é…åˆæ¥æ§åˆ¶çº¿ç¨‹ç»ˆæ­¢</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; çº¿ç¨‹ç»ˆæ­¢&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-4-å®ˆæŠ¤çº¿ç¨‹"><a href="#_3-4-å®ˆæŠ¤çº¿ç¨‹" class="header-anchor">#</a> 3.4. å®ˆæŠ¤çº¿ç¨‹</h3> <p>ä»€ä¹ˆæ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Ÿ</p> <ul><li><strong>å®ˆæŠ¤çº¿ç¨‹ï¼ˆDaemon Threadï¼‰æ˜¯åœ¨åå°æ‰§è¡Œå¹¶ä¸”ä¸ä¼šé˜»æ­¢ JVM ç»ˆæ­¢çš„çº¿ç¨‹</strong>ã€‚<strong>å½“æ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹ç»“æŸæ—¶ï¼Œç¨‹åºä¹Ÿå°±ç»ˆæ­¢ï¼ŒåŒæ—¶ä¼šæ€æ­»æ‰€æœ‰å®ˆæŠ¤çº¿ç¨‹</strong>ã€‚</li> <li>ä¸å®ˆæŠ¤çº¿ç¨‹ï¼ˆDaemon Threadï¼‰ç›¸åçš„ï¼Œå«ç”¨æˆ·çº¿ç¨‹ï¼ˆUser Threadï¼‰ï¼Œä¹Ÿå°±æ˜¯éå®ˆæŠ¤çº¿ç¨‹ã€‚</li></ul> <p>ä¸ºä»€ä¹ˆéœ€è¦å®ˆæŠ¤çº¿ç¨‹ï¼Ÿ</p> <ul><li>å®ˆæŠ¤çº¿ç¨‹çš„ä¼˜å…ˆçº§æ¯”è¾ƒä½ï¼Œç”¨äºä¸ºç³»ç»Ÿä¸­çš„å…¶å®ƒå¯¹è±¡å’Œçº¿ç¨‹æä¾›æœåŠ¡ã€‚å…¸å‹çš„åº”ç”¨å°±æ˜¯åƒåœ¾å›æ”¶å™¨ã€‚</li></ul> <p>å¦‚ä½•ä½¿ç”¨å®ˆæŠ¤çº¿ç¨‹ï¼Ÿ</p> <ul><li>å¯ä»¥ä½¿ç”¨ <code>isDaemon</code> æ–¹æ³•åˆ¤æ–­çº¿ç¨‹æ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚</li> <li>å¯ä»¥ä½¿ç”¨ <code>setDaemon</code> æ–¹æ³•è®¾ç½®çº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚
<ul><li>æ­£åœ¨è¿è¡Œçš„ç”¨æˆ·çº¿ç¨‹æ— æ³•è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œæ‰€ä»¥ <code>setDaemon</code> å¿…é¡»åœ¨ <code>thread.start</code> æ–¹æ³•ä¹‹å‰è®¾ç½®ï¼Œå¦åˆ™ä¼šæŠ›å‡º <code>llegalThreadStateException</code> å¼‚å¸¸ï¼›</li> <li>ä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹åˆ›å»ºçš„å­çº¿ç¨‹ä¾ç„¶æ˜¯å®ˆæŠ¤çº¿ç¨‹ã€‚</li> <li>ä¸è¦è®¤ä¸ºæ‰€æœ‰çš„åº”ç”¨éƒ½å¯ä»¥åˆ†é…ç»™å®ˆæŠ¤çº¿ç¨‹æ¥è¿›è¡ŒæœåŠ¡ï¼Œæ¯”å¦‚è¯»å†™æ“ä½œæˆ–è€…è®¡ç®—é€»è¾‘ã€‚</li></ul></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadDaemonDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;çº¿ç¨‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ­¤çº¿ç¨‹åœ¨åå°è¿è¡Œ</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;çº¿ç¨‹ t æ˜¯å¦æ˜¯å®ˆæŠ¤è¿›ç¨‹ï¼š&quot;</span> <span class="token operator">+</span> t<span class="token punctuation">.</span><span class="token function">isDaemon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯åŠ¨çº¿ç¨‹</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;åœ¨è¿è¡Œã€‚&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>å‚è€ƒé˜…è¯»ï¼š<a href="https://blog.csdn.net/shimiso/article/details/8964414" target="_blank" rel="noopener noreferrer">Java ä¸­å®ˆæŠ¤çº¿ç¨‹çš„æ€»ç»“<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="_4-çº¿ç¨‹é€šä¿¡"><a href="#_4-çº¿ç¨‹é€šä¿¡" class="header-anchor">#</a> 4. çº¿ç¨‹é€šä¿¡</h2> <blockquote><p>å½“å¤šä¸ªçº¿ç¨‹å¯ä»¥ä¸€èµ·å·¥ä½œå»è§£å†³æŸä¸ªé—®é¢˜æ—¶ï¼Œå¦‚æœæŸäº›éƒ¨åˆ†å¿…é¡»åœ¨å…¶å®ƒéƒ¨åˆ†ä¹‹å‰å®Œæˆï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¹çº¿ç¨‹è¿›è¡Œåè°ƒã€‚</p></blockquote> <h3 id="_4-1-wait-notify-notifyall"><a href="#_4-1-wait-notify-notifyall" class="header-anchor">#</a> 4.1. wait/notify/notifyAll</h3> <ul><li><code>wait</code> - <code>wait</code> ä¼šè‡ªåŠ¨é‡Šæ”¾å½“å‰çº¿ç¨‹å æœ‰çš„å¯¹è±¡é”ï¼Œå¹¶è¯·æ±‚æ“ä½œç³»ç»ŸæŒ‚èµ·å½“å‰çº¿ç¨‹ï¼Œ<strong>è®©çº¿ç¨‹ä» <code>Running</code> çŠ¶æ€è½¬å…¥ <code>Waiting</code> çŠ¶æ€</strong>ï¼Œç­‰å¾… <code>notify</code> / <code>notifyAll</code> æ¥å”¤é†’ã€‚å¦‚æœæ²¡æœ‰é‡Šæ”¾é”ï¼Œé‚£ä¹ˆå…¶å®ƒçº¿ç¨‹å°±æ— æ³•è¿›å…¥å¯¹è±¡çš„åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥æ§åˆ¶å—ä¸­ï¼Œé‚£ä¹ˆå°±æ— æ³•æ‰§è¡Œ <code>notify</code> æˆ–è€… <code>notifyAll</code> æ¥å”¤é†’æŒ‚èµ·çš„çº¿ç¨‹ï¼Œé€ æˆæ­»é”ã€‚</li> <li><code>notify</code> - å”¤é†’ä¸€ä¸ªæ­£åœ¨ <code>Waiting</code> çŠ¶æ€çš„çº¿ç¨‹ï¼Œå¹¶è®©å®ƒæ‹¿åˆ°å¯¹è±¡é”ï¼Œå…·ä½“å”¤é†’å“ªä¸€ä¸ªçº¿ç¨‹ç”± JVM æ§åˆ¶ ã€‚</li> <li><code>notifyAll</code> - å”¤é†’æ‰€æœ‰æ­£åœ¨ <code>Waiting</code> çŠ¶æ€çš„çº¿ç¨‹ï¼Œæ¥ä¸‹æ¥å®ƒä»¬éœ€è¦ç«äº‰å¯¹è±¡é”ã€‚</li></ul> <blockquote><p>æ³¨æ„ï¼š</p> <ul><li><strong><code>wait</code>ã€<code>notify</code>ã€<code>notifyAll</code> éƒ½æ˜¯ <code>Object</code> ç±»ä¸­çš„æ–¹æ³•</strong>ï¼Œè€Œé <code>Thread</code>ã€‚</li> <li><strong><code>wait</code>ã€<code>notify</code>ã€<code>notifyAll</code> åªèƒ½ç”¨åœ¨ <code>synchronized</code> æ–¹æ³•æˆ–è€… <code>synchronized</code> ä»£ç å—ä¸­ä½¿ç”¨ï¼Œå¦åˆ™ä¼šåœ¨è¿è¡Œæ—¶æŠ›å‡º <code>IllegalMonitorStateException</code></strong>ã€‚</li></ul> <p>ä¸ºä»€ä¹ˆ <code>wait</code>ã€<code>notify</code>ã€<code>notifyAll</code> ä¸å®šä¹‰åœ¨ <code>Thread</code> ä¸­ï¼Ÿä¸ºä»€ä¹ˆ <code>wait</code>ã€<code>notify</code>ã€<code>notifyAll</code> è¦é…åˆ <code>synchronized</code> ä½¿ç”¨ï¼Ÿ</p> <p>é¦–å…ˆï¼Œéœ€è¦äº†è§£å‡ ä¸ªåŸºæœ¬çŸ¥è¯†ç‚¹ï¼š</p> <ul><li>æ¯ä¸€ä¸ª Java å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ <strong>ç›‘è§†å™¨ï¼ˆmonitorï¼‰</strong></li> <li>æ¯ä¸€ä¸ªç›‘è§†å™¨é‡Œé¢éƒ½æœ‰ä¸€ä¸ª <strong>å¯¹è±¡é”</strong> ã€ä¸€ä¸ª <strong>ç­‰å¾…é˜Ÿåˆ—</strong>ã€ä¸€ä¸ª <strong>åŒæ­¥é˜Ÿåˆ—</strong></li></ul> <p>äº†è§£äº†ä»¥ä¸Šæ¦‚å¿µï¼Œæˆ‘ä»¬å›è¿‡å¤´æ¥ç†è§£å‰é¢ä¸¤ä¸ªé—®é¢˜ã€‚</p> <p>ä¸ºä»€ä¹ˆè¿™å‡ ä¸ªæ–¹æ³•ä¸å®šä¹‰åœ¨ <code>Thread</code> ä¸­ï¼Ÿ</p> <p>ç”±äºæ¯ä¸ªå¯¹è±¡éƒ½æ‹¥æœ‰å¯¹è±¡é”ï¼Œè®©å½“å‰çº¿ç¨‹ç­‰å¾…æŸä¸ªå¯¹è±¡é”ï¼Œè‡ªç„¶åº”è¯¥åŸºäºè¿™ä¸ªå¯¹è±¡ï¼ˆ<code>Object</code>ï¼‰æ¥æ“ä½œï¼Œè€Œéä½¿ç”¨å½“å‰çº¿ç¨‹ï¼ˆ<code>Thread</code>ï¼‰æ¥æ“ä½œã€‚å› ä¸ºå½“å‰çº¿ç¨‹å¯èƒ½ä¼šç­‰å¾…å¤šä¸ªçº¿ç¨‹çš„é”ï¼Œå¦‚æœåŸºäºçº¿ç¨‹ï¼ˆ<code>Thread</code>ï¼‰æ¥æ“ä½œï¼Œå°±éå¸¸å¤æ‚äº†ã€‚</p> <p>ä¸ºä»€ä¹ˆ <code>wait</code>ã€<code>notify</code>ã€<code>notifyAll</code> è¦é…åˆ <code>synchronized</code> ä½¿ç”¨ï¼Ÿ</p> <p>å¦‚æœè°ƒç”¨æŸä¸ªå¯¹è±¡çš„ <code>wait</code> æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹å¿…é¡»æ‹¥æœ‰è¿™ä¸ªå¯¹è±¡çš„å¯¹è±¡é”ï¼Œå› æ­¤è°ƒç”¨ <code>wait</code> æ–¹æ³•å¿…é¡»åœ¨ <code>synchronized</code> æ–¹æ³•å’Œ <code>synchronized</code> ä»£ç å—ä¸­ã€‚</p></blockquote> <p>ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…æ¨¡å¼æ˜¯ <code>wait</code>ã€<code>notify</code>ã€<code>notifyAll</code> çš„ä¸€ä¸ªç»å…¸ä½¿ç”¨æ¡ˆä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadWaitNotifyDemo02</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> QUEUE_SIZE <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>QUEUE_SIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Producer</span><span class="token punctuation">(</span><span class="token string">&quot;ç”Ÿäº§è€…A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Producer</span><span class="token punctuation">(</span><span class="token string">&quot;ç”Ÿäº§è€…B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆè´¹è€…A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆè´¹è€…B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Consumer</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

        <span class="token class-name">Consumer</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>queue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">try</span> <span class="token punctuation">{</span>
                            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;é˜Ÿåˆ—ç©ºï¼Œç­‰å¾…æ•°æ®&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            queue<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            queue<span class="token punctuation">.</span><span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¯æ¬¡ç§»èµ°é˜Ÿé¦–å…ƒç´ </span>
                    queue<span class="token punctuation">.</span><span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; ä»é˜Ÿåˆ—å–èµ°ä¸€ä¸ªå…ƒç´ ï¼Œé˜Ÿåˆ—å½“å‰æœ‰ï¼š&quot;</span> <span class="token operator">+</span> queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ä¸ªå…ƒç´ &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Producer</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

        <span class="token class-name">Producer</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>queue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> QUEUE_SIZE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">try</span> <span class="token punctuation">{</span>
                            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;é˜Ÿåˆ—æ»¡ï¼Œç­‰å¾…æœ‰ç©ºä½™ç©ºé—´&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            queue<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            queue<span class="token punctuation">.</span><span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¯æ¬¡æ’å…¥ä¸€ä¸ªå…ƒç´ </span>
                    queue<span class="token punctuation">.</span><span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; å‘é˜Ÿåˆ—å–ä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œé˜Ÿåˆ—å½“å‰æœ‰ï¼š&quot;</span> <span class="token operator">+</span> queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ä¸ªå…ƒç´ &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-2-join"><a href="#_4-2-join" class="header-anchor">#</a> 4.2. join</h3> <p>åœ¨çº¿ç¨‹æ“ä½œä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>join</code> æ–¹æ³•è®©ä¸€ä¸ªçº¿ç¨‹å¼ºåˆ¶è¿è¡Œï¼Œçº¿ç¨‹å¼ºåˆ¶è¿è¡ŒæœŸé—´ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•è¿è¡Œï¼Œå¿…é¡»ç­‰å¾…æ­¤çº¿ç¨‹å®Œæˆä¹‹åæ‰å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadJoinDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">MyThread</span> mt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®ä¾‹åŒ–Runnableå­ç±»å¯¹è±¡</span>
        <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>mt<span class="token punctuation">,</span> <span class="token string">&quot;mythread&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®ä¾‹åŒ–Threadå¯¹è±¡</span>
        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯åŠ¨çº¿ç¨‹</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// çº¿ç¨‹å¼ºåˆ¶è¿è¡Œ</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Main çº¿ç¨‹è¿è¡Œ --&gt; &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; è¿è¡Œï¼Œi = &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–å¾—å½“å‰çº¿ç¨‹çš„åå­—</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-3-ç®¡é“"><a href="#_4-3-ç®¡é“" class="header-anchor">#</a> 4.3. ç®¡é“</h3> <p>ç®¡é“è¾“å…¥/è¾“å‡ºæµå’Œæ™®é€šçš„æ–‡ä»¶è¾“å…¥/è¾“å‡ºæµæˆ–è€…ç½‘ç»œè¾“å…¥/è¾“å‡ºæµä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä¸»è¦ç”¨äºçº¿ç¨‹ä¹‹é—´çš„æ•°æ®ä¼ è¾“ï¼Œè€Œä¼ è¾“çš„åª’ä»‹ä¸ºå†…å­˜ã€‚
ç®¡é“è¾“å…¥/è¾“å‡ºæµä¸»è¦åŒ…æ‹¬äº†å¦‚ä¸‹ 4 ç§å…·ä½“å®ç°ï¼š<code>PipedOutputStream</code>ã€<code>PipedInputStream</code>ã€<code>PipedReader</code> å’Œ <code>PipedWriter</code>ï¼Œå‰ä¸¤ç§é¢å‘å­—èŠ‚ï¼Œè€Œåä¸¤ç§é¢å‘å­—ç¬¦ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Piped</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">PipedWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PipedWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">PipedReader</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PipedReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å°†è¾“å‡ºæµå’Œè¾“å…¥æµè¿›è¡Œè¿æ¥ï¼Œå¦åˆ™åœ¨ä½¿ç”¨æ—¶ä¼šæŠ›å‡ºIOException</span>
        out<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> printThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Print</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;PrintThread&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        printThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> receive <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>receive <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>receive<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Print</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token class-name">PipedReader</span> in<span class="token punctuation">;</span>

        <span class="token class-name">Print</span><span class="token punctuation">(</span><span class="token class-name">PipedReader</span> in<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>in <span class="token operator">=</span> in<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> receive <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>receive <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> receive<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_5-çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ"><a href="#_5-çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> 5. çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ</h2> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20210102103928.png" alt=""></p> <p><code>java.lang.Thread.State</code> ä¸­å®šä¹‰äº† <strong>6</strong> ç§ä¸åŒçš„çº¿ç¨‹çŠ¶æ€ï¼Œåœ¨ç»™å®šçš„ä¸€ä¸ªæ—¶åˆ»ï¼Œçº¿ç¨‹åªèƒ½å¤„äºå…¶ä¸­çš„ä¸€ä¸ªçŠ¶æ€ã€‚</p> <p>ä»¥ä¸‹æ˜¯å„çŠ¶æ€çš„è¯´æ˜ï¼Œä»¥åŠçŠ¶æ€é—´çš„è”ç³»ï¼š</p> <ul><li><p><strong>æ–°å»ºï¼ˆNewï¼‰</strong> - å°šæœªè°ƒç”¨ <code>start</code> æ–¹æ³•çš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚æ­¤çŠ¶æ€æ„å‘³ç€ï¼š<strong>åˆ›å»ºçš„çº¿ç¨‹å°šæœªå¯åŠ¨</strong>ã€‚</p></li> <li><p><strong>å°±ç»ªï¼ˆRunnableï¼‰</strong> - å·²ç»è°ƒç”¨äº† <code>start</code> æ–¹æ³•çš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚æ­¤çŠ¶æ€æ„å‘³ç€ï¼š<strong>çº¿ç¨‹å·²ç»åœ¨ JVM ä¸­è¿è¡Œ</strong>ã€‚ä½†æ˜¯åœ¨æ“ä½œç³»ç»Ÿå±‚é¢ï¼Œå®ƒå¯èƒ½å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œä¹Ÿå¯èƒ½ç­‰å¾…èµ„æºè°ƒåº¦ï¼ˆä¾‹å¦‚å¤„ç†å™¨èµ„æºï¼‰ï¼Œèµ„æºè°ƒåº¦å®Œæˆå°±è¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚æ‰€ä»¥è¯¥çŠ¶æ€çš„å¯è¿è¡Œæ˜¯æŒ‡å¯ä»¥è¢«è¿è¡Œï¼Œå…·ä½“æœ‰æ²¡æœ‰è¿è¡Œè¦çœ‹åº•å±‚æ“ä½œç³»ç»Ÿçš„èµ„æºè°ƒåº¦ã€‚</p></li> <li><p><strong>é˜»å¡ï¼ˆBlockedï¼‰</strong> - æ­¤çŠ¶æ€æ„å‘³ç€ï¼š<strong>çº¿ç¨‹å¤„äºè¢«é˜»å¡çŠ¶æ€</strong>ã€‚è¡¨ç¤ºçº¿ç¨‹åœ¨ç­‰å¾… <code>synchronized</code> çš„éšå¼é”ï¼ˆMonitor lockï¼‰ã€‚<code>synchronized</code> ä¿®é¥°çš„æ–¹æ³•ã€ä»£ç å—åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½ç­‰å¾…ï¼Œå³å¤„äºé˜»å¡çŠ¶æ€ã€‚å½“å ç”¨ <code>synchronized</code> éšå¼é”çš„çº¿ç¨‹é‡Šæ”¾é”ï¼Œå¹¶ä¸”ç­‰å¾…çš„çº¿ç¨‹è·å¾— <code>synchronized</code> éšå¼é”æ—¶ï¼Œå°±åˆä¼šä» <code>BLOCKED</code> è½¬æ¢åˆ° <code>RUNNABLE</code> çŠ¶æ€ã€‚</p></li> <li><p><strong>ç­‰å¾…ï¼ˆWaitingï¼‰</strong> - æ­¤çŠ¶æ€æ„å‘³ç€ï¼š<strong>çº¿ç¨‹æ— é™æœŸç­‰å¾…ï¼Œç›´åˆ°è¢«å…¶ä»–çº¿ç¨‹æ˜¾å¼åœ°å”¤é†’</strong>ã€‚ é˜»å¡å’Œç­‰å¾…çš„åŒºåˆ«åœ¨äºï¼Œé˜»å¡æ˜¯è¢«åŠ¨çš„ï¼Œå®ƒæ˜¯åœ¨ç­‰å¾…è·å– <code>synchronized</code> çš„éšå¼é”ã€‚è€Œç­‰å¾…æ˜¯ä¸»åŠ¨çš„ï¼Œé€šè¿‡è°ƒç”¨ <code>Object.wait</code> ç­‰æ–¹æ³•è¿›å…¥ã€‚</p> <table><thead><tr><th>è¿›å…¥æ–¹æ³•</th> <th>é€€å‡ºæ–¹æ³•</th></tr></thead> <tbody><tr><td>æ²¡æœ‰è®¾ç½® Timeout å‚æ•°çš„ <code>Object.wait</code> æ–¹æ³•</td> <td><code>Object.notify</code> / <code>Object.notifyAll</code></td></tr> <tr><td>æ²¡æœ‰è®¾ç½® Timeout å‚æ•°çš„ <code>Thread.join</code> æ–¹æ³•</td> <td>è¢«è°ƒç”¨çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</td></tr> <tr><td><code>LockSupport.park</code> æ–¹æ³•ï¼ˆJava å¹¶å‘åŒ…ä¸­çš„é”ï¼Œéƒ½æ˜¯åŸºäºå®ƒå®ç°çš„ï¼‰</td> <td><code>LockSupport.unpark</code></td></tr></tbody></table></li> <li><p><strong>å®šæ—¶ç­‰å¾…ï¼ˆTimed waitingï¼‰</strong> - æ­¤çŠ¶æ€æ„å‘³ç€ï¼š<strong>æ— éœ€ç­‰å¾…å…¶å®ƒçº¿ç¨‹æ˜¾å¼åœ°å”¤é†’ï¼Œåœ¨ä¸€å®šæ—¶é—´ä¹‹åä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨å”¤é†’</strong>ã€‚</p> <table><thead><tr><th>è¿›å…¥æ–¹æ³•</th> <th>é€€å‡ºæ–¹æ³•</th></tr></thead> <tbody><tr><td><code>Thread.sleep</code> æ–¹æ³•</td> <td>æ—¶é—´ç»“æŸ</td></tr> <tr><td>è·å¾— <code>synchronized</code> éšå¼é”çš„çº¿ç¨‹ï¼Œè°ƒç”¨è®¾ç½®äº† Timeout å‚æ•°çš„ <code>Object.wait</code> æ–¹æ³•</td> <td>æ—¶é—´ç»“æŸ / <code>Object.notify</code> / <code>Object.notifyAll</code></td></tr> <tr><td>è®¾ç½®äº† Timeout å‚æ•°çš„ <code>Thread.join</code> æ–¹æ³•</td> <td>æ—¶é—´ç»“æŸ / è¢«è°ƒç”¨çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</td></tr> <tr><td><code>LockSupport.parkNanos</code> æ–¹æ³•</td> <td><code>LockSupport.unpark</code></td></tr> <tr><td><code>LockSupport.parkUntil</code> æ–¹æ³•</td> <td><code>LockSupport.unpark</code></td></tr></tbody></table></li> <li><p><strong>ç»ˆæ­¢(Terminated)</strong> - çº¿ç¨‹æ‰§è¡Œå®Œ <code>run</code> æ–¹æ³•ï¼Œæˆ–è€…å› å¼‚å¸¸é€€å‡ºäº† <code>run</code> æ–¹æ³•ã€‚æ­¤çŠ¶æ€æ„å‘³ç€ï¼šçº¿ç¨‹ç»“æŸäº†ç”Ÿå‘½å‘¨æœŸã€‚</p></li></ul> <h2 id="_6-çº¿ç¨‹å¸¸è§é—®é¢˜"><a href="#_6-çº¿ç¨‹å¸¸è§é—®é¢˜" class="header-anchor">#</a> 6. çº¿ç¨‹å¸¸è§é—®é¢˜</h2> <h3 id="_6-1-sleepã€yieldã€join-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#_6-1-sleepã€yieldã€join-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«" class="header-anchor">#</a> 6.1. sleepã€yieldã€join æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«</h3> <ul><li><code>yield</code> æ–¹æ³•
<ul><li><code>yield</code> æ–¹æ³•ä¼š <strong>è®©çº¿ç¨‹ä» <code>Running</code> çŠ¶æ€è½¬å…¥ <code>Runnable</code> çŠ¶æ€</strong>ã€‚</li> <li>å½“è°ƒç”¨äº† <code>yield</code> æ–¹æ³•åï¼Œåªæœ‰<strong>ä¸å½“å‰çº¿ç¨‹ç›¸åŒæˆ–æ›´é«˜ä¼˜å…ˆçº§çš„<code>Runnable</code> çŠ¶æ€çº¿ç¨‹æ‰ä¼šè·å¾—æ‰§è¡Œçš„æœºä¼š</strong>ã€‚</li></ul></li> <li><code>sleep</code> æ–¹æ³•
<ul><li><code>sleep</code> æ–¹æ³•ä¼š <strong>è®©çº¿ç¨‹ä» <code>Running</code> çŠ¶æ€è½¬å…¥ <code>Waiting</code> çŠ¶æ€</strong>ã€‚</li> <li><code>sleep</code> æ–¹æ³•éœ€è¦æŒ‡å®šç­‰å¾…çš„æ—¶é—´ï¼Œ<strong>è¶…è¿‡ç­‰å¾…æ—¶é—´åï¼ŒJVM ä¼šå°†çº¿ç¨‹ä» <code>Waiting</code> çŠ¶æ€è½¬å…¥ <code>Runnable</code> çŠ¶æ€</strong>ã€‚</li> <li>å½“è°ƒç”¨äº† <code>sleep</code> æ–¹æ³•åï¼Œ<strong>æ— è®ºä»€ä¹ˆä¼˜å…ˆçº§çš„çº¿ç¨‹éƒ½å¯ä»¥å¾—åˆ°æ‰§è¡Œæœºä¼š</strong>ã€‚</li> <li><code>sleep</code> æ–¹æ³•ä¸ä¼šé‡Šæ”¾â€œé”æ ‡å¿—â€ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæœ‰ <code>synchronized</code> åŒæ­¥å—ï¼Œå…¶ä»–çº¿ç¨‹ä»ç„¶ä¸èƒ½è®¿é—®å…±äº«æ•°æ®ã€‚</li></ul></li> <li><code>join</code> <ul><li><code>join</code> æ–¹æ³•ä¼š <strong>è®©çº¿ç¨‹ä» <code>Running</code> çŠ¶æ€è½¬å…¥ <code>Waiting</code> çŠ¶æ€</strong>ã€‚</li> <li>å½“è°ƒç”¨äº† <code>join</code> æ–¹æ³•åï¼Œ<strong>å½“å‰çº¿ç¨‹å¿…é¡»ç­‰å¾…è°ƒç”¨ <code>join</code> æ–¹æ³•çš„çº¿ç¨‹ç»“æŸåæ‰èƒ½ç»§ç»­æ‰§è¡Œ</strong>ã€‚</li></ul></li></ul> <h3 id="_6-2-ä¸ºä»€ä¹ˆ-sleep-å’Œ-yield-æ–¹æ³•æ˜¯é™æ€çš„"><a href="#_6-2-ä¸ºä»€ä¹ˆ-sleep-å’Œ-yield-æ–¹æ³•æ˜¯é™æ€çš„" class="header-anchor">#</a> 6.2. ä¸ºä»€ä¹ˆ sleep å’Œ yield æ–¹æ³•æ˜¯é™æ€çš„</h3> <p><code>Thread</code> ç±»çš„ <code>sleep</code> å’Œ <code>yield</code> æ–¹æ³•å°†å¤„ç† <code>Running</code> çŠ¶æ€çš„çº¿ç¨‹ã€‚</p> <p>æ‰€ä»¥åœ¨å…¶ä»–å¤„äºé <code>Running</code> çŠ¶æ€çš„çº¿ç¨‹ä¸Šæ‰§è¡Œè¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™äº›æ–¹æ³•æ˜¯é™æ€çš„ã€‚å®ƒä»¬å¯ä»¥åœ¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¸­å·¥ä½œï¼Œå¹¶é¿å…ç¨‹åºå‘˜é”™è¯¯çš„è®¤ä¸ºå¯ä»¥åœ¨å…¶ä»–éè¿è¡Œçº¿ç¨‹è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚</p> <h3 id="_6-3-java-çº¿ç¨‹æ˜¯å¦æŒ‰ç…§çº¿ç¨‹ä¼˜å…ˆçº§ä¸¥æ ¼æ‰§è¡Œ"><a href="#_6-3-java-çº¿ç¨‹æ˜¯å¦æŒ‰ç…§çº¿ç¨‹ä¼˜å…ˆçº§ä¸¥æ ¼æ‰§è¡Œ" class="header-anchor">#</a> 6.3. Java çº¿ç¨‹æ˜¯å¦æŒ‰ç…§çº¿ç¨‹ä¼˜å…ˆçº§ä¸¥æ ¼æ‰§è¡Œ</h3> <p>å³ä½¿è®¾ç½®äº†çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œä¹Ÿ<strong>æ— æ³•ä¿è¯é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹ä¸€å®šå…ˆæ‰§è¡Œ</strong>ã€‚</p> <p>åŸå› åœ¨äºçº¿ç¨‹ä¼˜å…ˆçº§ä¾èµ–äºæ“ä½œç³»ç»Ÿçš„æ”¯æŒï¼Œç„¶è€Œï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿæ”¯æŒçš„çº¿ç¨‹ä¼˜å…ˆçº§å¹¶ä¸ç›¸åŒï¼Œä¸èƒ½å¾ˆå¥½çš„å’Œ Java ä¸­çº¿ç¨‹ä¼˜å…ˆçº§ä¸€ä¸€å¯¹åº”ã€‚</p> <h3 id="_6-4-ä¸€ä¸ªçº¿ç¨‹ä¸¤æ¬¡è°ƒç”¨-start-æ–¹æ³•ä¼šæ€æ ·"><a href="#_6-4-ä¸€ä¸ªçº¿ç¨‹ä¸¤æ¬¡è°ƒç”¨-start-æ–¹æ³•ä¼šæ€æ ·" class="header-anchor">#</a> 6.4. ä¸€ä¸ªçº¿ç¨‹ä¸¤æ¬¡è°ƒç”¨ start()æ–¹æ³•ä¼šæ€æ ·</h3> <p>Java çš„çº¿ç¨‹æ˜¯ä¸å…è®¸å¯åŠ¨ä¸¤æ¬¡çš„ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨å¿…ç„¶ä¼šæŠ›å‡º IllegalThreadStateExceptionï¼Œè¿™æ˜¯ä¸€ç§è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¤šæ¬¡è°ƒç”¨ start è¢«è®¤ä¸ºæ˜¯ç¼–ç¨‹é”™è¯¯ã€‚</p> <h3 id="_6-5-start-å’Œ-run-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#_6-5-start-å’Œ-run-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«" class="header-anchor">#</a> 6.5. <code>start</code> å’Œ <code>run</code> æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«</h3> <ul><li><code>run</code> æ–¹æ³•æ˜¯çº¿ç¨‹çš„æ‰§è¡Œä½“ã€‚</li> <li><code>start</code> æ–¹æ³•ä¼šå¯åŠ¨çº¿ç¨‹ï¼Œç„¶å JVM ä¼šè®©è¿™ä¸ªçº¿ç¨‹å»æ‰§è¡Œ <code>run</code> æ–¹æ³•ã€‚</li></ul> <h3 id="_6-6-å¯ä»¥ç›´æ¥è°ƒç”¨-thread-ç±»çš„-run-æ–¹æ³•ä¹ˆ"><a href="#_6-6-å¯ä»¥ç›´æ¥è°ƒç”¨-thread-ç±»çš„-run-æ–¹æ³•ä¹ˆ" class="header-anchor">#</a> 6.6. å¯ä»¥ç›´æ¥è°ƒç”¨ <code>Thread</code> ç±»çš„ <code>run</code> æ–¹æ³•ä¹ˆ</h3> <ul><li>å¯ä»¥ã€‚ä½†æ˜¯å¦‚æœç›´æ¥è°ƒç”¨ <code>Thread</code> çš„ <code>run</code> æ–¹æ³•ï¼Œå®ƒçš„è¡Œä¸ºå°±ä¼šå’Œæ™®é€šçš„æ–¹æ³•ä¸€æ ·ã€‚</li> <li>ä¸ºäº†åœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œæˆ‘ä»¬çš„ä»£ç ï¼Œå¿…é¡»ä½¿ç”¨ <code>Thread</code> çš„ <code>start</code> æ–¹æ³•ã€‚</li></ul> <h2 id="_7-å‚è€ƒèµ„æ–™"><a href="#_7-å‚è€ƒèµ„æ–™" class="header-anchor">#</a> 7. å‚è€ƒèµ„æ–™</h2> <ul><li><a href="https://book.douban.com/subject/10484692/" target="_blank" rel="noopener noreferrer">ã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://book.douban.com/subject/26591326/" target="_blank" rel="noopener noreferrer">ã€ŠJava å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/yaosiming2011/article/details/44280797" target="_blank" rel="noopener noreferrer">è¿›ç¨‹å’Œçº¿ç¨‹å…³ç³»åŠåŒºåˆ«<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.importnew.com/14958.html" target="_blank" rel="noopener noreferrer">Java çº¿ç¨‹ä¸­ yield ä¸ join æ–¹æ³•çš„åŒºåˆ«<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/xiangwanpeng/article/details/54972952" target="_blank" rel="noopener noreferrer">sleep()ï¼Œwait()ï¼Œyield()å’Œ join()æ–¹æ³•çš„åŒºåˆ«<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/dolphin0520/p/3920385.html" target="_blank" rel="noopener noreferrer">Java å¹¶å‘ç¼–ç¨‹ï¼šçº¿ç¨‹é—´åä½œçš„ä¸¤ç§æ–¹å¼ï¼šwaitã€notifyã€notifyAll å’Œ Condition<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/dolphin0520/p/3949310.html" target="_blank" rel="noopener noreferrer">Java å¹¶å‘ç¼–ç¨‹ï¼šCallableã€Future å’Œ FutureTask<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://stackoverflow.com/questions/27406200/visualvm-thread-states" target="_blank" rel="noopener noreferrer">StackOverflow VisualVM - Thread States<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/shimiso/article/details/8964414" target="_blank" rel="noopener noreferrer">Java ä¸­å®ˆæŠ¤çº¿ç¨‹çš„æ€»ç»“<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/CyC2018/CS-Notes/blob/master/notes/Java%20%E5%B9%B6%E5%8F%91.md" target="_blank" rel="noopener noreferrer">Java å¹¶å‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://stackoverflow.com/questions/2779484/why-must-wait-always-be-in-synchronized-block" target="_blank" rel="noopener noreferrer">Why must wait() always be in synchronized block<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/javacore/edit/master/docs/concurrent/Javaçº¿ç¨‹åŸºç¡€.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">3 minutes ago</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/javacore/assets/js/app.62a93b3d.js" defer></script><script src="/javacore/assets/js/4.156ff030.js" defer></script><script src="/javacore/assets/js/39.38104d31.js" defer></script><script src="/javacore/assets/js/5.cb43ecfb.js" defer></script>
  </body>
</html>
