(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{426:function(t,a,s){"use strict";s.r(a);var n=s(15),v=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"java-å¹¶å‘ç®€ä»‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-å¹¶å‘ç®€ä»‹"}},[t._v("#")]),t._v(" Java å¹¶å‘ç®€ä»‹")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("å…³é”®è¯")]),t._v("ï¼š"),s("code",[t._v("è¿›ç¨‹")]),t._v("ã€"),s("code",[t._v("çº¿ç¨‹")]),t._v("ã€"),s("code",[t._v("å®‰å…¨æ€§")]),t._v("ã€"),s("code",[t._v("æ´»è·ƒæ€§")]),t._v("ã€"),s("code",[t._v("æ€§èƒ½")]),t._v("ã€"),s("code",[t._v("æ­»é”")]),t._v("ã€"),s("code",[t._v("é¥¥é¥¿")]),t._v("ã€"),s("code",[t._v("ä¸Šä¸‹æ–‡åˆ‡æ¢")])]),t._v(" "),s("p",[s("strong",[t._v("æ‘˜è¦")]),t._v("ï¼šå¹¶å‘ç¼–ç¨‹å¹¶é Java è¯­è¨€æ‰€ç‹¬æœ‰ï¼Œè€Œæ˜¯ä¸€ç§æˆç†Ÿçš„ç¼–ç¨‹èŒƒå¼ï¼ŒJava åªæ˜¯ç”¨è‡ªå·±çš„æ–¹å¼å®ç°äº†å¹¶å‘å·¥ä½œæ¨¡å‹ã€‚å­¦ä¹  Java å¹¶å‘ç¼–ç¨‹ï¼Œåº”è¯¥å…ˆç†Ÿæ‚‰å¹¶å‘çš„åŸºæœ¬æ¦‚å¿µï¼Œç„¶åè¿›ä¸€æ­¥äº†è§£å¹¶å‘çš„ç‰¹æ€§ä»¥åŠå…¶ç‰¹æ€§æ‰€é¢ä¸´çš„é—®é¢˜ã€‚æŒæ¡äº†è¿™äº›ï¼Œå½“å­¦ä¹  Java å¹¶å‘å·¥å…·æ—¶ï¼Œæ‰ä¼šæ˜ç™½å®ƒä»¬å„è‡ªæ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ã€‚é€šè¿‡è¿™æ ·ç”±ç‚¹åˆ°é¢çš„å­¦ä¹ æ–¹å¼ï¼Œæ›´å®¹æ˜“èä¼šè´¯é€šï¼Œå°†å¹¶å‘çŸ¥è¯†å½¢æˆä½“ç³»åŒ–ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("ğŸ“¦ æœ¬æ–‡ä»¥åŠç¤ºä¾‹æºç å·²å½’æ¡£åœ¨ "),s("a",{attrs:{href:"https://github.com/dunwu/javacore/",target:"_blank",rel:"noopener noreferrer"}},[t._v("javacore"),s("OutboundLink")],1)])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20200701113445.png",alt:"img"}})]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#1-%E5%B9%B6%E5%8F%91%E6%A6%82%E5%BF%B5"}},[t._v("1. å¹¶å‘æ¦‚å¿µ")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#11-%E5%B9%B6%E5%8F%91%E5%92%8C%E5%B9%B6%E8%A1%8C"}},[t._v("1.1. å¹¶å‘å’Œå¹¶è¡Œ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#12-%E5%90%8C%E6%AD%A5%E5%92%8C%E5%BC%82%E6%AD%A5"}},[t._v("1.2. åŒæ­¥å’Œå¼‚æ­¥")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#13-%E9%98%BB%E5%A1%9E%E5%92%8C%E9%9D%9E%E9%98%BB%E5%A1%9E"}},[t._v("1.3. é˜»å¡å’Œéé˜»å¡")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#14-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B"}},[t._v("1.4. è¿›ç¨‹å’Œçº¿ç¨‹")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#15-%E7%AB%9E%E6%80%81%E6%9D%A1%E4%BB%B6%E5%92%8C%E4%B8%B4%E7%95%8C%E5%8C%BA"}},[t._v("1.5. ç«æ€æ¡ä»¶å’Œä¸´ç•ŒåŒº")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#16-%E7%AE%A1%E7%A8%8B"}},[t._v("1.6. ç®¡ç¨‹")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#2-%E5%B9%B6%E5%8F%91%E7%9A%84%E7%89%B9%E7%82%B9"}},[t._v("2. å¹¶å‘çš„ç‰¹ç‚¹")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#21-%E6%8F%90%E5%8D%87%E8%B5%84%E6%BA%90%E5%88%A9%E7%94%A8%E7%8E%87"}},[t._v("2.1. æå‡èµ„æºåˆ©ç”¨ç‡")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#22-%E7%A8%8B%E5%BA%8F%E5%93%8D%E5%BA%94%E6%9B%B4%E5%BF%AB"}},[t._v("2.2. ç¨‹åºå“åº”æ›´å¿«")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#23-%E5%B9%B6%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98"}},[t._v("2.3. å¹¶å‘çš„é—®é¢˜")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#3-%E5%AE%89%E5%85%A8%E6%80%A7%E9%97%AE%E9%A2%98"}},[t._v("3. å®‰å…¨æ€§é—®é¢˜")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#31-%E7%BC%93%E5%AD%98%E5%AF%BC%E8%87%B4%E7%9A%84%E5%8F%AF%E8%A7%81%E6%80%A7%E9%97%AE%E9%A2%98"}},[t._v("3.1. ç¼“å­˜å¯¼è‡´çš„å¯è§æ€§é—®é¢˜")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#32-%E7%BA%BF%E7%A8%8B%E5%88%87%E6%8D%A2%E5%B8%A6%E6%9D%A5%E7%9A%84%E5%8E%9F%E5%AD%90%E6%80%A7%E9%97%AE%E9%A2%98"}},[t._v("3.2. çº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„åŸå­æ€§é—®é¢˜")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#33-%E7%BC%96%E8%AF%91%E4%BC%98%E5%8C%96%E5%B8%A6%E6%9D%A5%E7%9A%84%E6%9C%89%E5%BA%8F%E6%80%A7%E9%97%AE%E9%A2%98"}},[t._v("3.3. ç¼–è¯‘ä¼˜åŒ–å¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#34-%E4%BF%9D%E8%AF%81%E5%B9%B6%E5%8F%91%E5%AE%89%E5%85%A8%E7%9A%84%E6%80%9D%E8%B7%AF"}},[t._v("3.4. ä¿è¯å¹¶å‘å®‰å…¨çš„æ€è·¯")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#4-%E6%B4%BB%E8%B7%83%E6%80%A7%E9%97%AE%E9%A2%98"}},[t._v("4. æ´»è·ƒæ€§é—®é¢˜")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#41-%E6%AD%BB%E9%94%81deadlock"}},[t._v("4.1. æ­»é”ï¼ˆDeadlockï¼‰")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#42-%E6%B4%BB%E9%94%81livelock"}},[t._v("4.2. æ´»é”ï¼ˆLivelockï¼‰")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#43-%E9%A5%A5%E9%A5%BFstarvation"}},[t._v("4.3. é¥¥é¥¿ï¼ˆStarvationï¼‰")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#5-%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98"}},[t._v("5. æ€§èƒ½é—®é¢˜")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#51-%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2"}},[t._v("5.1. ä¸Šä¸‹æ–‡åˆ‡æ¢")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#52-%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6"}},[t._v("5.2. èµ„æºé™åˆ¶")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#6-%E5%B0%8F%E7%BB%93"}},[t._v("6. å°ç»“")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#7-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"}},[t._v("7. å‚è€ƒèµ„æ–™")])])]),t._v(" "),s("h2",{attrs:{id:"_1-å¹¶å‘æ¦‚å¿µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å¹¶å‘æ¦‚å¿µ"}},[t._v("#")]),t._v(" 1. å¹¶å‘æ¦‚å¿µ")]),t._v(" "),s("p",[t._v("å¹¶å‘ç¼–ç¨‹ä¸­æœ‰å¾ˆå¤šæœ¯è¯­æ¦‚å¿µç›¸è¿‘ï¼Œå®¹æ˜“è®©äººæ··æ·†ã€‚æœ¬èŠ‚å†…å®¹é€šè¿‡å¯¹æ¯”åˆ†æï¼ŒåŠ›æ±‚è®©è¯»è€…æ¸…æ™°ç†è§£å…¶æ¦‚å¿µä»¥åŠå·®å¼‚ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_1-1-å¹¶å‘å’Œå¹¶è¡Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-å¹¶å‘å’Œå¹¶è¡Œ"}},[t._v("#")]),t._v(" 1.1. å¹¶å‘å’Œå¹¶è¡Œ")]),t._v(" "),s("p",[t._v("å¹¶å‘å’Œå¹¶è¡Œæ˜¯æœ€å®¹æ˜“è®©æ–°æ‰‹è´¹è§£çš„æ¦‚å¿µï¼Œé‚£ä¹ˆå¦‚ä½•ç†è§£äºŒè€…å‘¢ï¼Ÿå…¶æœ€å…³é”®çš„å·®å¼‚åœ¨äºï¼šæ˜¯å¦æ˜¯"),s("strong",[t._v("åŒæ—¶")]),t._v("å‘ç”Ÿï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å¹¶å‘")]),t._v("ï¼šæ˜¯æŒ‡å…·å¤‡å¤„ç†å¤šä¸ªä»»åŠ¡çš„èƒ½åŠ›ï¼Œä½†ä¸ä¸€å®šè¦åŒæ—¶ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¹¶è¡Œ")]),t._v("ï¼šæ˜¯æŒ‡å…·å¤‡åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡çš„èƒ½åŠ›ã€‚")])]),t._v(" "),s("p",[t._v("ä¸‹é¢æ˜¯æˆ‘è§è¿‡æœ€ç”ŸåŠ¨çš„è¯´æ˜ï¼Œæ‘˜è‡ª "),s("a",{attrs:{href:"https://www.zhihu.com/question/33515481/answer/58849148",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿâ€”â€”çŸ¥ä¹çš„é«˜ç¥¨ç­”æ¡ˆ"),s("OutboundLink")],1),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ä½ åƒé¥­åƒåˆ°ä¸€åŠï¼Œç”µè¯æ¥äº†ï¼Œä½ ä¸€ç›´åˆ°åƒå®Œäº†ä»¥åæ‰å»æ¥ï¼Œè¿™å°±è¯´æ˜ä½ ä¸æ”¯æŒå¹¶å‘ä¹Ÿä¸æ”¯æŒå¹¶è¡Œã€‚")]),t._v(" "),s("li",[t._v("ä½ åƒé¥­åƒåˆ°ä¸€åŠï¼Œç”µè¯æ¥äº†ï¼Œä½ åœäº†ä¸‹æ¥æ¥äº†ç”µè¯ï¼Œæ¥å®Œåç»§ç»­åƒé¥­ï¼Œè¿™è¯´æ˜ä½ æ”¯æŒå¹¶å‘ã€‚")]),t._v(" "),s("li",[t._v("ä½ åƒé¥­åƒåˆ°ä¸€åŠï¼Œç”µè¯æ¥äº†ï¼Œä½ ä¸€è¾¹æ‰“ç”µè¯ä¸€è¾¹åƒé¥­ï¼Œè¿™è¯´æ˜ä½ æ”¯æŒå¹¶è¡Œã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_1-2-åŒæ­¥å’Œå¼‚æ­¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-åŒæ­¥å’Œå¼‚æ­¥"}},[t._v("#")]),t._v(" 1.2. åŒæ­¥å’Œå¼‚æ­¥")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åŒæ­¥")]),t._v("ï¼šæ˜¯æŒ‡åœ¨å‘å‡ºä¸€ä¸ªè°ƒç”¨æ—¶ï¼Œåœ¨æ²¡æœ‰å¾—åˆ°ç»“æœä¹‹å‰ï¼Œè¯¥è°ƒç”¨å°±ä¸è¿”å›ã€‚ä½†æ˜¯ä¸€æ—¦è°ƒç”¨è¿”å›ï¼Œå°±å¾—åˆ°è¿”å›å€¼äº†ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¼‚æ­¥")]),t._v("ï¼šåˆ™æ˜¯ç›¸åï¼Œè°ƒç”¨åœ¨å‘å‡ºä¹‹åï¼Œè¿™ä¸ªè°ƒç”¨å°±ç›´æ¥è¿”å›äº†ï¼Œæ‰€ä»¥æ²¡æœ‰è¿”å›ç»“æœã€‚æ¢å¥è¯è¯´ï¼Œå½“ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹è°ƒç”¨å‘å‡ºåï¼Œè°ƒç”¨è€…ä¸ä¼šç«‹åˆ»å¾—åˆ°ç»“æœã€‚è€Œæ˜¯åœ¨è°ƒç”¨å‘å‡ºåï¼Œè¢«è°ƒç”¨è€…é€šè¿‡çŠ¶æ€ã€é€šçŸ¥æ¥é€šçŸ¥è°ƒç”¨è€…ï¼Œæˆ–é€šè¿‡å›è°ƒå‡½æ•°å¤„ç†è¿™ä¸ªè°ƒç”¨ã€‚")])]),t._v(" "),s("p",[t._v("ä¸¾ä¾‹æ¥è¯´æ˜ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("åŒæ­¥å°±åƒæ˜¯æ‰“ç”µè¯ï¼šä¸æŒ‚ç”µè¯ï¼Œé€šè¯ä¸ä¼šç»“æŸã€‚")]),t._v(" "),s("li",[t._v("å¼‚æ­¥å°±åƒæ˜¯å‘çŸ­ä¿¡ï¼šå‘å®ŒçŸ­ä¿¡åï¼Œå°±å¯ä»¥åšå…¶ä»–äº‹ï¼›å½“æ”¶åˆ°å›å¤çŸ­ä¿¡æ—¶ï¼Œæ‰‹æœºä¼šé€šè¿‡é“ƒå£°æˆ–æŒ¯åŠ¨æ¥æé†’ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_1-3-é˜»å¡å’Œéé˜»å¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-é˜»å¡å’Œéé˜»å¡"}},[t._v("#")]),t._v(" 1.3. é˜»å¡å’Œéé˜»å¡")]),t._v(" "),s("p",[t._v("é˜»å¡å’Œéé˜»å¡å…³æ³¨çš„æ˜¯ç¨‹åºåœ¨ç­‰å¾…è°ƒç”¨ç»“æœï¼ˆæ¶ˆæ¯ï¼Œè¿”å›å€¼ï¼‰æ—¶çš„çŠ¶æ€ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("é˜»å¡")]),t._v("ï¼šæ˜¯æŒ‡è°ƒç”¨ç»“æœè¿”å›ä¹‹å‰ï¼Œå½“å‰çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ã€‚è°ƒç”¨çº¿ç¨‹åªæœ‰åœ¨å¾—åˆ°ç»“æœä¹‹åæ‰ä¼šè¿”å›ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("éé˜»å¡")]),t._v("ï¼šæ˜¯æŒ‡åœ¨ä¸èƒ½ç«‹åˆ»å¾—åˆ°ç»“æœä¹‹å‰ï¼Œè¯¥è°ƒç”¨ä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ã€‚")])]),t._v(" "),s("p",[t._v("ä¸¾ä¾‹æ¥è¯´æ˜ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é˜»å¡è°ƒç”¨å°±åƒæ˜¯æ‰“ç”µè¯ï¼Œé€šè¯ä¸ç»“æŸï¼Œä¸èƒ½æ”¾ä¸‹ã€‚")]),t._v(" "),s("li",[t._v("éé˜»å¡è°ƒç”¨å°±åƒæ˜¯å‘çŸ­ä¿¡ï¼Œå‘å®ŒçŸ­ä¿¡åï¼Œå°±å¯ä»¥åšå…¶ä»–äº‹ï¼ŒçŸ­ä¿¡æ¥äº†ï¼Œæ‰‹æœºä¼šæé†’ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_1-4-è¿›ç¨‹å’Œçº¿ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-è¿›ç¨‹å’Œçº¿ç¨‹"}},[t._v("#")]),t._v(" 1.4. è¿›ç¨‹å’Œçº¿ç¨‹")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("è¿›ç¨‹")]),t._v("ï¼šè¿›ç¨‹æ˜¯å…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ã€‚è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ã€‚è¿›ç¨‹å¯è§†ä¸ºä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºã€‚")]),t._v(" "),s("li",[s("strong",[t._v("çº¿ç¨‹")]),t._v("ï¼šçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œè°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚")])]),t._v(" "),s("p",[t._v("è¿›ç¨‹å’Œçº¿ç¨‹çš„å·®å¼‚ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚")]),t._v(" "),s("li",[t._v("çº¿ç¨‹æ¯”è¿›ç¨‹åˆ’åˆ†æ›´ç»†ï¼Œæ‰€ä»¥æ‰§è¡Œå¼€é”€æ›´å°ï¼Œå¹¶å‘æ€§æ›´é«˜")]),t._v(" "),s("li",[t._v("è¿›ç¨‹æ˜¯ä¸€ä¸ªå®ä½“ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„èµ„æºï¼›è€ŒåŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„èµ„æºã€‚")])]),t._v(" "),s("p",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/concurrent/processes-vs-threads.jpg"}})]),t._v(" "),s("p",[t._v("JVM åœ¨å•ä¸ªè¿›ç¨‹ä¸­è¿è¡Œï¼ŒJVM ä¸­çš„çº¿ç¨‹å…±äº«å±äºè¯¥è¿›ç¨‹çš„å †ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå‡ ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®åŒä¸€ä¸ªå¯¹è±¡ã€‚çº¿ç¨‹å…±äº«å †å¹¶æ‹¥æœ‰è‡ªå·±çš„å †æ ˆç©ºé—´ã€‚è¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹å¦‚ä½•è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ä»¥åŠå®ƒçš„å±€éƒ¨å˜é‡æ˜¯å¦‚ä½•ä¿æŒçº¿ç¨‹å®‰å…¨çš„ã€‚ä½†æ˜¯å †ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„å¹¶ä¸”ä¸ºäº†çº¿ç¨‹å®‰å…¨å¿…é¡»è¿›è¡ŒåŒæ­¥ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_1-5-ç«æ€æ¡ä»¶å’Œä¸´ç•ŒåŒº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-ç«æ€æ¡ä»¶å’Œä¸´ç•ŒåŒº"}},[t._v("#")]),t._v(" 1.5. ç«æ€æ¡ä»¶å’Œä¸´ç•ŒåŒº")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("ç«æ€æ¡ä»¶ï¼ˆRace Conditionï¼‰")]),t._v("ï¼šå½“ä¸¤ä¸ªçº¿ç¨‹ç«äº‰åŒä¸€èµ„æºæ—¶ï¼Œå¦‚æœå¯¹èµ„æºçš„è®¿é—®é¡ºåºæ•æ„Ÿï¼Œå°±ç§°å­˜åœ¨ç«æ€æ¡ä»¶ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ä¸´ç•ŒåŒºï¼ˆCritical Sectionsï¼‰")]),t._v("ï¼šå¯¼è‡´ç«æ€æ¡ä»¶å‘ç”Ÿçš„ä»£ç åŒºç§°ä½œä¸´ç•ŒåŒºã€‚")])])]),t._v(" "),s("h3",{attrs:{id:"_1-6-ç®¡ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-ç®¡ç¨‹"}},[t._v("#")]),t._v(" 1.6. ç®¡ç¨‹")]),t._v(" "),s("p",[t._v("ç®¡ç¨‹ï¼ˆMonitorï¼‰ï¼Œæ˜¯æŒ‡ç®¡ç†å…±äº«å˜é‡ä»¥åŠå¯¹å…±äº«å˜é‡çš„æ“ä½œè¿‡ç¨‹ï¼Œè®©ä»–ä»¬æ”¯æŒå¹¶å‘ã€‚")]),t._v(" "),s("p",[t._v("Java é‡‡ç”¨çš„æ˜¯ç®¡ç¨‹æŠ€æœ¯ï¼Œsynchronized å…³é”®å­—åŠ wait()ã€notify()ã€notifyAll() è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯ç®¡ç¨‹çš„ç»„æˆéƒ¨åˆ†ã€‚è€Œ"),s("strong",[t._v("ç®¡ç¨‹å’Œä¿¡å·é‡æ˜¯ç­‰ä»·çš„ï¼Œæ‰€è°“ç­‰ä»·æŒ‡çš„æ˜¯ç”¨ç®¡ç¨‹èƒ½å¤Ÿå®ç°ä¿¡å·é‡ï¼Œä¹Ÿèƒ½ç”¨ä¿¡å·é‡å®ç°ç®¡ç¨‹")]),t._v("ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_2-å¹¶å‘çš„ç‰¹ç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å¹¶å‘çš„ç‰¹ç‚¹"}},[t._v("#")]),t._v(" 2. å¹¶å‘çš„ç‰¹ç‚¹")]),t._v(" "),s("p",[t._v("æŠ€æœ¯åœ¨è¿›æ­¥ï¼ŒCPUã€å†…å­˜ã€I/O è®¾å¤‡çš„æ€§èƒ½ä¹Ÿåœ¨ä¸æ–­æé«˜ã€‚ä½†æ˜¯ï¼Œå§‹ç»ˆå­˜åœ¨ä¸€ä¸ªæ ¸å¿ƒçŸ›ç›¾ï¼š"),s("strong",[t._v("CPUã€å†…å­˜ã€I/O è®¾å¤‡å­˜åœ¨é€Ÿåº¦å·®å¼‚")]),t._v("ã€‚CPU è¿œå¿«äºå†…å­˜ï¼Œå†…å­˜è¿œå¿«äº I/O è®¾å¤‡ã€‚")]),t._v(" "),s("p",[t._v("æœ¨æ¡¶çŸ­æ¿ç†è®ºå‘Šè¯‰æˆ‘ä»¬ï¼šä¸€åªæœ¨æ¡¶èƒ½è£…å¤šå°‘æ°´ï¼Œå–å†³äºæœ€çŸ­çš„é‚£å—æœ¨æ¿ã€‚åŒç†ï¼Œç¨‹åºæ•´ä½“æ€§èƒ½å–å†³äºæœ€æ…¢çš„æ“ä½œï¼ˆå³ I/O æ“ä½œï¼‰ï¼Œæ‰€ä»¥å•æ–¹é¢æé«˜ CPUã€å†…å­˜çš„æ€§èƒ½æ˜¯æ— æ•ˆçš„ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20201225170052.jpg",alt:""}})]),t._v(" "),s("p",[t._v("ä¸ºäº†åˆç†åˆ©ç”¨ CPU çš„é«˜æ€§èƒ½ï¼Œå¹³è¡¡è¿™ä¸‰è€…çš„é€Ÿåº¦å·®å¼‚ï¼Œè®¡ç®—æœºä½“ç³»æœºæ„ã€æ“ä½œç³»ç»Ÿã€ç¼–è¯‘ç¨‹åºéƒ½åšå‡ºäº†è´¡çŒ®ï¼Œä¸»è¦ä½“ç°ä¸ºï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("CPU å¢åŠ äº†ç¼“å­˜")]),t._v("ï¼Œä»¥å‡è¡¡ä¸å†…å­˜çš„é€Ÿåº¦å·®å¼‚ï¼›")]),t._v(" "),s("li",[s("strong",[t._v("æ“ä½œç³»ç»Ÿå¢åŠ äº†è¿›ç¨‹ã€çº¿ç¨‹")]),t._v("ï¼Œä»¥åˆ†æ—¶å¤ç”¨ CPUï¼Œè¿›è€Œå‡è¡¡ CPU ä¸ I/O è®¾å¤‡çš„é€Ÿåº¦å·®å¼‚ï¼›")]),t._v(" "),s("li",[s("strong",[t._v("ç¼–è¯‘ç¨‹åºä¼˜åŒ–æŒ‡ä»¤æ‰§è¡Œæ¬¡åº")]),t._v("ï¼Œä½¿å¾—ç¼“å­˜èƒ½å¤Ÿå¾—åˆ°æ›´åŠ åˆç†åœ°åˆ©ç”¨ã€‚")])]),t._v(" "),s("p",[t._v("å…¶ä¸­ï¼Œè¿›ç¨‹ã€çº¿ç¨‹ä½¿å¾—è®¡ç®—æœºã€ç¨‹åºæœ‰äº†å¹¶å‘å¤„ç†ä»»åŠ¡çš„èƒ½åŠ›ã€‚")]),t._v(" "),s("p",[t._v("å¹¶å‘çš„ä¼˜ç‚¹åœ¨äºï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æå‡èµ„æºåˆ©ç”¨ç‡")]),t._v(" "),s("li",[t._v("ç¨‹åºå“åº”æ›´å¿«")])]),t._v(" "),s("h3",{attrs:{id:"_2-1-æå‡èµ„æºåˆ©ç”¨ç‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-æå‡èµ„æºåˆ©ç”¨ç‡"}},[t._v("#")]),t._v(" 2.1. æå‡èµ„æºåˆ©ç”¨ç‡")]),t._v(" "),s("p",[t._v("æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºéœ€è¦ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–å’Œå¤„ç†æ–‡ä»¶çš„æƒ…æ™¯ã€‚æ¯”æ–¹è¯´ï¼Œä»ç£ç›˜è¯»å–ä¸€ä¸ªæ–‡ä»¶éœ€è¦ 5 ç§’ï¼Œå¤„ç†ä¸€ä¸ªæ–‡ä»¶éœ€è¦ 2 ç§’ã€‚å¤„ç†ä¸¤ä¸ªæ–‡ä»¶åˆ™éœ€è¦ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("5ç§’è¯»å–æ–‡ä»¶A\n2ç§’å¤„ç†æ–‡ä»¶A\n5ç§’è¯»å–æ–‡ä»¶B\n2ç§’å¤„ç†æ–‡ä»¶B\n---------------------\næ€»å…±éœ€è¦14ç§’\n")])])]),s("p",[t._v("ä»ç£ç›˜ä¸­è¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼Œå¤§éƒ¨åˆ†çš„ CPU æ—¶é—´ç”¨äºç­‰å¾…ç£ç›˜å»è¯»å–æ•°æ®ã€‚åœ¨è¿™æ®µæ—¶é—´é‡Œï¼ŒCPU éå¸¸çš„ç©ºé—²ã€‚å®ƒå¯ä»¥åšä¸€äº›åˆ«çš„äº‹æƒ…ã€‚é€šè¿‡æ”¹å˜æ“ä½œçš„é¡ºåºï¼Œå°±èƒ½å¤Ÿæ›´å¥½çš„ä½¿ç”¨ CPU èµ„æºã€‚çœ‹ä¸‹é¢çš„é¡ºåºï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("5ç§’è¯»å–æ–‡ä»¶A\n5ç§’è¯»å–æ–‡ä»¶B + 2ç§’å¤„ç†æ–‡ä»¶A\n2ç§’å¤„ç†æ–‡ä»¶B\n---------------------\næ€»å…±éœ€è¦12ç§’\n")])])]),s("p",[t._v("CPU ç­‰å¾…ç¬¬ä¸€ä¸ªæ–‡ä»¶è¢«è¯»å–å®Œã€‚ç„¶åå¼€å§‹è¯»å–ç¬¬äºŒä¸ªæ–‡ä»¶ã€‚å½“ç¬¬äºŒæ–‡ä»¶åœ¨è¢«è¯»å–çš„æ—¶å€™ï¼ŒCPU ä¼šå»å¤„ç†ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚è®°ä½ï¼Œåœ¨ç­‰å¾…ç£ç›˜è¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼ŒCPU å¤§ éƒ¨åˆ†æ—¶é—´æ˜¯ç©ºé—²çš„ã€‚")]),t._v(" "),s("p",[t._v("æ€»çš„è¯´æ¥ï¼ŒCPU èƒ½å¤Ÿåœ¨ç­‰å¾… IO çš„æ—¶å€™åšä¸€äº›å…¶ä»–çš„äº‹æƒ…ã€‚è¿™ä¸ªä¸ä¸€å®šå°±æ˜¯ç£ç›˜ IOã€‚å®ƒä¹Ÿå¯ä»¥æ˜¯ç½‘ç»œçš„ IOï¼Œæˆ–è€…ç”¨æˆ·è¾“å…¥ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œç½‘ç»œå’Œç£ç›˜çš„ IO æ¯” CPU å’Œå†…å­˜çš„ IO æ…¢çš„å¤šã€‚")]),t._v(" "),s("h3",{attrs:{id:"_2-2-ç¨‹åºå“åº”æ›´å¿«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-ç¨‹åºå“åº”æ›´å¿«"}},[t._v("#")]),t._v(" 2.2. ç¨‹åºå“åº”æ›´å¿«")]),t._v(" "),s("p",[t._v("å°†ä¸€ä¸ªå•çº¿ç¨‹åº”ç”¨ç¨‹åºå˜æˆå¤šçº¿ç¨‹åº”ç”¨ç¨‹åºçš„å¦ä¸€ä¸ªå¸¸è§çš„ç›®çš„æ˜¯å®ç°ä¸€ä¸ªå“åº”æ›´å¿«çš„åº”ç”¨ç¨‹åºã€‚è®¾æƒ³ä¸€ä¸ªæœåŠ¡å™¨åº”ç”¨ï¼Œå®ƒåœ¨æŸä¸€ä¸ªç«¯å£ç›‘å¬è¿›æ¥çš„è¯·æ±‚ã€‚å½“ä¸€ä¸ªè¯·æ±‚åˆ°æ¥æ—¶ï¼Œå®ƒå»å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œç„¶åå†è¿”å›å»ç›‘å¬ã€‚")]),t._v(" "),s("p",[t._v("æœåŠ¡å™¨çš„æµç¨‹å¦‚ä¸‹æ‰€è¿°ï¼š")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server is active"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" request\n    process request\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å¦‚æœä¸€ä¸ªè¯·æ±‚éœ€è¦å ç”¨å¤§é‡çš„æ—¶é—´æ¥å¤„ç†ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…æ–°çš„å®¢æˆ·ç«¯å°±æ— æ³•å‘é€è¯·æ±‚ç»™æœåŠ¡ç«¯ã€‚åªæœ‰æœåŠ¡å™¨åœ¨ç›‘å¬çš„æ—¶å€™ï¼Œè¯·æ±‚æ‰èƒ½è¢«æ¥æ”¶ã€‚å¦ä¸€ç§è®¾è®¡æ˜¯ï¼Œç›‘å¬çº¿ç¨‹æŠŠè¯·æ±‚ä¼ é€’ç»™å·¥ä½œè€…çº¿ç¨‹(worker thread)ï¼Œç„¶åç«‹åˆ»è¿”å›å»ç›‘å¬ã€‚è€Œå·¥ä½œè€…çº¿ç¨‹åˆ™èƒ½å¤Ÿå¤„ç†è¿™ä¸ªè¯·æ±‚å¹¶å‘é€ä¸€ä¸ªå›å¤ç»™å®¢æˆ·ç«¯ã€‚è¿™ç§è®¾è®¡å¦‚ä¸‹æ‰€è¿°ï¼š")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server is active"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" request\n    hand request "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("worker")]),t._v(" thread\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("è¿™ç§æ–¹å¼ï¼ŒæœåŠ¡ç«¯çº¿ç¨‹è¿…é€Ÿåœ°è¿”å›å»ç›‘å¬ã€‚å› æ­¤ï¼Œæ›´å¤šçš„å®¢æˆ·ç«¯èƒ½å¤Ÿå‘é€è¯·æ±‚ç»™æœåŠ¡ç«¯ã€‚è¿™ä¸ªæœåŠ¡ä¹Ÿå˜å¾—å“åº”æ›´å¿«ã€‚")]),t._v(" "),s("p",[t._v("æ¡Œé¢åº”ç”¨ä¹Ÿæ˜¯åŒæ ·å¦‚æ­¤ã€‚å¦‚æœä½ ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å¼€å§‹è¿è¡Œä¸€ä¸ªè€—æ—¶çš„ä»»åŠ¡ï¼Œè¿™ä¸ªçº¿ç¨‹æ—¢è¦æ‰§è¡Œä»»åŠ¡åˆè¦æ›´æ–°çª—å£å’ŒæŒ‰é’®ï¼Œé‚£ä¹ˆåœ¨ä»»åŠ¡æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªåº”ç”¨ç¨‹åºçœ‹èµ·æ¥å¥½åƒæ²¡æœ‰ååº”ä¸€æ ·ã€‚ç›¸åï¼Œä»»åŠ¡å¯ä»¥ä¼ é€’ç»™å·¥ä½œè€…çº¿ç¨‹ï¼ˆworker thread)ã€‚å½“å·¥ä½œè€…çº¿ç¨‹åœ¨ç¹å¿™åœ°å¤„ç†ä»»åŠ¡çš„æ—¶å€™ï¼Œçª—å£çº¿ç¨‹å¯ä»¥è‡ªç”±åœ°å“åº”å…¶ä»–ç”¨æˆ·çš„è¯·æ±‚ã€‚å½“å·¥ä½œè€…çº¿ç¨‹å®Œæˆä»»åŠ¡çš„æ—¶å€™ï¼Œå®ƒå‘é€ä¿¡å·ç»™çª—å£çº¿ç¨‹ã€‚çª—å£çº¿ç¨‹ä¾¿å¯ä»¥æ›´æ–°åº”ç”¨ç¨‹åºçª—å£ï¼Œå¹¶æ˜¾ç¤ºä»»åŠ¡çš„ç»“æœã€‚å¯¹ç”¨æˆ·è€Œè¨€ï¼Œè¿™ç§å…·æœ‰å·¥ä½œè€…çº¿ç¨‹è®¾è®¡çš„ç¨‹åºæ˜¾å¾—å“åº”é€Ÿåº¦æ›´å¿«ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_2-3-å¹¶å‘çš„é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-å¹¶å‘çš„é—®é¢˜"}},[t._v("#")]),t._v(" 2.3. å¹¶å‘çš„é—®é¢˜")]),t._v(" "),s("p",[t._v("ä»»ä½•äº‹ç‰©éƒ½æœ‰åˆ©å¼Šï¼Œå¹¶å‘ä¹Ÿä¸ä¾‹å¤–ã€‚")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬çŸ¥é“äº†å¹¶å‘å¸¦æ¥çš„å¥½å¤„ï¼šæå‡èµ„æºåˆ©ç”¨ç‡ã€ç¨‹åºå“åº”æ›´å¿«ï¼ŒåŒæ—¶ä¹Ÿè¦è®¤è¯†åˆ°å¹¶å‘å¸¦æ¥çš„é—®é¢˜ï¼Œä¸»è¦æœ‰ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å®‰å…¨æ€§é—®é¢˜")]),t._v(" "),s("li",[t._v("æ´»è·ƒæ€§é—®é¢˜")]),t._v(" "),s("li",[t._v("æ€§èƒ½é—®é¢˜")])]),t._v(" "),s("p",[t._v("ä¸‹é¢ä¼šä¸€ä¸€è®²è§£ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_3-å®‰å…¨æ€§é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-å®‰å…¨æ€§é—®é¢˜"}},[t._v("#")]),t._v(" 3. å®‰å…¨æ€§é—®é¢˜")]),t._v(" "),s("p",[t._v("å¹¶å‘æœ€é‡è¦çš„é—®é¢˜æ˜¯å¹¶å‘å®‰å…¨é—®é¢˜ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("å¹¶å‘å®‰å…¨")]),t._v("ï¼šæ˜¯æŒ‡ä¿è¯ç¨‹åºçš„æ­£ç¡®æ€§ï¼Œä½¿å¾—å¹¶å‘å¤„ç†ç»“æœç¬¦åˆé¢„æœŸã€‚")]),t._v(" "),s("p",[t._v("å¹¶å‘å®‰å…¨éœ€è¦ä¿è¯å‡ ä¸ªåŸºæœ¬ç‰¹æ€§ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å¯è§æ€§")]),t._v(" - æ˜¯ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå…±äº«å˜é‡ï¼Œå…¶çŠ¶æ€èƒ½å¤Ÿç«‹å³è¢«å…¶ä»–çº¿ç¨‹çŸ¥æ™“ï¼Œé€šå¸¸è¢«è§£é‡Šä¸ºå°†çº¿ç¨‹æœ¬åœ°çŠ¶æ€åæ˜ åˆ°ä¸»å†…å­˜ä¸Šï¼Œ"),s("code",[t._v("volatile")]),t._v(" å°±æ˜¯è´Ÿè´£ä¿è¯å¯è§æ€§çš„ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åŸå­æ€§")]),t._v(" - ç®€å•è¯´å°±æ˜¯ç›¸å…³æ“ä½œä¸ä¼šä¸­é€”è¢«å…¶ä»–çº¿ç¨‹å¹²æ‰°ï¼Œä¸€èˆ¬é€šè¿‡åŒæ­¥æœºåˆ¶ï¼ˆåŠ é”ï¼š"),s("code",[t._v("sychronized")]),t._v("ã€"),s("code",[t._v("Lock")]),t._v("ï¼‰å®ç°ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æœ‰åºæ€§")]),t._v(" - æ˜¯ä¿è¯çº¿ç¨‹å†…ä¸²è¡Œè¯­ä¹‰ï¼Œé¿å…æŒ‡ä»¤é‡æ’ç­‰ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_3-1-ç¼“å­˜å¯¼è‡´çš„å¯è§æ€§é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-ç¼“å­˜å¯¼è‡´çš„å¯è§æ€§é—®é¢˜"}},[t._v("#")]),t._v(" 3.1. ç¼“å­˜å¯¼è‡´çš„å¯è§æ€§é—®é¢˜")]),t._v(" "),s("blockquote",[s("p",[t._v("ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°ï¼Œç§°ä¸º "),s("strong",[t._v("å¯è§æ€§")]),t._v("ã€‚")])]),t._v(" "),s("p",[t._v("åœ¨å•æ ¸æ—¶ä»£ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯åœ¨ä¸€é¢— CPU ä¸Šæ‰§è¡Œï¼ŒCPU ç¼“å­˜ä¸å†…å­˜çš„æ•°æ®ä¸€è‡´æ€§å®¹æ˜“è§£å†³ã€‚å› ä¸ºæ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯æ“ä½œåŒä¸€ä¸ª CPU çš„ç¼“å­˜ï¼Œä¸€ä¸ªçº¿ç¨‹å¯¹ç¼“å­˜çš„å†™ï¼Œå¯¹å¦å¤–ä¸€ä¸ªçº¿ç¨‹æ¥è¯´ä¸€å®šæ˜¯å¯è§çš„ã€‚ä¾‹å¦‚åœ¨ä¸‹é¢çš„å›¾ä¸­ï¼Œçº¿ç¨‹ A å’Œçº¿ç¨‹ B éƒ½æ˜¯æ“ä½œåŒä¸€ä¸ª CPU é‡Œé¢çš„ç¼“å­˜ï¼Œæ‰€ä»¥çº¿ç¨‹ A æ›´æ–°äº†å˜é‡ V çš„å€¼ï¼Œé‚£ä¹ˆçº¿ç¨‹ B ä¹‹åå†è®¿é—®å˜é‡ Vï¼Œå¾—åˆ°çš„ä¸€å®šæ˜¯ V çš„æœ€æ–°å€¼ï¼ˆçº¿ç¨‹ A å†™è¿‡çš„å€¼ï¼‰ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20200701110313.png",alt:"img"}})]),t._v(" "),s("p",[t._v("å¤šæ ¸æ—¶ä»£ï¼Œæ¯é¢— CPU éƒ½æœ‰è‡ªå·±çš„ç¼“å­˜ï¼Œè¿™æ—¶ CPU ç¼“å­˜ä¸å†…å­˜çš„æ•°æ®ä¸€è‡´æ€§å°±æ²¡é‚£ä¹ˆå®¹æ˜“è§£å†³äº†ï¼Œå½“å¤šä¸ªçº¿ç¨‹åœ¨ä¸åŒçš„ CPU ä¸Šæ‰§è¡Œæ—¶ï¼Œè¿™äº›çº¿ç¨‹æ“ä½œçš„æ˜¯ä¸åŒçš„ CPU ç¼“å­˜ã€‚æ¯”å¦‚ä¸‹å›¾ä¸­ï¼Œçº¿ç¨‹ A æ“ä½œçš„æ˜¯ CPU-1 ä¸Šçš„ç¼“å­˜ï¼Œè€Œçº¿ç¨‹ B æ“ä½œçš„æ˜¯ CPU-2 ä¸Šçš„ç¼“å­˜ï¼Œå¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹ A å¯¹å˜é‡ V çš„æ“ä½œå¯¹äºçº¿ç¨‹ B è€Œè¨€å°±ä¸å…·å¤‡å¯è§æ€§äº†ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20200701110431.png",alt:"img"}})]),t._v(" "),s("p",[t._v("ã€ç¤ºä¾‹ã€‘çº¿ç¨‹ä¸å®‰å…¨çš„ç¤ºä¾‹")]),t._v(" "),s("p",[t._v("ä¸‹é¢æˆ‘ä»¬å†ç”¨ä¸€æ®µä»£ç æ¥éªŒè¯ä¸€ä¸‹å¤šæ ¸åœºæ™¯ä¸‹çš„å¯è§æ€§é—®é¢˜ã€‚ä¸‹é¢çš„ä»£ç ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡ add10K() æ–¹æ³•ï¼Œéƒ½ä¼šå¾ªç¯ 10000 æ¬¡ count+=1 æ“ä½œã€‚åœ¨ calc() æ–¹æ³•ä¸­æˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹è°ƒç”¨ä¸€æ¬¡ add10K() æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥æƒ³ä¸€æƒ³æ‰§è¡Œ calc() æ–¹æ³•å¾—åˆ°çš„ç»“æœåº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿ")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Test")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add10K")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" idx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("idx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("calc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Test")]),t._v(" test "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œ add() æ“ä½œ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),t._v(" th1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add10K")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),t._v(" th2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add10K")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹")]),t._v("\n    th1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    th2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç­‰å¾…ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œç»“æŸ")]),t._v("\n    th1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    th2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ç›´è§‰å‘Šè¯‰æˆ‘ä»¬åº”è¯¥æ˜¯ 20000ï¼Œå› ä¸ºåœ¨å•çº¿ç¨‹é‡Œè°ƒç”¨ä¸¤æ¬¡ add10K() æ–¹æ³•ï¼Œcount çš„å€¼å°±æ˜¯ 20000ï¼Œä½†å®é™…ä¸Š calc() çš„æ‰§è¡Œç»“æœæ˜¯ä¸ª 10000 åˆ° 20000 ä¹‹é—´çš„éšæœºæ•°ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬å‡è®¾çº¿ç¨‹ A å’Œçº¿ç¨‹ B åŒæ—¶å¼€å§‹æ‰§è¡Œï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡éƒ½ä¼šå°† count=0 è¯»åˆ°å„è‡ªçš„ CPU ç¼“å­˜é‡Œï¼Œæ‰§è¡Œå®Œ count+=1 ä¹‹åï¼Œå„è‡ª CPU ç¼“å­˜é‡Œçš„å€¼éƒ½æ˜¯ 1ï¼ŒåŒæ—¶å†™å…¥å†…å­˜åï¼Œæˆ‘ä»¬ä¼šå‘ç°å†…å­˜ä¸­æ˜¯ 1ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„ 2ã€‚ä¹‹åç”±äºå„è‡ªçš„ CPU ç¼“å­˜é‡Œéƒ½æœ‰äº† count çš„å€¼ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½æ˜¯åŸºäº CPU ç¼“å­˜é‡Œçš„ count å€¼æ¥è®¡ç®—ï¼Œæ‰€ä»¥å¯¼è‡´æœ€ç»ˆ count çš„å€¼éƒ½æ˜¯å°äº 20000 çš„ã€‚è¿™å°±æ˜¯ç¼“å­˜çš„å¯è§æ€§é—®é¢˜ã€‚")]),t._v(" "),s("p",[t._v("å¾ªç¯ 10000 æ¬¡ count+=1 æ“ä½œå¦‚æœæ”¹ä¸ºå¾ªç¯ 1 äº¿æ¬¡ï¼Œä½ ä¼šå‘ç°æ•ˆæœæ›´æ˜æ˜¾ï¼Œæœ€ç»ˆ count çš„å€¼æ¥è¿‘ 1 äº¿ï¼Œè€Œä¸æ˜¯ 2 äº¿ã€‚å¦‚æœå¾ªç¯ 10000 æ¬¡ï¼Œcount çš„å€¼æ¥è¿‘ 20000ï¼ŒåŸå› æ˜¯ä¸¤ä¸ªçº¿ç¨‹ä¸æ˜¯åŒæ—¶å¯åŠ¨çš„ï¼Œæœ‰ä¸€ä¸ªæ—¶å·®ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20200701110615.png",alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"_3-2-çº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„åŸå­æ€§é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-çº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„åŸå­æ€§é—®é¢˜"}},[t._v("#")]),t._v(" 3.2. çº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„åŸå­æ€§é—®é¢˜")]),t._v(" "),s("p",[t._v("ç”±äº IO å¤ªæ…¢ï¼Œæ—©æœŸçš„æ“ä½œç³»ç»Ÿå°±å‘æ˜äº†å¤šè¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿå…è®¸æŸä¸ªè¿›ç¨‹æ‰§è¡Œä¸€å°æ®µæ—¶é—´ï¼ˆç§°ä¸º "),s("strong",[t._v("æ—¶é—´ç‰‡")]),t._v("ï¼‰ã€‚")]),t._v(" "),s("p",[t._v("åœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…ï¼Œå¦‚æœä¸€ä¸ªè¿›ç¨‹è¿›è¡Œä¸€ä¸ª IO æ“ä½œï¼Œä¾‹å¦‚è¯»ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™è¯¥è¿›ç¨‹å¯ä»¥æŠŠè‡ªå·±æ ‡è®°ä¸ºâ€œä¼‘çœ çŠ¶æ€â€å¹¶å‡ºè®© CPU çš„ä½¿ç”¨æƒï¼Œå¾…æ–‡ä»¶è¯»è¿›å†…å­˜ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠè¿™ä¸ªä¼‘çœ çš„è¿›ç¨‹å”¤é†’ï¼Œå”¤é†’åçš„è¿›ç¨‹å°±æœ‰æœºä¼šé‡æ–°è·å¾— CPU çš„ä½¿ç”¨æƒäº†ã€‚")]),t._v(" "),s("p",[t._v("è¿™é‡Œçš„è¿›ç¨‹åœ¨ç­‰å¾… IO æ—¶ä¹‹æ‰€ä»¥ä¼šé‡Šæ”¾ CPU ä½¿ç”¨æƒï¼Œæ˜¯ä¸ºäº†è®© CPU åœ¨è¿™æ®µç­‰å¾…æ—¶é—´é‡Œå¯ä»¥åšåˆ«çš„äº‹æƒ…ï¼Œè¿™æ ·ä¸€æ¥ CPU çš„ä½¿ç”¨ç‡å°±ä¸Šæ¥äº†ï¼›æ­¤å¤–ï¼Œå¦‚æœè¿™æ—¶æœ‰å¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¹Ÿè¯»æ–‡ä»¶ï¼Œè¯»æ–‡ä»¶çš„æ“ä½œå°±ä¼šæ’é˜Ÿï¼Œç£ç›˜é©±åŠ¨åœ¨å®Œæˆä¸€ä¸ªè¿›ç¨‹çš„è¯»æ“ä½œåï¼Œå‘ç°æœ‰æ’é˜Ÿçš„ä»»åŠ¡ï¼Œå°±ä¼šç«‹å³å¯åŠ¨ä¸‹ä¸€ä¸ªè¯»æ“ä½œï¼Œè¿™æ · IO çš„ä½¿ç”¨ç‡ä¹Ÿä¸Šæ¥äº†ã€‚")]),t._v(" "),s("p",[t._v("æ—©æœŸçš„æ“ä½œç³»ç»ŸåŸºäºè¿›ç¨‹æ¥è°ƒåº¦ CPUï¼Œä¸åŒè¿›ç¨‹é—´æ˜¯ä¸å…±äº«å†…å­˜ç©ºé—´çš„ï¼Œæ‰€ä»¥è¿›ç¨‹è¦åšä»»åŠ¡åˆ‡æ¢å°±è¦åˆ‡æ¢å†…å­˜æ˜ å°„åœ°å€ï¼Œè€Œä¸€ä¸ªè¿›ç¨‹åˆ›å»ºçš„æ‰€æœ‰çº¿ç¨‹ï¼Œéƒ½æ˜¯å…±äº«ä¸€ä¸ªå†…å­˜ç©ºé—´çš„ï¼Œæ‰€ä»¥çº¿ç¨‹åšä»»åŠ¡åˆ‡æ¢æˆæœ¬å°±å¾ˆä½äº†ã€‚ç°ä»£çš„æ“ä½œç³»ç»Ÿéƒ½åŸºäºæ›´è½»é‡çš„çº¿ç¨‹æ¥è°ƒåº¦ï¼Œç°åœ¨æˆ‘ä»¬æåˆ°çš„â€œä»»åŠ¡åˆ‡æ¢â€éƒ½æ˜¯æŒ‡â€œçº¿ç¨‹åˆ‡æ¢â€ã€‚")]),t._v(" "),s("p",[t._v("Java å¹¶å‘ç¨‹åºéƒ½æ˜¯åŸºäºå¤šçº¿ç¨‹çš„ï¼Œè‡ªç„¶ä¹Ÿä¼šæ¶‰åŠåˆ°ä»»åŠ¡åˆ‡æ¢ï¼Œä¹Ÿè®¸ä½ æƒ³ä¸åˆ°ï¼Œä»»åŠ¡åˆ‡æ¢ç«Ÿç„¶ä¹Ÿæ˜¯å¹¶å‘ç¼–ç¨‹é‡Œè¯¡å¼‚ Bug çš„æºå¤´ä¹‹ä¸€ã€‚ä»»åŠ¡åˆ‡æ¢çš„æ—¶æœºå¤§å¤šæ•°æ˜¯åœ¨æ—¶é—´ç‰‡ç»“æŸçš„æ—¶å€™ï¼Œæˆ‘ä»¬ç°åœ¨åŸºæœ¬éƒ½ä½¿ç”¨é«˜çº§è¯­è¨€ç¼–ç¨‹ï¼Œé«˜çº§è¯­è¨€é‡Œä¸€æ¡è¯­å¥å¾€å¾€éœ€è¦å¤šæ¡ CPU æŒ‡ä»¤å®Œæˆï¼Œä¾‹å¦‚ä¸Šé¢ä»£ç ä¸­çš„ "),s("code",[t._v("count += 1")]),t._v("ï¼Œè‡³å°‘éœ€è¦ä¸‰æ¡ CPU æŒ‡ä»¤ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("æŒ‡ä»¤ 1ï¼šé¦–å…ˆï¼Œéœ€è¦æŠŠå˜é‡ count ä»å†…å­˜åŠ è½½åˆ° CPU çš„å¯„å­˜å™¨ï¼›")]),t._v(" "),s("li",[t._v("æŒ‡ä»¤ 2ï¼šä¹‹åï¼Œåœ¨å¯„å­˜å™¨ä¸­æ‰§è¡Œ +1 æ“ä½œï¼›")]),t._v(" "),s("li",[t._v("æŒ‡ä»¤ 3ï¼šæœ€åï¼Œå°†ç»“æœå†™å…¥å†…å­˜ï¼ˆç¼“å­˜æœºåˆ¶å¯¼è‡´å¯èƒ½å†™å…¥çš„æ˜¯ CPU ç¼“å­˜è€Œä¸æ˜¯å†…å­˜ï¼‰ã€‚")])]),t._v(" "),s("p",[t._v("æ“ä½œç³»ç»Ÿåšä»»åŠ¡åˆ‡æ¢ï¼Œå¯ä»¥å‘ç”Ÿåœ¨ä»»ä½•ä¸€æ¡"),s("strong",[t._v("CPU æŒ‡ä»¤")]),t._v("æ‰§è¡Œå®Œï¼Œæ˜¯çš„ï¼Œæ˜¯ CPU æŒ‡ä»¤ï¼Œè€Œä¸æ˜¯é«˜çº§è¯­è¨€é‡Œçš„ä¸€æ¡è¯­å¥ã€‚å¯¹äºä¸Šé¢çš„ä¸‰æ¡æŒ‡ä»¤æ¥è¯´ï¼Œæˆ‘ä»¬å‡è®¾ count=0ï¼Œå¦‚æœçº¿ç¨‹ A åœ¨æŒ‡ä»¤ 1 æ‰§è¡Œå®Œååšçº¿ç¨‹åˆ‡æ¢ï¼Œçº¿ç¨‹ A å’Œçº¿ç¨‹ B æŒ‰ç…§ä¸‹å›¾çš„åºåˆ—æ‰§è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šå‘ç°ä¸¤ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œäº† count+=1 çš„æ“ä½œï¼Œä½†æ˜¯å¾—åˆ°çš„ç»“æœä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„ 2ï¼Œè€Œæ˜¯ 1ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20200701110946.png",alt:"img"}})]),t._v(" "),s("p",[t._v("æˆ‘ä»¬æ½œæ„è¯†é‡Œé¢è§‰å¾— count+=1 è¿™ä¸ªæ“ä½œæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•´ä½“ï¼Œå°±åƒä¸€ä¸ªåŸå­ä¸€æ ·ï¼Œçº¿ç¨‹çš„åˆ‡æ¢å¯ä»¥å‘ç”Ÿåœ¨ count+=1 ä¹‹å‰ï¼Œä¹Ÿå¯ä»¥å‘ç”Ÿåœ¨ count+=1 ä¹‹åï¼Œä½†å°±æ˜¯ä¸ä¼šå‘ç”Ÿåœ¨ä¸­é—´ã€‚"),s("strong",[t._v("æˆ‘ä»¬æŠŠä¸€ä¸ªæˆ–è€…å¤šä¸ªæ“ä½œåœ¨ CPU æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¸è¢«ä¸­æ–­çš„ç‰¹æ€§ç§°ä¸ºåŸå­æ€§")]),t._v("ã€‚CPU èƒ½ä¿è¯çš„åŸå­æ“ä½œæ˜¯ CPU æŒ‡ä»¤çº§åˆ«çš„ï¼Œè€Œä¸æ˜¯é«˜çº§è¯­è¨€çš„æ“ä½œç¬¦ï¼Œè¿™æ˜¯è¿èƒŒæˆ‘ä»¬ç›´è§‰çš„åœ°æ–¹ã€‚å› æ­¤ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨é«˜çº§è¯­è¨€å±‚é¢ä¿è¯æ“ä½œçš„åŸå­æ€§ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_3-3-ç¼–è¯‘ä¼˜åŒ–å¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-ç¼–è¯‘ä¼˜åŒ–å¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜"}},[t._v("#")]),t._v(" 3.3. ç¼–è¯‘ä¼˜åŒ–å¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜")]),t._v(" "),s("p",[t._v("é‚£å¹¶å‘ç¼–ç¨‹é‡Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–æœ‰è¿ç›´è§‰å®¹æ˜“å¯¼è‡´è¯¡å¼‚ Bug çš„æŠ€æœ¯å‘¢ï¼Ÿæœ‰çš„ï¼Œå°±æ˜¯æœ‰åºæ€§ã€‚é¡¾åæ€ä¹‰ï¼Œæœ‰åºæ€§æŒ‡çš„æ˜¯ç¨‹åºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚ç¼–è¯‘å™¨ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œæœ‰æ—¶å€™ä¼šæ”¹å˜ç¨‹åºä¸­è¯­å¥çš„å…ˆåé¡ºåºï¼Œä¾‹å¦‚ç¨‹åºä¸­ï¼šâ€œa=6ï¼›b=7ï¼›â€ç¼–è¯‘å™¨ä¼˜åŒ–åå¯èƒ½å˜æˆâ€œb=7ï¼›a=6ï¼›â€ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç¼–è¯‘å™¨è°ƒæ•´äº†è¯­å¥çš„é¡ºåºï¼Œä½†æ˜¯ä¸å½±å“ç¨‹åºçš„æœ€ç»ˆç»“æœã€‚ä¸è¿‡æœ‰æ—¶å€™ç¼–è¯‘å™¨åŠè§£é‡Šå™¨çš„ä¼˜åŒ–å¯èƒ½å¯¼è‡´æ„æƒ³ä¸åˆ°çš„ Bugã€‚")]),t._v(" "),s("p",[t._v("åœ¨ Java é¢†åŸŸä¸€ä¸ªç»å…¸çš„æ¡ˆä¾‹å°±æ˜¯åˆ©ç”¨åŒé‡æ£€æŸ¥åˆ›å»ºå•ä¾‹å¯¹è±¡ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼šåœ¨è·å–å®ä¾‹ getInstance() çš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ¤æ–­ instance æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™é”å®š Singleton.class å¹¶å†æ¬¡æ£€æŸ¥ instance æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœè¿˜ä¸ºç©ºåˆ™åˆ›å»º Singleton çš„ä¸€ä¸ªå®ä¾‹ã€‚")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹ Aã€B åŒæ—¶è°ƒç”¨ getInstance() æ–¹æ³•ï¼Œä»–ä»¬ä¼šåŒæ—¶å‘ç° "),s("code",[t._v("instance == null")]),t._v(" ï¼Œäºæ˜¯åŒæ—¶å¯¹ Singleton.class åŠ é”ï¼Œæ­¤æ—¶ JVM ä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤ŸåŠ é”æˆåŠŸï¼ˆå‡è®¾æ˜¯çº¿ç¨‹ Aï¼‰ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹åˆ™ä¼šå¤„äºç­‰å¾…çŠ¶æ€ï¼ˆå‡è®¾æ˜¯çº¿ç¨‹ Bï¼‰ï¼›çº¿ç¨‹ A ä¼šåˆ›å»ºä¸€ä¸ª Singleton å®ä¾‹ï¼Œä¹‹åé‡Šæ”¾é”ï¼Œé”é‡Šæ”¾åï¼Œçº¿ç¨‹ B è¢«å”¤é†’ï¼Œçº¿ç¨‹ B å†æ¬¡å°è¯•åŠ é”ï¼Œæ­¤æ—¶æ˜¯å¯ä»¥åŠ é”æˆåŠŸçš„ï¼ŒåŠ é”æˆåŠŸåï¼Œçº¿ç¨‹ B æ£€æŸ¥ "),s("code",[t._v("instance == null")]),t._v(" æ—¶ä¼šå‘ç°ï¼Œå·²ç»åˆ›å»ºè¿‡ Singleton å®ä¾‹äº†ï¼Œæ‰€ä»¥çº¿ç¨‹ B ä¸ä¼šå†åˆ›å»ºä¸€ä¸ª Singleton å®ä¾‹ã€‚")]),t._v(" "),s("p",[t._v("è¿™çœ‹ä¸Šå»ä¸€åˆ‡éƒ½å¾ˆå®Œç¾ï¼Œæ— æ‡ˆå¯å‡»ï¼Œä½†å®é™…ä¸Šè¿™ä¸ª getInstance() æ–¹æ³•å¹¶ä¸å®Œç¾ã€‚é—®é¢˜å‡ºåœ¨å“ªé‡Œå‘¢ï¼Ÿå‡ºåœ¨ new æ“ä½œä¸Šï¼Œæˆ‘ä»¬ä»¥ä¸ºçš„ new æ“ä½œåº”è¯¥æ˜¯ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("åˆ†é…ä¸€å—å†…å­˜ Mï¼›")]),t._v(" "),s("li",[t._v("åœ¨å†…å­˜ M ä¸Šåˆå§‹åŒ– Singleton å¯¹è±¡ï¼›")]),t._v(" "),s("li",[t._v("ç„¶å M çš„åœ°å€èµ‹å€¼ç»™ instance å˜é‡ã€‚")])]),t._v(" "),s("p",[t._v("ä½†æ˜¯å®é™…ä¸Šä¼˜åŒ–åçš„æ‰§è¡Œè·¯å¾„å´æ˜¯è¿™æ ·çš„ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("åˆ†é…ä¸€å—å†…å­˜ Mï¼›")]),t._v(" "),s("li",[t._v("å°† M çš„åœ°å€èµ‹å€¼ç»™ instance å˜é‡ï¼›")]),t._v(" "),s("li",[t._v("æœ€ååœ¨å†…å­˜ M ä¸Šåˆå§‹åŒ– Singleton å¯¹è±¡ã€‚")])]),t._v(" "),s("p",[t._v("ä¼˜åŒ–åä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å‡è®¾çº¿ç¨‹ A å…ˆæ‰§è¡Œ getInstance() æ–¹æ³•ï¼Œå½“æ‰§è¡Œå®ŒæŒ‡ä»¤ 2 æ—¶æ°å¥½å‘ç”Ÿäº†çº¿ç¨‹åˆ‡æ¢ï¼Œåˆ‡æ¢åˆ°äº†çº¿ç¨‹ B ä¸Šï¼›å¦‚æœæ­¤æ—¶çº¿ç¨‹ B ä¹Ÿæ‰§è¡Œ getInstance() æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹ B åœ¨æ‰§è¡Œç¬¬ä¸€ä¸ªåˆ¤æ–­æ—¶ä¼šå‘ç° "),s("code",[t._v("instance != null")]),t._v(" ï¼Œæ‰€ä»¥ç›´æ¥è¿”å› instanceï¼Œè€Œæ­¤æ—¶çš„ instance æ˜¯æ²¡æœ‰åˆå§‹åŒ–è¿‡çš„ï¼Œå¦‚æœæˆ‘ä»¬è¿™ä¸ªæ—¶å€™è®¿é—® instance çš„æˆå‘˜å˜é‡å°±å¯èƒ½è§¦å‘ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20200701111050.png",alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"_3-4-ä¿è¯å¹¶å‘å®‰å…¨çš„æ€è·¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-ä¿è¯å¹¶å‘å®‰å…¨çš„æ€è·¯"}},[t._v("#")]),t._v(" 3.4. ä¿è¯å¹¶å‘å®‰å…¨çš„æ€è·¯")]),t._v(" "),s("h4",{attrs:{id:"äº’æ–¥åŒæ­¥-é˜»å¡åŒæ­¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äº’æ–¥åŒæ­¥-é˜»å¡åŒæ­¥"}},[t._v("#")]),t._v(" äº’æ–¥åŒæ­¥ï¼ˆé˜»å¡åŒæ­¥ï¼‰")]),t._v(" "),s("p",[t._v("äº’æ–¥åŒæ­¥æ˜¯æœ€å¸¸è§çš„å¹¶å‘æ­£ç¡®æ€§ä¿éšœæ‰‹æ®µã€‚")]),t._v(" "),s("p",[s("strong",[t._v("åŒæ­¥æ˜¯æŒ‡åœ¨å¤šçº¿ç¨‹å¹¶å‘è®¿é—®å…±äº«æ•°æ®æ—¶ï¼Œä¿è¯å…±äº«æ•°æ®åœ¨åŒä¸€æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("äº’æ–¥æ˜¯å®ç°åŒæ­¥çš„ä¸€ç§æ‰‹æ®µã€‚ä¸´ç•ŒåŒºï¼ˆCritical Sectionsï¼‰ã€äº’æ–¥é‡ï¼ˆMutexï¼‰å’Œä¿¡å·é‡ï¼ˆSemaphoreï¼‰éƒ½æ˜¯ä¸»è¦çš„äº’æ–¥å®ç°æ–¹å¼ã€‚")]),t._v(" "),s("p",[t._v("æœ€å…¸å‹çš„æ¡ˆä¾‹æ˜¯ä½¿ç”¨ "),s("code",[t._v("synchronized")]),t._v(" æˆ– "),s("code",[t._v("Lock")]),t._v(" ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("äº’æ–¥åŒæ­¥æœ€ä¸»è¦çš„é—®é¢˜æ˜¯çº¿ç¨‹é˜»å¡å’Œå”¤é†’æ‰€å¸¦æ¥çš„æ€§èƒ½é—®é¢˜")]),t._v("ï¼Œäº’æ–¥åŒæ­¥å±äºä¸€ç§æ‚²è§‚çš„å¹¶å‘ç­–ç•¥ï¼Œæ€»æ˜¯è®¤ä¸ºåªè¦ä¸å»åšæ­£ç¡®çš„åŒæ­¥æªæ–½ï¼Œé‚£å°±è‚¯å®šä¼šå‡ºç°é—®é¢˜ã€‚æ— è®ºå…±äº«æ•°æ®æ˜¯å¦çœŸçš„ä¼šå‡ºç°ç«äº‰ï¼Œå®ƒéƒ½è¦è¿›è¡ŒåŠ é”ï¼ˆè¿™é‡Œè®¨è®ºçš„æ˜¯æ¦‚å¿µæ¨¡å‹ï¼Œå®é™…ä¸Šè™šæ‹Ÿæœºä¼šä¼˜åŒ–æ‰å¾ˆå¤§ä¸€éƒ¨åˆ†ä¸å¿…è¦çš„åŠ é”ï¼‰ã€ç”¨æˆ·æ€æ ¸å¿ƒæ€è½¬æ¢ã€ç»´æŠ¤é”è®¡æ•°å™¨å’Œæ£€æŸ¥æ˜¯å¦æœ‰è¢«é˜»å¡çš„çº¿ç¨‹éœ€è¦å”¤é†’ç­‰æ“ä½œã€‚")]),t._v(" "),s("h4",{attrs:{id:"éé˜»å¡åŒæ­¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#éé˜»å¡åŒæ­¥"}},[t._v("#")]),t._v(" éé˜»å¡åŒæ­¥")]),t._v(" "),s("p",[t._v("éšç€ç¡¬ä»¶æŒ‡ä»¤é›†çš„å‘å±•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŸºäºå†²çªæ£€æµ‹çš„ä¹è§‚å¹¶å‘ç­–ç•¥ï¼šå…ˆè¿›è¡Œæ“ä½œï¼Œå¦‚æœæ²¡æœ‰å…¶å®ƒçº¿ç¨‹äº‰ç”¨å…±äº«æ•°æ®ï¼Œé‚£æ“ä½œå°±æˆåŠŸäº†ï¼Œå¦åˆ™é‡‡å–è¡¥å¿æªæ–½ï¼ˆä¸æ–­åœ°é‡è¯•ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ï¼‰ã€‚è¿™ç§ä¹è§‚çš„å¹¶å‘ç­–ç•¥çš„è®¸å¤šå®ç°éƒ½ä¸éœ€è¦å°†çº¿ç¨‹é˜»å¡ï¼Œå› æ­¤è¿™ç§åŒæ­¥æ“ä½œç§°ä¸ºéé˜»å¡åŒæ­¥ã€‚")]),t._v(" "),s("p",[t._v("ä¸ºä»€ä¹ˆè¯´ä¹è§‚é”éœ€è¦ "),s("strong",[t._v("ç¡¬ä»¶æŒ‡ä»¤é›†çš„å‘å±•")]),t._v(" æ‰èƒ½è¿›è¡Œï¼Ÿå› ä¸ºéœ€è¦æ“ä½œå’Œå†²çªæ£€æµ‹è¿™ä¸¤ä¸ªæ­¥éª¤å…·å¤‡åŸå­æ€§ã€‚è€Œè¿™ç‚¹æ˜¯ç”±ç¡¬ä»¶æ¥å®Œæˆï¼Œå¦‚æœå†ä½¿ç”¨äº’æ–¥åŒæ­¥æ¥ä¿è¯å°±å¤±å»æ„ä¹‰äº†ã€‚")]),t._v(" "),s("p",[t._v("è¿™ç±»ä¹è§‚é”æŒ‡ä»¤å¸¸è§çš„æœ‰ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æµ‹è¯•å¹¶è®¾ç½®ï¼ˆTest-amd-Setï¼‰")]),t._v(" "),s("li",[t._v("è·å–å¹¶å¢åŠ ï¼ˆFetch-and-Incrementï¼‰")]),t._v(" "),s("li",[t._v("äº¤æ¢ï¼ˆSwapï¼‰")]),t._v(" "),s("li",[t._v("æ¯”è¾ƒå¹¶äº¤æ¢ï¼ˆCASï¼‰")]),t._v(" "),s("li",[t._v("åŠ è½½é“¾æ¥ã€æ¡ä»¶å­˜å‚¨ï¼ˆLoad-linked / Store-Conditionalï¼‰")])]),t._v(" "),s("p",[t._v("Java å…¸å‹åº”ç”¨åœºæ™¯ï¼šJ.U.C åŒ…ä¸­çš„åŸå­ç±»ï¼ˆåŸºäº "),s("code",[t._v("Unsafe")]),t._v(" ç±»çš„ CAS æ“ä½œï¼‰")]),t._v(" "),s("h4",{attrs:{id:"æ— åŒæ­¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ— åŒæ­¥"}},[t._v("#")]),t._v(" æ— åŒæ­¥")]),t._v(" "),s("p",[t._v("è¦ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¸ä¸€å®šéè¦è¿›è¡ŒåŒæ­¥ã€‚åŒæ­¥åªæ˜¯ä¿è¯å…±äº«æ•°æ®äº‰ç”¨æ—¶çš„æ­£ç¡®æ€§ï¼Œå¦‚æœä¸€ä¸ªæ–¹æ³•æœ¬æ¥å°±ä¸æ¶‰åŠå…±äº«æ•°æ®ï¼Œé‚£ä¹ˆè‡ªç„¶æ— é¡»åŒæ­¥ã€‚")]),t._v(" "),s("p",[t._v("Java ä¸­çš„ "),s("strong",[t._v("æ— åŒæ­¥æ–¹æ¡ˆ")]),t._v(" æœ‰ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å¯é‡å…¥ä»£ç ")]),t._v(" - ä¹Ÿå«çº¯ä»£ç ã€‚å¦‚æœä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒçš„ "),s("strong",[t._v("è¿”å›ç»“æœæ˜¯å¯ä»¥é¢„æµ‹çš„")]),t._v("ï¼Œå³åªè¦è¾“å…¥äº†ç›¸åŒçš„æ•°æ®ï¼Œå°±èƒ½è¿”å›ç›¸åŒçš„ç»“æœï¼Œé‚£å®ƒå°±æ»¡è¶³å¯é‡å…¥æ€§ï¼Œå½“ç„¶ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("çº¿ç¨‹æœ¬åœ°å­˜å‚¨")]),t._v(" - ä½¿ç”¨ "),s("strong",[s("code",[t._v("ThreadLocal")]),t._v(" ä¸ºå…±äº«å˜é‡åœ¨æ¯ä¸ªçº¿ç¨‹ä¸­éƒ½åˆ›å»ºäº†ä¸€ä¸ªæœ¬åœ°å‰¯æœ¬")]),t._v("ï¼Œè¿™ä¸ªå‰¯æœ¬åªèƒ½è¢«å½“å‰çº¿ç¨‹è®¿é—®ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•è®¿é—®ï¼Œé‚£ä¹ˆè‡ªç„¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"_4-æ´»è·ƒæ€§é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-æ´»è·ƒæ€§é—®é¢˜"}},[t._v("#")]),t._v(" 4. æ´»è·ƒæ€§é—®é¢˜")]),t._v(" "),s("h3",{attrs:{id:"_4-1-æ­»é”-deadlock"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-æ­»é”-deadlock"}},[t._v("#")]),t._v(" 4.1. æ­»é”ï¼ˆDeadlockï¼‰")]),t._v(" "),s("h4",{attrs:{id:"ä»€ä¹ˆæ˜¯æ­»é”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯æ­»é”"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯æ­»é”")]),t._v(" "),s("p",[t._v("å¤šä¸ªçº¿ç¨‹äº’ç›¸ç­‰å¾…å¯¹æ–¹é‡Šæ”¾é”ã€‚")]),t._v(" "),s("p",[t._v("æ­»é”æ˜¯å½“çº¿ç¨‹è¿›å…¥æ— é™æœŸç­‰å¾…çŠ¶æ€æ—¶å‘ç”Ÿçš„æƒ…å†µï¼Œå› ä¸ºæ‰€è¯·æ±‚çš„é”è¢«å¦ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹åˆç­‰å¾…ç¬¬ä¸€ä¸ªçº¿ç¨‹æŒæœ‰çš„å¦ä¸€ä¸ªé”ã€‚")]),t._v(" "),s("p",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/concurrent/deadlock.png"}})]),t._v("\n#### é¿å…æ­»é”\n"),s("p",[t._v("ï¼ˆ1ï¼‰æŒ‰åºåŠ é”")]),t._v(" "),s("p",[t._v("å½“å¤šä¸ªçº¿ç¨‹éœ€è¦ç›¸åŒçš„ä¸€äº›é”ï¼Œä½†æ˜¯æŒ‰ç…§ä¸åŒçš„é¡ºåºåŠ é”ï¼Œæ­»é”å°±å¾ˆå®¹æ˜“å‘ç”Ÿã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœèƒ½ç¡®ä¿æ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯æŒ‰ç…§ç›¸åŒçš„é¡ºåºè·å¾—é”ï¼Œé‚£ä¹ˆæ­»é”å°±ä¸ä¼šå‘ç”Ÿã€‚")]),t._v(" "),s("p",[t._v("æŒ‰ç…§é¡ºåºåŠ é”æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ­»é”é¢„é˜²æœºåˆ¶ã€‚ä½†æ˜¯ï¼Œè¿™ç§æ–¹å¼éœ€è¦ä½ äº‹å…ˆçŸ¥é“æ‰€æœ‰å¯èƒ½ä¼šç”¨åˆ°çš„é”(è¯‘è€…æ³¨ï¼šå¹¶å¯¹è¿™äº›é”åšé€‚å½“çš„æ’åº)ï¼Œä½†æ€»æœ‰äº›æ—¶å€™æ˜¯æ— æ³•é¢„çŸ¥çš„ã€‚")]),t._v(" "),s("p",[t._v("ï¼ˆ2ï¼‰è¶…æ—¶é‡Šæ”¾é”")]),t._v(" "),s("p",[t._v("å¦å¤–ä¸€ä¸ªå¯ä»¥é¿å…æ­»é”çš„æ–¹æ³•æ˜¯åœ¨å°è¯•è·å–é”çš„æ—¶å€™åŠ ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€åœ¨å°è¯•è·å–é”çš„è¿‡ç¨‹ä¸­è‹¥è¶…è¿‡äº†è¿™ä¸ªæ—¶é™è¯¥çº¿ç¨‹åˆ™æ”¾å¼ƒå¯¹è¯¥é”è¯·æ±‚ã€‚è‹¥ä¸€ä¸ªçº¿ç¨‹æ²¡æœ‰åœ¨ç»™å®šçš„æ—¶é™å†…æˆåŠŸè·å¾—æ‰€æœ‰éœ€è¦çš„é”ï¼Œåˆ™ä¼šè¿›è¡Œå›é€€å¹¶é‡Šæ”¾æ‰€æœ‰å·²ç»è·å¾—çš„é”ï¼Œç„¶åç­‰å¾…ä¸€æ®µéšæœºçš„æ—¶é—´å†é‡è¯•ã€‚è¿™æ®µéšæœºçš„ç­‰å¾…æ—¶é—´è®©å…¶å®ƒçº¿ç¨‹æœ‰æœºä¼šå°è¯•è·å–ç›¸åŒçš„è¿™äº›é”ï¼Œå¹¶ä¸”è®©è¯¥åº”ç”¨åœ¨æ²¡æœ‰è·å¾—é”çš„æ—¶å€™å¯ä»¥ç»§ç»­è¿è¡Œ(è¯‘è€…æ³¨ï¼šåŠ é”è¶…æ—¶åå¯ä»¥å…ˆç»§ç»­è¿è¡Œå¹²ç‚¹å…¶å®ƒäº‹æƒ…ï¼Œå†å›å¤´æ¥é‡å¤ä¹‹å‰åŠ é”çš„é€»è¾‘)ã€‚")]),t._v(" "),s("p",[t._v("ï¼ˆ3ï¼‰æ­»é”æ£€æµ‹")]),t._v(" "),s("p",[t._v("æ­»é”æ£€æµ‹æ˜¯ä¸€ä¸ªæ›´å¥½çš„æ­»é”é¢„é˜²æœºåˆ¶ï¼Œå®ƒä¸»è¦æ˜¯é’ˆå¯¹é‚£äº›ä¸å¯èƒ½å®ç°æŒ‰åºåŠ é”å¹¶ä¸”é”è¶…æ—¶ä¹Ÿä¸å¯è¡Œçš„åœºæ™¯ã€‚")]),t._v(" "),s("p",[t._v("æ¯å½“ä¸€ä¸ªçº¿ç¨‹è·å¾—äº†é”ï¼Œä¼šåœ¨çº¿ç¨‹å’Œé”ç›¸å…³çš„æ•°æ®ç»“æ„ä¸­ï¼ˆmapã€graph ç­‰ç­‰ï¼‰å°†å…¶è®°ä¸‹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ¯å½“æœ‰çº¿ç¨‹è¯·æ±‚é”ï¼Œä¹Ÿéœ€è¦è®°å½•åœ¨è¿™ä¸ªæ•°æ®ç»“æ„ä¸­ã€‚")]),t._v(" "),s("p",[t._v("å½“ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚é”å¤±è´¥æ—¶ï¼Œè¿™ä¸ªçº¿ç¨‹å¯ä»¥éå†é”çš„å…³ç³»å›¾çœ‹çœ‹æ˜¯å¦æœ‰æ­»é”å‘ç”Ÿã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœæ£€æµ‹å‡ºæ­»é”ï¼Œæœ‰ä¸¤ç§å¤„ç†æ‰‹æ®µï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é‡Šæ”¾æ‰€æœ‰é”ï¼Œå›é€€ï¼Œå¹¶ä¸”ç­‰å¾…ä¸€æ®µéšæœºçš„æ—¶é—´åé‡è¯•ã€‚è¿™ä¸ªå’Œç®€å•çš„åŠ é”è¶…æ—¶ç±»ä¼¼ï¼Œä¸ä¸€æ ·çš„æ˜¯åªæœ‰æ­»é”å·²ç»å‘ç”Ÿäº†æ‰å›é€€ï¼Œè€Œä¸ä¼šæ˜¯å› ä¸ºåŠ é”çš„è¯·æ±‚è¶…æ—¶äº†ã€‚è™½ç„¶æœ‰å›é€€å’Œç­‰å¾…ï¼Œä½†æ˜¯å¦‚æœæœ‰å¤§é‡çš„çº¿ç¨‹ç«äº‰åŒä¸€æ‰¹é”ï¼Œå®ƒä»¬è¿˜æ˜¯ä¼šé‡å¤åœ°æ­»é”ï¼ˆç¼–è€…æ³¨ï¼šåŸå› åŒè¶…æ—¶ç±»ä¼¼ï¼Œä¸èƒ½ä»æ ¹æœ¬ä¸Šå‡è½»ç«äº‰ï¼‰ã€‚")]),t._v(" "),s("li",[t._v("ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆæ˜¯ç»™è¿™äº›çº¿ç¨‹è®¾ç½®ä¼˜å…ˆçº§ï¼Œè®©ä¸€ä¸ªï¼ˆæˆ–å‡ ä¸ªï¼‰çº¿ç¨‹å›é€€ï¼Œå‰©ä¸‹çš„çº¿ç¨‹å°±åƒæ²¡å‘ç”Ÿæ­»é”ä¸€æ ·ç»§ç»­ä¿æŒç€å®ƒä»¬éœ€è¦çš„é”ã€‚å¦‚æœèµ‹äºˆè¿™äº›çº¿ç¨‹çš„ä¼˜å…ˆçº§æ˜¯å›ºå®šä¸å˜çš„ï¼ŒåŒä¸€æ‰¹çº¿ç¨‹æ€»æ˜¯ä¼šæ‹¥æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ä¸ºé¿å…è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨æ­»é”å‘ç”Ÿçš„æ—¶å€™è®¾ç½®éšæœºçš„ä¼˜å…ˆçº§ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_4-2-æ´»é”-livelock"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-æ´»é”-livelock"}},[t._v("#")]),t._v(" 4.2. æ´»é”ï¼ˆLivelockï¼‰")]),t._v(" "),s("h4",{attrs:{id:"ä»€ä¹ˆæ˜¯æ´»é”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯æ´»é”"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯æ´»é”")]),t._v(" "),s("p",[t._v("æ´»é”æ˜¯ä¸€ä¸ªé€’å½’çš„æƒ…å†µï¼Œä¸¤ä¸ªæˆ–æ›´å¤šçš„çº¿ç¨‹ä¼šä¸æ–­é‡å¤ä¸€ä¸ªç‰¹å®šçš„ä»£ç é€»è¾‘ã€‚é¢„æœŸçš„é€»è¾‘é€šå¸¸ä¸ºå…¶ä»–çº¿ç¨‹æä¾›æœºä¼šç»§ç»­æ”¯æŒ'this'çº¿ç¨‹ã€‚")]),t._v(" "),s("p",[t._v("æƒ³è±¡è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼šä¸¤ä¸ªäººåœ¨ç‹­çª„çš„èµ°å»Šé‡Œç›¸é‡ï¼ŒäºŒè€…éƒ½å¾ˆç¤¼è²Œï¼Œè¯•å›¾ç§»åˆ°æ—è¾¹è®©å¯¹æ–¹å…ˆé€šè¿‡ã€‚ä½†æ˜¯ä»–ä»¬æœ€ç»ˆåœ¨æ²¡æœ‰å–å¾—ä»»ä½•è¿›å±•çš„æƒ…å†µä¸‹å·¦å³æ‘‡æ‘†ï¼Œå› ä¸ºä»–ä»¬éƒ½åœ¨åŒä¸€æ—¶é—´å‘ç›¸åŒçš„æ–¹å‘ç§»åŠ¨ã€‚")]),t._v(" "),s("p",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/concurrent/livelock.png"}})]),t._v(" "),s("p",[t._v("å¦‚å›¾æ‰€ç¤ºï¼šä¸¤ä¸ªçº¿ç¨‹æƒ³è¦é€šè¿‡ä¸€ä¸ª Worker å¯¹è±¡è®¿é—®å…±äº«å…¬å…±èµ„æºçš„æƒ…å†µï¼Œä½†æ˜¯å½“ä»–ä»¬çœ‹åˆ°å¦ä¸€ä¸ª Workerï¼ˆåœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸Šè°ƒç”¨ï¼‰ä¹Ÿæ˜¯â€œæ´»åŠ¨çš„â€æ—¶ï¼Œå®ƒä»¬ä¼šå°è¯•å°†è¯¥èµ„æºäº¤ç»™å…¶ä»–å·¥ä½œè€…å¹¶ç­‰å¾…ä¸ºå®ƒå®Œæˆã€‚å¦‚æœæœ€åˆæˆ‘ä»¬è®©ä¸¤åå·¥ä½œäººå‘˜éƒ½æ´»è·ƒèµ·æ¥ï¼Œä»–ä»¬å°†ä¼šé¢ä¸´æ´»é”é—®é¢˜ã€‚")]),t._v(" "),s("h4",{attrs:{id:"é¿å…æ´»é”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é¿å…æ´»é”"}},[t._v("#")]),t._v(" é¿å…æ´»é”")]),t._v(" "),s("p",[t._v("è§£å†³â€œ"),s("strong",[t._v("æ´»é”")]),t._v("â€çš„æ–¹æ¡ˆå¾ˆç®€å•ï¼Œè°¦è®©æ—¶ï¼Œå°è¯•ç­‰å¾…ä¸€ä¸ªéšæœºçš„æ—¶é—´å°±å¯ä»¥äº†ã€‚ç”±äºç­‰å¾…çš„æ—¶é—´æ˜¯éšæœºçš„ï¼Œæ‰€ä»¥åŒæ—¶ç›¸æ’åå†æ¬¡ç›¸æ’çš„æ¦‚ç‡å°±å¾ˆä½äº†ã€‚â€œç­‰å¾…ä¸€ä¸ªéšæœºæ—¶é—´â€çš„æ–¹æ¡ˆè™½ç„¶å¾ˆç®€å•ï¼Œå´éå¸¸æœ‰æ•ˆï¼ŒRaft è¿™æ ·çŸ¥åçš„åˆ†å¸ƒå¼ä¸€è‡´æ€§ç®—æ³•ä¸­ä¹Ÿç”¨åˆ°äº†å®ƒã€‚")]),t._v(" "),s("h3",{attrs:{id:"_4-3-é¥¥é¥¿-starvation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-é¥¥é¥¿-starvation"}},[t._v("#")]),t._v(" 4.3. é¥¥é¥¿ï¼ˆStarvationï¼‰")]),t._v(" "),s("h4",{attrs:{id:"ä»€ä¹ˆæ˜¯é¥¥é¥¿"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯é¥¥é¥¿"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯é¥¥é¥¿")]),t._v(" "),s("ul",[s("li",[t._v("é«˜ä¼˜å…ˆçº§çº¿ç¨‹åå™¬æ‰€æœ‰çš„ä½ä¼˜å…ˆçº§çº¿ç¨‹çš„ CPU æ—¶é—´ã€‚")]),t._v(" "),s("li",[t._v("çº¿ç¨‹è¢«æ°¸ä¹…å µå¡åœ¨ä¸€ä¸ªç­‰å¾…è¿›å…¥åŒæ­¥å—çš„çŠ¶æ€ï¼Œå› ä¸ºå…¶ä»–çº¿ç¨‹æ€»æ˜¯èƒ½åœ¨å®ƒä¹‹å‰æŒç»­åœ°å¯¹è¯¥åŒæ­¥å—è¿›è¡Œè®¿é—®ã€‚")]),t._v(" "),s("li",[t._v("çº¿ç¨‹åœ¨ç­‰å¾…ä¸€ä¸ªæœ¬èº«(åœ¨å…¶ä¸Šè°ƒç”¨ wait())ä¹Ÿå¤„äºæ°¸ä¹…ç­‰å¾…å®Œæˆçš„å¯¹è±¡ï¼Œå› ä¸ºå…¶ä»–çº¿ç¨‹æ€»æ˜¯è¢«æŒç»­åœ°è·å¾—å”¤é†’ã€‚")])]),t._v(" "),s("p",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/concurrent/starvation-and-fairness.png"}})]),t._v(" "),s("p",[t._v("é¥¥é¥¿é—®é¢˜æœ€ç»å…¸çš„ä¾‹å­å°±æ˜¯å“²å­¦å®¶é—®é¢˜ã€‚å¦‚å›¾æ‰€ç¤ºï¼šæœ‰äº”ä¸ªå“²å­¦å®¶ç”¨é¤ï¼Œæ¯ä¸ªäººè¦æ´»å¾—ä¸¤æŠŠå‰å­æ‰å¯ä»¥å°±é¤ã€‚å½“ 2ã€4 å°±é¤æ—¶ï¼Œ1ã€3ã€5 æ°¸è¿œæ— æ³•å°±é¤ï¼Œåªèƒ½çœ‹ç€ç›˜ä¸­çš„ç¾é£Ÿé¥¥é¥¿çš„ç­‰å¾…ç€ã€‚")]),t._v(" "),s("h4",{attrs:{id:"è§£å†³é¥¥é¥¿"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³é¥¥é¥¿"}},[t._v("#")]),t._v(" è§£å†³é¥¥é¥¿")]),t._v(" "),s("p",[t._v("Java ä¸å¯èƒ½å®ç° 100% çš„å…¬å¹³æ€§ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥é€šè¿‡åŒæ­¥ç»“æ„åœ¨çº¿ç¨‹é—´å®ç°å…¬å¹³æ€§çš„æé«˜ã€‚")]),t._v(" "),s("p",[t._v("æœ‰ä¸‰ç§æ–¹æ¡ˆï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ä¿è¯èµ„æºå……è¶³")]),t._v(" "),s("li",[t._v("å…¬å¹³åœ°åˆ†é…èµ„æº")]),t._v(" "),s("li",[t._v("é¿å…æŒæœ‰é”çš„çº¿ç¨‹é•¿æ—¶é—´æ‰§è¡Œ")])]),t._v(" "),s("p",[t._v("è¿™ä¸‰ä¸ªæ–¹æ¡ˆä¸­ï¼Œæ–¹æ¡ˆä¸€å’Œæ–¹æ¡ˆä¸‰çš„é€‚ç”¨åœºæ™¯æ¯”è¾ƒæœ‰é™ï¼Œå› ä¸ºå¾ˆå¤šåœºæ™¯ä¸‹ï¼Œèµ„æºçš„ç¨€ç¼ºæ€§æ˜¯æ²¡åŠæ³•è§£å†³çš„ï¼ŒæŒæœ‰é”çš„çº¿ç¨‹æ‰§è¡Œçš„æ—¶é—´ä¹Ÿå¾ˆéš¾ç¼©çŸ­ã€‚å€’æ˜¯æ–¹æ¡ˆäºŒçš„é€‚ç”¨åœºæ™¯ç›¸å¯¹æ¥è¯´æ›´å¤šä¸€äº›ã€‚")]),t._v(" "),s("p",[t._v("é‚£å¦‚ä½•å…¬å¹³åœ°åˆ†é…èµ„æºå‘¢ï¼Ÿåœ¨å¹¶å‘ç¼–ç¨‹é‡Œï¼Œä¸»è¦æ˜¯ä½¿ç”¨"),s("strong",[t._v("å…¬å¹³é”")]),t._v("ã€‚æ‰€è°“å…¬å¹³é”ï¼Œæ˜¯ä¸€ç§å…ˆæ¥ååˆ°çš„æ–¹æ¡ˆï¼Œçº¿ç¨‹çš„ç­‰å¾…æ˜¯æœ‰é¡ºåºçš„ï¼Œæ’åœ¨ç­‰å¾…é˜Ÿåˆ—å‰é¢çš„çº¿ç¨‹ä¼šä¼˜å…ˆè·å¾—èµ„æºã€‚")]),t._v(" "),s("h2",{attrs:{id:"_5-æ€§èƒ½é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-æ€§èƒ½é—®é¢˜"}},[t._v("#")]),t._v(" 5. æ€§èƒ½é—®é¢˜")]),t._v(" "),s("p",[t._v("å¹¶å‘æ‰§è¡Œä¸€å®šæ¯”ä¸²è¡Œæ‰§è¡Œå¿«å—ï¼Ÿçº¿ç¨‹è¶Šå¤šæ‰§è¡Œè¶Šå¿«å—ï¼Ÿ")]),t._v(" "),s("p",[t._v("ç­”æ¡ˆæ˜¯ï¼š"),s("strong",[t._v("å¹¶å‘ä¸ä¸€å®šæ¯”ä¸²è¡Œå¿«")]),t._v("ã€‚å› ä¸ºæœ‰åˆ›å»ºçº¿ç¨‹å’Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_5-1-ä¸Šä¸‹æ–‡åˆ‡æ¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-ä¸Šä¸‹æ–‡åˆ‡æ¢"}},[t._v("#")]),t._v(" 5.1. ä¸Šä¸‹æ–‡åˆ‡æ¢")]),t._v(" "),s("h4",{attrs:{id:"ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ")]),t._v(" "),s("p",[t._v("å½“ CPU ä»æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢åˆ°æ‰§è¡Œå¦ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼ŒCPU éœ€è¦ä¿å­˜å½“å‰çº¿ç¨‹çš„æœ¬åœ°æ•°æ®ï¼Œç¨‹åºæŒ‡é’ˆç­‰çŠ¶æ€ï¼Œå¹¶åŠ è½½ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„çº¿ç¨‹çš„æœ¬åœ°æ•°æ®ï¼Œç¨‹åºæŒ‡é’ˆç­‰ã€‚è¿™ä¸ªå¼€å…³è¢«ç§°ä¸ºâ€œä¸Šä¸‹æ–‡åˆ‡æ¢â€ã€‚")]),t._v(" "),s("h4",{attrs:{id:"å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ–¹æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ–¹æ³•"}},[t._v("#")]),t._v(" å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ–¹æ³•")]),t._v(" "),s("ul",[s("li",[t._v("æ— é”å¹¶å‘ç¼–ç¨‹ - å¤šçº¿ç¨‹ç«äº‰é”æ—¶ï¼Œä¼šå¼•èµ·ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ‰€ä»¥å¤šçº¿ç¨‹å¤„ç†æ•°æ®æ—¶ï¼Œå¯ä»¥ç”¨ä¸€äº›åŠæ³•æ¥é¿å…ä½¿ç”¨é”ï¼Œå¦‚å°†æ•°æ®çš„ ID æŒ‰ç…§ Hash ç®—æ³•å–æ¨¡åˆ†æ®µï¼Œä¸åŒçš„çº¿ç¨‹å¤„ç†ä¸åŒæ®µçš„æ•°æ®ã€‚")]),t._v(" "),s("li",[t._v("CAS ç®—æ³• - Java çš„ Atomic åŒ…ä½¿ç”¨ CAS ç®—æ³•æ¥æ›´æ–°æ•°æ®ï¼Œè€Œä¸éœ€è¦åŠ é”ã€‚")]),t._v(" "),s("li",[t._v("ä½¿ç”¨æœ€å°‘çº¿ç¨‹ - é¿å…åˆ›å»ºä¸éœ€è¦çš„çº¿ç¨‹ï¼Œæ¯”å¦‚ä»»åŠ¡å¾ˆå°‘ï¼Œä½†æ˜¯åˆ›å»ºäº†å¾ˆå¤šçº¿ç¨‹æ¥å¤„ç†ï¼Œè¿™æ ·ä¼šé€ æˆå¤§é‡çº¿ç¨‹éƒ½å¤„äºç­‰å¾…çŠ¶æ€ã€‚")]),t._v(" "),s("li",[t._v("ä½¿ç”¨åç¨‹ - åœ¨å•çº¿ç¨‹é‡Œå®ç°å¤šä»»åŠ¡çš„è°ƒåº¦ï¼Œå¹¶åœ¨å•çº¿ç¨‹é‡Œç»´æŒå¤šä¸ªä»»åŠ¡é—´çš„åˆ‡æ¢ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_5-2-èµ„æºé™åˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-èµ„æºé™åˆ¶"}},[t._v("#")]),t._v(" 5.2. èµ„æºé™åˆ¶")]),t._v(" "),s("h4",{attrs:{id:"ä»€ä¹ˆæ˜¯èµ„æºé™åˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯èµ„æºé™åˆ¶"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯èµ„æºé™åˆ¶")]),t._v(" "),s("p",[t._v("èµ„æºé™åˆ¶æ˜¯æŒ‡åœ¨è¿›è¡Œå¹¶å‘ç¼–ç¨‹æ—¶ï¼Œç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦å—é™äºè®¡ç®—æœºç¡¬ä»¶èµ„æºæˆ–è½¯ä»¶èµ„æºã€‚")]),t._v(" "),s("h4",{attrs:{id:"èµ„æºé™åˆ¶å¼•å‘çš„é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#èµ„æºé™åˆ¶å¼•å‘çš„é—®é¢˜"}},[t._v("#")]),t._v(" èµ„æºé™åˆ¶å¼•å‘çš„é—®é¢˜")]),t._v(" "),s("p",[t._v("åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œå°†ä»£ç æ‰§è¡Œé€Ÿåº¦åŠ å¿«çš„åŸåˆ™æ˜¯å°†ä»£ç ä¸­ä¸²è¡Œæ‰§è¡Œçš„éƒ¨åˆ†å˜æˆå¹¶å‘æ‰§è¡Œï¼Œä½†æ˜¯å¦‚æœå°†æŸæ®µä¸²è¡Œçš„ä»£ç å¹¶å‘æ‰§è¡Œï¼Œå› ä¸ºå—é™äºèµ„æºï¼Œä»ç„¶åœ¨ä¸²è¡Œæ‰§è¡Œï¼Œè¿™æ—¶å€™ç¨‹åºä¸ä»…ä¸ä¼šåŠ å¿«æ‰§è¡Œï¼Œåè€Œä¼šæ›´æ…¢ï¼Œå› ä¸ºå¢åŠ äº†ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œèµ„æºè°ƒåº¦çš„æ—¶é—´ã€‚")]),t._v(" "),s("h4",{attrs:{id:"å¦‚ä½•è§£å†³èµ„æºé™åˆ¶çš„é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•è§£å†³èµ„æºé™åˆ¶çš„é—®é¢˜"}},[t._v("#")]),t._v(" å¦‚ä½•è§£å†³èµ„æºé™åˆ¶çš„é—®é¢˜")]),t._v(" "),s("p",[t._v("åœ¨èµ„æºé™åˆ¶æƒ…å†µä¸‹è¿›è¡Œå¹¶å‘ç¼–ç¨‹ï¼Œæ ¹æ®ä¸åŒçš„èµ„æºé™åˆ¶è°ƒæ•´ç¨‹åºçš„å¹¶å‘åº¦ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("å¯¹äºç¡¬ä»¶èµ„æºé™åˆ¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨é›†ç¾¤å¹¶è¡Œæ‰§è¡Œç¨‹åºã€‚")]),t._v(" "),s("li",[t._v("å¯¹äºè½¯ä»¶èµ„æºé™åˆ¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨èµ„æºæ± å°†èµ„æºå¤ç”¨ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"_6-å°ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-å°ç»“"}},[t._v("#")]),t._v(" 6. å°ç»“")]),t._v(" "),s("p",[t._v("å¹¶å‘ç¼–ç¨‹å¯ä»¥æ€»ç»“ä¸ºä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šåˆ†å·¥ã€åŒæ­¥ã€äº’æ–¥ã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åˆ†å·¥")]),t._v("ï¼šæ˜¯æŒ‡å¦‚ä½•é«˜æ•ˆåœ°æ‹†è§£ä»»åŠ¡å¹¶åˆ†é…ç»™çº¿ç¨‹ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åŒæ­¥")]),t._v("ï¼šæ˜¯æŒ‡çº¿ç¨‹ä¹‹é—´å¦‚ä½•åä½œã€‚")]),t._v(" "),s("li",[s("strong",[t._v("äº’æ–¥")]),t._v("ï¼šæ˜¯æŒ‡ä¿è¯åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºã€‚")])]),t._v(" "),s("h2",{attrs:{id:"_7-å‚è€ƒèµ„æ–™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-å‚è€ƒèµ„æ–™"}},[t._v("#")]),t._v(" 7. å‚è€ƒèµ„æ–™")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://book.douban.com/subject/10484692/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://book.douban.com/subject/26591326/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€ŠJava å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://book.douban.com/subject/34907497/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://time.geekbang.org/column/intro/100023901",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("http://tutorials.jenkov.com/java-concurrency/benefits.html")]),t._v(" "),s("li",[t._v("https://www.logicbig.com/tutorials/core-java-tutorial/java-multi-threading/thread-deadlock.html")]),t._v(" "),s("li",[t._v("https://www.logicbig.com/tutorials/core-java-tutorial/java-multi-threading/thread-livelock.html")]),t._v(" "),s("li",[t._v("https://www.logicbig.com/tutorials/core-java-tutorial/java-multi-threading/thread-starvation.html")]),t._v(" "),s("li",[t._v("https://www.zhihu.com/question/33515481")]),t._v(" "),s("li",[t._v("https://blog.csdn.net/yaosiming2011/article/details/44280797")])])])}),[],!1,null,null,null);a.default=v.exports}}]);