(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{452:function(t,a,s){"use strict";s.r(a);var n=s(15),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"java-å†…å­˜ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-å†…å­˜ç®¡ç†"}},[t._v("#")]),t._v(" Java å†…å­˜ç®¡ç†")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("ğŸ“¦ æœ¬æ–‡ä»¥åŠç¤ºä¾‹æºç å·²å½’æ¡£åœ¨ "),s("a",{attrs:{href:"https://github.com/dunwu/javacore/",target:"_blank",rel:"noopener noreferrer"}},[t._v("javacore"),s("OutboundLink")],1)])])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#1-%E5%86%85%E5%AD%98%E7%AE%80%E4%BB%8B"}},[t._v("1. å†…å­˜ç®€ä»‹")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#11-%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98%E5%92%8C%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98"}},[t._v("1.1. ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#12-%E5%86%85%E6%A0%B8%E7%A9%BA%E9%97%B4%E5%92%8C%E7%94%A8%E6%88%B7%E7%A9%BA%E9%97%B4"}},[t._v("1.2. å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#13-%E4%BD%BF%E7%94%A8%E5%86%85%E5%AD%98%E7%9A%84-java-%E7%BB%84%E4%BB%B6"}},[t._v("1.3. ä½¿ç”¨å†…å­˜çš„ Java ç»„ä»¶")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#2-%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F"}},[t._v("2. è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#21-%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8"}},[t._v("2.1. ç¨‹åºè®¡æ•°å™¨")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#22-java-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88"}},[t._v("2.2. Java è™šæ‹Ÿæœºæ ˆ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#23-%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88"}},[t._v("2.3. æœ¬åœ°æ–¹æ³•æ ˆ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#24-java-%E5%A0%86"}},[t._v("2.4. Java å †")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#25-%E6%96%B9%E6%B3%95%E5%8C%BA"}},[t._v("2.5. æ–¹æ³•åŒº")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#26-%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0"}},[t._v("2.6. è¿è¡Œæ—¶å¸¸é‡æ± ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#27-%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98"}},[t._v("2.7. ç›´æ¥å†…å­˜")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#28-java-%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E5%AF%B9%E6%AF%94"}},[t._v("2.8. Java å†…å­˜åŒºåŸŸå¯¹æ¯”")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#3-jvm-%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86"}},[t._v("3. JVM è¿è¡ŒåŸç†")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#4-outofmemoryerror"}},[t._v("4. OutOfMemoryError")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#41-%E4%BB%80%E4%B9%88%E6%98%AF-outofmemoryerror"}},[t._v("4.1. ä»€ä¹ˆæ˜¯ OutOfMemoryError")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#42-%E5%A0%86%E7%A9%BA%E9%97%B4%E6%BA%A2%E5%87%BA"}},[t._v("4.2. å †ç©ºé—´æº¢å‡º")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#43-gc-%E5%BC%80%E9%94%80%E8%B6%85%E8%BF%87%E9%99%90%E5%88%B6"}},[t._v("4.3. GC å¼€é”€è¶…è¿‡é™åˆ¶")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#44-%E6%B0%B8%E4%B9%85%E4%BB%A3%E7%A9%BA%E9%97%B4%E4%B8%8D%E8%B6%B3"}},[t._v("4.4. æ°¸ä¹…ä»£ç©ºé—´ä¸è¶³")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#45-%E5%85%83%E6%95%B0%E6%8D%AE%E5%8C%BA%E7%A9%BA%E9%97%B4%E4%B8%8D%E8%B6%B3"}},[t._v("4.5. å…ƒæ•°æ®åŒºç©ºé—´ä¸è¶³")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#46-%E6%97%A0%E6%B3%95%E6%96%B0%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%BA%BF%E7%A8%8B"}},[t._v("4.6. æ— æ³•æ–°å»ºæœ¬åœ°çº¿ç¨‹")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#47-%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA"}},[t._v("4.7. ç›´æ¥å†…å­˜æº¢å‡º")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#5-stackoverflowerror"}},[t._v("5. StackOverflowError")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#6-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"}},[t._v("6. å‚è€ƒèµ„æ–™")])])]),t._v(" "),s("h2",{attrs:{id:"_1-å†…å­˜ç®€ä»‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å†…å­˜ç®€ä»‹"}},[t._v("#")]),t._v(" 1. å†…å­˜ç®€ä»‹")]),t._v(" "),s("h3",{attrs:{id:"_1-1-ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜"}},[t._v("#")]),t._v(" 1.1. ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜")]),t._v(" "),s("p",[t._v("æ‰€è°“ç‰©ç†å†…å­˜å°±æ˜¯é€šå¸¸æ‰€è¯´çš„ RAMï¼ˆéšæœºå­˜å‚¨å™¨ï¼‰ã€‚")]),t._v(" "),s("p",[t._v("è™šæ‹Ÿå†…å­˜ä½¿å¾—å¤šä¸ªè¿›ç¨‹åœ¨åŒæ—¶è¿è¡Œæ—¶å¯ä»¥å…±äº«ç‰©ç†å†…å­˜ï¼Œè¿™é‡Œçš„å…±äº«åªæ˜¯ç©ºé—´ä¸Šå…±äº«ï¼Œåœ¨é€»è¾‘ä¸Šå½¼æ­¤ä»ç„¶æ˜¯éš”ç¦»çš„ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_1-2-å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´"}},[t._v("#")]),t._v(" 1.2. å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´")]),t._v(" "),s("p",[t._v("ä¸€ä¸ªè®¡ç®—é€šå¸¸æœ‰å›ºå®šå¤§å°çš„å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯ç¨‹åºå¹¶ä¸èƒ½ä½¿ç”¨å…¨éƒ¨çš„ç©ºé—´ã€‚å› ä¸ºè¿™äº›ç©ºé—´è¢«åˆ’åˆ†ä¸ºå†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´ï¼Œè€Œç¨‹åºåªèƒ½ä½¿ç”¨ç”¨æˆ·ç©ºé—´çš„å†…å­˜ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_1-3-ä½¿ç”¨å†…å­˜çš„-java-ç»„ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-ä½¿ç”¨å†…å­˜çš„-java-ç»„ä»¶"}},[t._v("#")]),t._v(" 1.3. ä½¿ç”¨å†…å­˜çš„ Java ç»„ä»¶")]),t._v(" "),s("p",[t._v("Java å¯åŠ¨åï¼Œä½œä¸ºä¸€ä¸ªè¿›ç¨‹è¿è¡Œåœ¨æ“ä½œç³»ç»Ÿä¸­ã€‚")]),t._v(" "),s("p",[t._v("æœ‰å“ªäº› Java ç»„ä»¶éœ€è¦å ç”¨å†…å­˜å‘¢ï¼Ÿ")]),t._v(" "),s("ul",[s("li",[t._v("å †å†…å­˜ï¼šJava å †ã€ç±»å’Œç±»åŠ è½½å™¨")]),t._v(" "),s("li",[t._v("æ ˆå†…å­˜ï¼šçº¿ç¨‹")]),t._v(" "),s("li",[t._v("æœ¬åœ°å†…å­˜ï¼šNIOã€JNI")])]),t._v(" "),s("h2",{attrs:{id:"_2-è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"}},[t._v("#")]),t._v(" 2. è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ")]),t._v(" "),s("p",[t._v("JVM åœ¨æ‰§è¡Œ Java ç¨‹åºçš„è¿‡ç¨‹ä¸­ä¼šæŠŠå®ƒæ‰€ç®¡ç†çš„å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªä¸åŒçš„æ•°æ®åŒºåŸŸã€‚è¿™äº›åŒºåŸŸéƒ½æœ‰å„è‡ªçš„ç”¨é€”ï¼Œä»¥åŠåˆ›å»ºå’Œé”€æ¯çš„æ—¶é—´ï¼Œæœ‰çš„åŒºåŸŸéšç€è™šæ‹Ÿæœºè¿›ç¨‹çš„å¯åŠ¨è€Œå­˜åœ¨ï¼Œæœ‰äº›åŒºåŸŸåˆ™ä¾èµ–ç”¨æˆ·çº¿ç¨‹çš„å¯åŠ¨å’Œç»“æŸè€Œå»ºç«‹å’Œé”€æ¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/jvm/jvm-memory-runtime-data-area.png",alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"_2-1-ç¨‹åºè®¡æ•°å™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-ç¨‹åºè®¡æ•°å™¨"}},[t._v("#")]),t._v(" 2.1. ç¨‹åºè®¡æ•°å™¨")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰")])]),t._v(" æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¯ä»¥çœ‹åšæ˜¯"),s("strong",[t._v("å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨")]),t._v("ã€‚ä¾‹å¦‚ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸ã€çº¿ç¨‹æ¢å¤ç­‰éƒ½ä¾èµ–äºè®¡æ•°å™¨ã€‚")]),t._v(" "),s("p",[t._v("å½“æ‰§è¡Œçš„çº¿ç¨‹æ•°é‡è¶…è¿‡ CPU æ•°é‡æ—¶ï¼Œçº¿ç¨‹ä¹‹é—´ä¼šæ ¹æ®æ—¶é—´ç‰‡è½®è¯¢äº‰å¤º CPU èµ„æºã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œäº†ï¼Œæˆ–è€…æ˜¯å…¶å®ƒåŸå› å¯¼è‡´è¿™ä¸ªçº¿ç¨‹çš„ CPU èµ„æºè¢«æå‰æŠ¢å¤ºï¼Œé‚£ä¹ˆè¿™ä¸ªé€€å‡ºçš„çº¿ç¨‹å°±éœ€è¦å•ç‹¬çš„ä¸€ä¸ªç¨‹åºè®¡æ•°å™¨ï¼Œæ¥è®°å½•ä¸‹ä¸€æ¡è¿è¡Œçš„æŒ‡ä»¤ï¼Œä»è€Œåœ¨çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ã€‚å„æ¡çº¿ç¨‹é—´çš„è®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç‹¬ç«‹å­˜å‚¨ï¼Œæˆ‘ä»¬ç§°è¿™ç±»å†…å­˜åŒºåŸŸä¸º â€œçº¿ç¨‹ç§æœ‰â€ çš„å†…å­˜ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ª Java æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›")]),t._v(" "),s("li",[t._v("å¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯ Native æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨å€¼åˆ™ä¸ºç©ºï¼ˆUndefinedï¼‰ã€‚")])]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼šæ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ JVM ä¸­æ²¡æœ‰è§„å®šä»»ä½• "),s("code",[t._v("OutOfMemoryError")]),t._v(" æƒ…å†µçš„åŒºåŸŸã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_2-2-java-è™šæ‹Ÿæœºæ ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-java-è™šæ‹Ÿæœºæ ˆ"}},[t._v("#")]),t._v(" 2.2. Java è™šæ‹Ÿæœºæ ˆ")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("Java è™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stacksï¼‰")])]),t._v(" ä¹Ÿ"),s("strong",[t._v("æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒ")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("æ¯ä¸ª Java æ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ˆStack Frameï¼‰ç”¨äºå­˜å‚¨ "),s("strong",[t._v("å±€éƒ¨å˜é‡è¡¨")]),t._v("ã€"),s("strong",[t._v("æ“ä½œæ•°æ ˆ")]),t._v("ã€"),s("strong",[t._v("å¸¸é‡æ± å¼•ç”¨")]),t._v(" ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•ä»è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨ Java è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆå’Œå‡ºæ ˆçš„è¿‡ç¨‹ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/jvm/jvm-stack.png!w640",alt:"img"}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å±€éƒ¨å˜é‡è¡¨")]),t._v(" - 32 ä½å˜é‡æ§½ï¼Œå­˜æ”¾äº†ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§åŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡å¼•ç”¨ã€"),s("code",[t._v("ReturnAddress")]),t._v(" ç±»å‹ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ“ä½œæ•°æ ˆ")]),t._v(" - åŸºäºæ ˆçš„æ‰§è¡Œå¼•æ“ï¼Œè™šæ‹ŸæœºæŠŠæ“ä½œæ•°æ ˆä½œä¸ºå®ƒçš„å·¥ä½œåŒºï¼Œå¤§å¤šæ•°æŒ‡ä»¤éƒ½è¦ä»è¿™é‡Œå¼¹å‡ºæ•°æ®ã€æ‰§è¡Œè¿ç®—ï¼Œç„¶åæŠŠç»“æœå‹å›æ“ä½œæ•°æ ˆã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åŠ¨æ€é“¾æ¥")]),t._v(" - æ¯ä¸ªæ ˆå¸§éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆæ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼‰ä¸­è¯¥æ ˆå¸§æ‰€å±æ–¹æ³•çš„å¼•ç”¨ã€‚æŒæœ‰è¿™ä¸ªå¼•ç”¨æ˜¯ä¸ºäº†æ”¯æŒæ–¹æ³•è°ƒç”¨è¿‡ç¨‹ä¸­çš„åŠ¨æ€è¿æ¥ã€‚Class æ–‡ä»¶çš„å¸¸é‡æ± ä¸­æœ‰å¤§é‡çš„ç¬¦å·å¼•ç”¨ï¼Œå­—èŠ‚ç ä¸­çš„æ–¹æ³•è°ƒç”¨æŒ‡ä»¤å°±ä»¥å¸¸é‡æ± ä¸­æŒ‡å‘æ–¹æ³•çš„ç¬¦å·å¼•ç”¨ä¸ºå‚æ•°ã€‚è¿™äº›ç¬¦å·å¼•ç”¨ä¸€éƒ¨åˆ†ä¼šåœ¨ç±»åŠ è½½é˜¶æ®µæˆ–ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨ï¼Œè¿™ç§è½¬åŒ–ç§°ä¸ºé™æ€è§£æã€‚å¦ä¸€éƒ¨åˆ†å°†åœ¨æ¯ä¸€æ¬¡çš„è¿è¡ŒæœŸé—´è½¬åŒ–ä¸ºç›´æ¥åº”ç”¨ï¼Œè¿™éƒ¨åˆ†ç§°ä¸ºåŠ¨æ€é“¾æ¥ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ–¹æ³•å‡ºå£")]),t._v(" - è¿”å›æ–¹æ³•è¢«è°ƒç”¨çš„ä½ç½®ï¼Œæ¢å¤ä¸Šå±‚æ–¹æ³•çš„å±€éƒ¨å˜é‡å’Œæ“ä½œæ•°æ ˆï¼Œå¦‚æœæ— è¿”å›å€¼ï¼Œåˆ™æŠŠå®ƒå‹å…¥è°ƒç”¨è€…çš„æ“ä½œæ•°æ ˆã€‚")])]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼š")]),t._v(" "),s("p",[t._v("è¯¥åŒºåŸŸå¯èƒ½æŠ›å‡ºä»¥ä¸‹å¼‚å¸¸ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦è¶…è¿‡æœ€å¤§å€¼ï¼Œå°±ä¼šæŠ›å‡º "),s("code",[t._v("StackOverflowError")]),t._v(" å¼‚å¸¸ï¼›")]),t._v(" "),s("li",[t._v("å¦‚æœè™šæ‹Ÿæœºæ ˆè¿›è¡ŒåŠ¨æ€æ‰©å±•æ—¶ï¼Œæ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿå†…å­˜ï¼Œå°±ä¼šæŠ›å‡º "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ã€‚")])]),t._v(" "),s("p",[t._v("ğŸ’¡ æç¤ºï¼š")]),t._v(" "),s("p",[t._v("å¯ä»¥é€šè¿‡ "),s("code",[t._v("-Xss")]),t._v(" è¿™ä¸ªè™šæ‹Ÿæœºå‚æ•°æ¥æŒ‡å®šä¸€ä¸ªç¨‹åºçš„ Java è™šæ‹Ÿæœºæ ˆå†…å­˜å¤§å°ï¼š")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("java "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Xss")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),t._v("M "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HackTheJava")]),t._v("\n")])])])]),t._v(" "),s("h3",{attrs:{id:"_2-3-æœ¬åœ°æ–¹æ³•æ ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-æœ¬åœ°æ–¹æ³•æ ˆ"}},[t._v("#")]),t._v(" 2.3. æœ¬åœ°æ–¹æ³•æ ˆ")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰")])]),t._v(" ä¸è™šæ‹Ÿæœºæ ˆçš„ä½œç”¨ç›¸ä¼¼ã€‚")]),t._v(" "),s("p",[t._v("äºŒè€…çš„åŒºåˆ«åœ¨äºï¼š"),s("strong",[t._v("è™šæ‹Ÿæœºæ ˆä¸º Java æ–¹æ³•æœåŠ¡ï¼›æœ¬åœ°æ–¹æ³•æ ˆä¸º Native æ–¹æ³•æœåŠ¡")]),t._v("ã€‚æœ¬åœ°æ–¹æ³•å¹¶ä¸æ˜¯ç”¨ Java å®ç°çš„ï¼Œè€Œæ˜¯ç”± C è¯­è¨€å®ç°çš„ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/jvm/jvm-native-method-stack.gif!w640",alt:"img"}})]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼šæœ¬åœ°æ–¹æ³•æ ˆä¹Ÿä¼šæŠ›å‡º "),s("code",[t._v("StackOverflowError")]),t._v(" å¼‚å¸¸å’Œ "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_2-4-java-å †"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-java-å †"}},[t._v("#")]),t._v(" 2.4. Java å †")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("Java å †ï¼ˆJava Heapï¼‰")]),t._v(" çš„ä½œç”¨å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½æ˜¯åœ¨è¿™é‡Œåˆ†é…å†…å­˜")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v('Java å †æ˜¯åƒåœ¾æ”¶é›†çš„ä¸»è¦åŒºåŸŸï¼ˆå› æ­¤ä¹Ÿè¢«å«åš"GC å †"ï¼‰ã€‚ç°ä»£çš„åƒåœ¾æ”¶é›†å™¨åŸºæœ¬éƒ½æ˜¯é‡‡ç”¨'),s("strong",[t._v("åˆ†ä»£æ”¶é›†ç®—æ³•")]),t._v("ï¼Œè¯¥ç®—æ³•çš„æ€æƒ³æ˜¯é’ˆå¯¹ä¸åŒçš„å¯¹è±¡é‡‡å–ä¸åŒçš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚")]),t._v(" "),s("p",[t._v("å› æ­¤è™šæ‹ŸæœºæŠŠ Java å †åˆ†æˆä»¥ä¸‹ä¸‰å—ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[s("code",[t._v("æ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Eden")]),t._v(" - Eden å’Œ Survivor çš„æ¯”ä¾‹ä¸º 8:1")]),t._v(" "),s("li",[s("code",[t._v("From Survivor")])]),t._v(" "),s("li",[s("code",[t._v("To Survivor")])])])]),t._v(" "),s("li",[s("strong",[s("code",[t._v("è€å¹´ä»£ï¼ˆOld Generationï¼‰")])])]),t._v(" "),s("li",[s("strong",[s("code",[t._v("æ°¸ä¹…ä»£ï¼ˆPermanent Generationï¼‰")])])])]),t._v(" "),s("p",[t._v("å½“ä¸€ä¸ªå¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œå®ƒé¦–å…ˆè¿›å…¥æ–°ç”Ÿä»£ï¼Œä¹‹åæœ‰å¯èƒ½è¢«è½¬ç§»åˆ°è€å¹´ä»£ä¸­ã€‚æ–°ç”Ÿä»£å­˜æ”¾ç€å¤§é‡çš„ç”Ÿå‘½å¾ˆçŸ­çš„å¯¹è±¡ï¼Œå› æ­¤æ–°ç”Ÿä»£åœ¨ä¸‰ä¸ªåŒºåŸŸä¸­åƒåœ¾å›æ”¶çš„é¢‘ç‡æœ€é«˜ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/jvm/jvm-heap.gif!w640",alt:"img"}})]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼šJava å †ä¸éœ€è¦è¿ç»­å†…å­˜ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€æ‰©å±•å…¶å†…å­˜ï¼Œæ‰©å±•å¤±è´¥ä¼šæŠ›å‡º "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ã€‚")]),t._v(" "),s("p",[t._v("ğŸ’¡ æç¤ºï¼šå¯ä»¥é€šè¿‡ "),s("code",[t._v("-Xms")]),t._v(" å’Œ "),s("code",[t._v("-Xmx")]),t._v(" ä¸¤ä¸ªè™šæ‹Ÿæœºå‚æ•°æ¥æŒ‡å®šä¸€ä¸ªç¨‹åºçš„ Java å †å†…å­˜å¤§å°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®åˆå§‹å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°è®¾ç½®æœ€å¤§å€¼ã€‚")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("java "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Xms")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("M "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Xmx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("M "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HackTheJava")]),t._v("\n")])])])]),t._v(" "),s("h3",{attrs:{id:"_2-5-æ–¹æ³•åŒº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-æ–¹æ³•åŒº"}},[t._v("#")]),t._v(" 2.5. æ–¹æ³•åŒº")]),t._v(" "),s("p",[t._v("æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ä¹Ÿè¢«ç§°ä¸ºæ°¸ä¹…ä»£ã€‚"),s("strong",[t._v("æ–¹æ³•åŒºç”¨äºå­˜æ”¾å·²è¢«åŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("å¯¹è¿™å—åŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶çš„ä¸»è¦ç›®æ ‡æ˜¯å¯¹å¸¸é‡æ± çš„å›æ”¶å’Œå¯¹ç±»çš„å¸è½½ï¼Œä½†æ˜¯ä¸€èˆ¬æ¯”è¾ƒéš¾å®ç°ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼šå’Œ Java å †ä¸€æ ·ä¸éœ€è¦è¿ç»­çš„å†…å­˜ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€æ‰©å±•ï¼ŒåŠ¨æ€æ‰©å±•å¤±è´¥ä¸€æ ·ä¼šæŠ›å‡º "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ã€‚")]),t._v(" "),s("p",[t._v("ğŸ’¡ æç¤ºï¼š")]),t._v(" "),s("ul",[s("li",[t._v("JDK 1.7 ä¹‹å‰ï¼ŒHotSpot è™šæ‹ŸæœºæŠŠå®ƒå½“æˆæ°¸ä¹…ä»£æ¥è¿›è¡Œåƒåœ¾å›æ”¶ã€‚å¯é€šè¿‡å‚æ•° "),s("code",[t._v("-XX:PermSize")]),t._v(" å’Œ "),s("code",[t._v("-XX:MaxPermSize")]),t._v(" è®¾ç½®ã€‚")]),t._v(" "),s("li",[t._v("JDK 1.8 ä¹‹åï¼Œå–æ¶ˆäº†æ°¸ä¹…ä»£ï¼Œç”¨ **"),s("code",[t._v("metaspaceï¼ˆå…ƒæ•°æ®ï¼‰")]),t._v("**åŒºæ›¿ä»£ã€‚å¯é€šè¿‡å‚æ•° "),s("code",[t._v("-XX:MaxMetaspaceSize")]),t._v(" è®¾ç½®ã€‚")])])]),t._v(" "),s("h3",{attrs:{id:"_2-6-è¿è¡Œæ—¶å¸¸é‡æ± "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-è¿è¡Œæ—¶å¸¸é‡æ± "}},[t._v("#")]),t._v(" 2.6. è¿è¡Œæ—¶å¸¸é‡æ± ")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰")]),t._v(" æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†")]),t._v("ï¼ŒClass æ–‡ä»¶ä¸­é™¤äº†æœ‰ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰æè¿°ä¿¡æ¯ï¼Œè¿˜æœ‰ä¸€é¡¹ä¿¡æ¯æ˜¯å¸¸é‡æ± ï¼ˆConstant Pool Tableï¼‰ï¼Œ"),s("strong",[t._v("ç”¨äºå­˜æ”¾ç¼–è¯‘å™¨ç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨")]),t._v("ï¼Œè¿™éƒ¨åˆ†å†…å®¹ä¼šåœ¨ç±»åŠ è½½åè¢«æ”¾å…¥è¿™ä¸ªåŒºåŸŸã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å­—é¢é‡")]),t._v(" - æ–‡æœ¬å­—ç¬¦ä¸²ã€å£°æ˜ä¸º "),s("code",[t._v("final")]),t._v(" çš„å¸¸é‡å€¼ç­‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ç¬¦å·å¼•ç”¨")]),t._v(" - ç±»å’Œæ¥å£çš„å®Œå…¨é™å®šåï¼ˆFully Qualified Nameï¼‰ã€å­—æ®µçš„åç§°å’Œæè¿°ç¬¦ï¼ˆDescriptorï¼‰ã€æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦ã€‚")])]),t._v(" "),s("p",[t._v("é™¤äº†åœ¨ç¼–è¯‘æœŸç”Ÿæˆçš„å¸¸é‡ï¼Œè¿˜å…è®¸åŠ¨æ€ç”Ÿæˆï¼Œä¾‹å¦‚ "),s("code",[t._v("String")]),t._v(" ç±»çš„ "),s("code",[t._v("intern()")]),t._v("ã€‚è¿™éƒ¨åˆ†å¸¸é‡ä¹Ÿä¼šè¢«æ”¾å…¥è¿è¡Œæ—¶å¸¸é‡æ± ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼šå½“å¸¸é‡æ± æ— æ³•å†ç”³è¯·åˆ°å†…å­˜æ—¶ä¼šæŠ›å‡º "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_2-7-ç›´æ¥å†…å­˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-ç›´æ¥å†…å­˜"}},[t._v("#")]),t._v(" 2.7. ç›´æ¥å†…å­˜")]),t._v(" "),s("p",[t._v("ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰å¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯ JVM è§„èŒƒä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸã€‚")]),t._v(" "),s("p",[t._v("åœ¨ JDK 1.4 ä¸­æ–°åŠ å…¥äº† NIO ç±»ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ Native å‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨ Java å †é‡Œçš„ "),s("code",[t._v("DirectByteBuffer")]),t._v(" å¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚è¿™æ ·èƒ½åœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œå› ä¸ºé¿å…äº†åœ¨ Java å †å’Œ Native å †ä¸­æ¥å›å¤åˆ¶æ•°æ®ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼šç›´æ¥å†…å­˜è¿™éƒ¨åˆ†ä¹Ÿè¢«é¢‘ç¹çš„ä½¿ç”¨ï¼Œä¸”ä¹Ÿå¯èƒ½å¯¼è‡´ "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ã€‚")]),t._v(" "),s("p",[t._v("ğŸ’¡ æç¤ºï¼šç›´æ¥å†…å­˜å®¹é‡å¯é€šè¿‡ "),s("code",[t._v("-XX:MaxDirectMemorySize")]),t._v(" æŒ‡å®šï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸ Java å †æœ€å¤§å€¼ï¼ˆ"),s("code",[t._v("-Xmx")]),t._v(" æŒ‡å®šï¼‰ä¸€æ ·ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_2-8-java-å†…å­˜åŒºåŸŸå¯¹æ¯”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-java-å†…å­˜åŒºåŸŸå¯¹æ¯”"}},[t._v("#")]),t._v(" 2.8. Java å†…å­˜åŒºåŸŸå¯¹æ¯”")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("å†…å­˜åŒºåŸŸ")]),t._v(" "),s("th",[t._v("å†…å­˜ä½œç”¨èŒƒå›´")]),t._v(" "),s("th",[t._v("å¼‚å¸¸")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("ç¨‹åºè®¡æ•°å™¨")]),t._v(" "),s("td",[t._v("çº¿ç¨‹ç§æœ‰")]),t._v(" "),s("td",[t._v("æ— ")])]),t._v(" "),s("tr",[s("td",[t._v("Java è™šæ‹Ÿæœºæ ˆ")]),t._v(" "),s("td",[t._v("çº¿ç¨‹ç§æœ‰")]),t._v(" "),s("td",[s("code",[t._v("StackOverflowError")]),t._v(" å’Œ "),s("code",[t._v("OutOfMemoryError")])])]),t._v(" "),s("tr",[s("td",[t._v("æœ¬åœ°æ–¹æ³•æ ˆ")]),t._v(" "),s("td",[t._v("çº¿ç¨‹ç§æœ‰")]),t._v(" "),s("td",[s("code",[t._v("StackOverflowError")]),t._v(" å’Œ "),s("code",[t._v("OutOfMemoryError")])])]),t._v(" "),s("tr",[s("td",[t._v("Java å †")]),t._v(" "),s("td",[t._v("çº¿ç¨‹å…±äº«")]),t._v(" "),s("td",[s("code",[t._v("OutOfMemoryError")])])]),t._v(" "),s("tr",[s("td",[t._v("æ–¹æ³•åŒº")]),t._v(" "),s("td",[t._v("çº¿ç¨‹å…±äº«")]),t._v(" "),s("td",[s("code",[t._v("OutOfMemoryError")])])]),t._v(" "),s("tr",[s("td",[t._v("è¿è¡Œæ—¶å¸¸é‡æ± ")]),t._v(" "),s("td",[t._v("çº¿ç¨‹å…±äº«")]),t._v(" "),s("td",[s("code",[t._v("OutOfMemoryError")])])]),t._v(" "),s("tr",[s("td",[t._v("ç›´æ¥å†…å­˜")]),t._v(" "),s("td",[t._v("éè¿è¡Œæ—¶æ•°æ®åŒº")]),t._v(" "),s("td",[s("code",[t._v("OutOfMemoryError")])])])])]),t._v(" "),s("h2",{attrs:{id:"_3-jvm-è¿è¡ŒåŸç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-jvm-è¿è¡ŒåŸç†"}},[t._v("#")]),t._v(" 3. JVM è¿è¡ŒåŸç†")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JVMCase")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¸¸é‡")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" MAN_SEX_TYPE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"man"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é™æ€å˜é‡")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" WOMAN_SEX_TYPE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"woman"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Student")]),t._v(" stu "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Student")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tstu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nick"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tstu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSexType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MAN_SEX_TYPE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tstu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JVMCase")]),t._v(" jvmcase "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JVMCase")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒç”¨é™æ€æ–¹æ³•")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒç”¨éé™æ€æ–¹æ³•")]),t._v("\n\t\tjvmcase"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sayHello")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¸¸è§„é™æ€æ–¹æ³•")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Student")]),t._v(" stu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" stu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"; sex:"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" stu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSexType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"; age:"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" stu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éé™æ€æ–¹æ³•")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sayHello")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Student")]),t._v(" stu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"say: hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Student")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sexType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSexType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" sexType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSexType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sexType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sexType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sexType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("è¿è¡Œä»¥ä¸Šä»£ç æ—¶ï¼ŒJVM å¤„ç†è¿‡ç¨‹å¦‚ä¸‹ï¼š")]),t._v(" "),s("p",[t._v("ï¼ˆ1ï¼‰JVM å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ï¼ŒJVM ç¬¬ä¸€æ­¥å°±æ˜¯é€šè¿‡é…ç½®å‚æ•°æˆ–è€…é»˜è®¤é…ç½®å‚æ•°å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ç©ºé—´ï¼Œæ ¹æ®å†…å­˜å¤§å°æ‰¾åˆ°å…·ä½“çš„å†…å­˜åˆ†é…è¡¨ï¼Œç„¶åæŠŠå†…å­˜æ®µçš„èµ·å§‹åœ°å€å’Œç»ˆæ­¢åœ°å€åˆ†é…ç»™ JVMï¼Œæ¥ä¸‹æ¥ JVM å°±è¿›è¡Œå†…éƒ¨åˆ†é…ã€‚")]),t._v(" "),s("p",[t._v("ï¼ˆ2ï¼‰JVM è·å¾—å†…å­˜ç©ºé—´åï¼Œä¼šæ ¹æ®é…ç½®å‚æ•°åˆ†é…å †ã€æ ˆä»¥åŠæ–¹æ³•åŒºçš„å†…å­˜å¤§å°ã€‚")]),t._v(" "),s("p",[t._v("ï¼ˆ3ï¼‰class æ–‡ä»¶åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ä»¥åŠè§£æï¼Œå…¶ä¸­å‡†å¤‡é˜¶æ®µä¼šä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œåˆå§‹åŒ–ä¸ºç³»ç»Ÿçš„åˆå§‹å€¼ï¼ˆè¿™éƒ¨åˆ†æˆ‘åœ¨ç¬¬ 21 è®²è¿˜ä¼šè¯¦ç»†ä»‹ç»ï¼‰ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20200630094250.png",alt:"img"}})]),t._v(" "),s("p",[t._v("ï¼ˆ4ï¼‰å®Œæˆä¸Šä¸€ä¸ªæ­¥éª¤åï¼Œå°†ä¼šè¿›è¡Œæœ€åä¸€ä¸ªåˆå§‹åŒ–é˜¶æ®µã€‚åœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼ŒJVM é¦–å…ˆä¼šæ‰§è¡Œæ„é€ å™¨ "),s("code",[t._v("<clinit>")]),t._v(" æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ "),s("code",[t._v(".java")]),t._v(" æ–‡ä»¶è¢«ç¼–è¯‘æˆ "),s("code",[t._v(".class")]),t._v(" æ–‡ä»¶æ—¶ï¼Œæ”¶é›†æ‰€æœ‰ç±»çš„åˆå§‹åŒ–ä»£ç ï¼ŒåŒ…æ‹¬é™æ€å˜é‡èµ‹å€¼è¯­å¥ã€é™æ€ä»£ç å—ã€é™æ€æ–¹æ³•ï¼Œæ”¶é›†åœ¨ä¸€èµ·æˆä¸º "),s("code",[t._v("<clinit>()")]),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20200630094329.png",alt:"img"}})]),t._v(" "),s("p",[t._v("ï¼ˆ5ï¼‰æ‰§è¡Œæ–¹æ³•ã€‚å¯åŠ¨ main çº¿ç¨‹ï¼Œæ‰§è¡Œ main æ–¹æ³•ï¼Œå¼€å§‹æ‰§è¡Œç¬¬ä¸€è¡Œä»£ç ã€‚æ­¤æ—¶å †å†…å­˜ä¸­ä¼šåˆ›å»ºä¸€ä¸ª student å¯¹è±¡ï¼Œå¯¹è±¡å¼•ç”¨ student å°±å­˜æ”¾åœ¨æ ˆä¸­ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20200630094651.png",alt:"img"}})]),t._v(" "),s("p",[t._v("ï¼ˆ6ï¼‰æ­¤æ—¶å†æ¬¡åˆ›å»ºä¸€ä¸ª JVMCase å¯¹è±¡ï¼Œè°ƒç”¨ sayHello éé™æ€æ–¹æ³•ï¼ŒsayHello æ–¹æ³•å±äºå¯¹è±¡ JVMCaseï¼Œæ­¤æ—¶ sayHello æ–¹æ³•å…¥æ ˆï¼Œå¹¶é€šè¿‡æ ˆä¸­çš„ student å¼•ç”¨è°ƒç”¨å †ä¸­çš„ Student å¯¹è±¡ï¼›ä¹‹åï¼Œè°ƒç”¨é™æ€æ–¹æ³• printï¼Œprint é™æ€æ–¹æ³•å±äº JVMCase ç±»ï¼Œæ˜¯ä»é™æ€æ–¹æ³•ä¸­è·å–ï¼Œä¹‹åæ”¾å…¥åˆ°æ ˆä¸­ï¼Œä¹Ÿæ˜¯é€šè¿‡ student å¼•ç”¨è°ƒç”¨å †ä¸­çš„ student å¯¹è±¡ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20200630094714.png",alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"_4-outofmemoryerror"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-outofmemoryerror"}},[t._v("#")]),t._v(" 4. OutOfMemoryError")]),t._v(" "),s("h3",{attrs:{id:"_4-1-ä»€ä¹ˆæ˜¯-outofmemoryerror"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-ä»€ä¹ˆæ˜¯-outofmemoryerror"}},[t._v("#")]),t._v(" 4.1. ä»€ä¹ˆæ˜¯ OutOfMemoryError")]),t._v(" "),s("p",[s("code",[t._v("OutOfMemoryError")]),t._v(" ç®€ç§°ä¸º OOMã€‚Java ä¸­å¯¹ OOM çš„è§£é‡Šæ˜¯ï¼Œæ²¡æœ‰ç©ºé—²å†…å­˜ï¼Œå¹¶ä¸”åƒåœ¾æ”¶é›†å™¨ä¹Ÿæ— æ³•æä¾›æ›´å¤šå†…å­˜ã€‚é€šä¿—çš„è§£é‡Šæ˜¯ï¼šJVM å†…å­˜ä¸è¶³äº†ã€‚")]),t._v(" "),s("p",[t._v("åœ¨ JVM è§„èŒƒä¸­ï¼Œ"),s("strong",[t._v("é™¤äº†ç¨‹åºè®¡æ•°å™¨åŒºåŸŸå¤–ï¼Œå…¶ä»–è¿è¡Œæ—¶åŒºåŸŸéƒ½å¯èƒ½å‘ç”Ÿ "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ï¼ˆç®€ç§° OOMï¼‰")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("ä¸‹é¢é€ä¸€ä»‹ç» OOM å‘ç”Ÿåœºæ™¯ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_4-2-å †ç©ºé—´æº¢å‡º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-å †ç©ºé—´æº¢å‡º"}},[t._v("#")]),t._v(" 4.2. å †ç©ºé—´æº¢å‡º")]),t._v(" "),s("p",[s("code",[t._v("java.lang.OutOfMemoryError: Java heap space")]),t._v(" è¿™ä¸ªé”™è¯¯æ„å‘³ç€ï¼š"),s("strong",[t._v("å †ç©ºé—´æº¢å‡º")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("æ›´ç»†è‡´çš„è¯´æ³•æ˜¯ï¼šJava å †å†…å­˜å·²ç»è¾¾åˆ° "),s("code",[t._v("-Xmx")]),t._v(" è®¾ç½®çš„æœ€å¤§å€¼ã€‚Java å †ç”¨äºå­˜å‚¨å¯¹è±¡å®ä¾‹ï¼Œåªè¦ä¸æ–­åœ°åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”ä¿è¯ GC Roots åˆ°å¯¹è±¡ä¹‹é—´æœ‰å¯è¾¾è·¯å¾„æ¥é¿å…åƒåœ¾æ”¶é›†å™¨å›æ”¶è¿™äº›å¯¹è±¡ï¼Œé‚£ä¹ˆå½“å †ç©ºé—´åˆ°è¾¾æœ€å¤§å®¹é‡é™åˆ¶åå°±ä¼šäº§ç”Ÿ OOMã€‚")]),t._v(" "),s("p",[t._v("å †ç©ºé—´æº¢å‡ºæœ‰å¯èƒ½æ˜¯**"),s("code",[t._v("å†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰")]),t._v("** æˆ– "),s("strong",[s("code",[t._v("å†…å­˜æº¢å‡ºï¼ˆMemory Overflowï¼‰")])]),t._v(" ã€‚éœ€è¦ä½¿ç”¨ jstack å’Œ jmap ç”Ÿæˆ threaddump å’Œ heapdumpï¼Œç„¶åç”¨å†…å­˜åˆ†æå·¥å…·ï¼ˆå¦‚ï¼šMATï¼‰è¿›è¡Œåˆ†æã€‚")]),t._v(" "),s("h4",{attrs:{id:"java-heap-space-åˆ†ææ­¥éª¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-heap-space-åˆ†ææ­¥éª¤"}},[t._v("#")]),t._v(" Java heap space åˆ†ææ­¥éª¤")]),t._v(" "),s("ol",[s("li",[t._v("ä½¿ç”¨ "),s("code",[t._v("jmap")]),t._v(" æˆ– "),s("code",[t._v("-XX:+HeapDumpOnOutOfMemoryError")]),t._v(" è·å–å †å¿«ç…§ã€‚")]),t._v(" "),s("li",[t._v("ä½¿ç”¨å†…å­˜åˆ†æå·¥å…·ï¼ˆvisualvmã€matã€jProfile ç­‰ï¼‰å¯¹å †å¿«ç…§æ–‡ä»¶è¿›è¡Œåˆ†æã€‚")]),t._v(" "),s("li",[t._v("æ ¹æ®åˆ†æå›¾ï¼Œé‡ç‚¹æ˜¯ç¡®è®¤å†…å­˜ä¸­çš„å¯¹è±¡æ˜¯å¦æ˜¯å¿…è¦çš„ï¼Œåˆ†æ¸…ç©¶ç«Ÿæ˜¯æ˜¯å†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰è¿˜æ˜¯å†…å­˜æº¢å‡ºï¼ˆMemory Overflowï¼‰ã€‚")])]),t._v(" "),s("h4",{attrs:{id:"å†…å­˜æ³„æ¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å†…å­˜æ³„æ¼"}},[t._v("#")]),t._v(" å†…å­˜æ³„æ¼")]),t._v(" "),s("p",[s("strong",[t._v("å†…å­˜æ³„æ¼æ˜¯æŒ‡ç”±äºç–å¿½æˆ–é”™è¯¯é€ æˆç¨‹åºæœªèƒ½é‡Šæ”¾å·²ç»ä¸å†ä½¿ç”¨çš„å†…å­˜çš„æƒ…å†µ")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("å†…å­˜æ³„æ¼å¹¶éæŒ‡å†…å­˜åœ¨ç‰©ç†ä¸Šçš„æ¶ˆå¤±ï¼Œè€Œæ˜¯åº”ç”¨ç¨‹åºåˆ†é…æŸæ®µå†…å­˜åï¼Œç”±äºè®¾è®¡é”™è¯¯ï¼Œå¤±å»äº†å¯¹è¯¥æ®µå†…å­˜çš„æ§åˆ¶ï¼Œå› è€Œé€ æˆäº†å†…å­˜çš„æµªè´¹ã€‚å†…å­˜æ³„æ¼éšç€è¢«æ‰§è¡Œçš„æ¬¡æ•°ä¸æ–­å¢åŠ ï¼Œæœ€ç»ˆä¼šå¯¼è‡´å†…å­˜æº¢å‡ºã€‚")]),t._v(" "),s("p",[t._v("å†…å­˜æ³„æ¼å¸¸è§åœºæ™¯ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é™æ€å®¹å™¨\n"),s("ul",[s("li",[t._v("å£°æ˜ä¸ºé™æ€ï¼ˆ"),s("code",[t._v("static")]),t._v("ï¼‰çš„ "),s("code",[t._v("HashMap")]),t._v("ã€"),s("code",[t._v("Vector")]),t._v(" ç­‰é›†åˆ")]),t._v(" "),s("li",[t._v("é€šä¿—æ¥è®² A ä¸­æœ‰ Bï¼Œå½“å‰åªæŠŠ B è®¾ç½®ä¸ºç©ºï¼ŒA æ²¡æœ‰è®¾ç½®ä¸ºç©ºï¼Œå›æ”¶æ—¶ B æ— æ³•å›æ”¶ã€‚å› ä¸ºè¢« A å¼•ç”¨ã€‚")])])]),t._v(" "),s("li",[t._v("ç›‘å¬å™¨\n"),s("ul",[s("li",[t._v("ç›‘å¬å™¨è¢«æ³¨å†Œåé‡Šæ”¾å¯¹è±¡æ—¶æ²¡æœ‰åˆ é™¤ç›‘å¬å™¨")])])]),t._v(" "),s("li",[t._v("ç‰©ç†è¿æ¥\n"),s("ul",[s("li",[t._v("å„ç§è¿æ¥æ± å»ºç«‹äº†è¿æ¥ï¼Œå¿…é¡»é€šè¿‡ "),s("code",[t._v("close()")]),t._v(" å…³é—­é“¾æ¥")])])]),t._v(" "),s("li",[t._v("å†…éƒ¨ç±»å’Œå¤–éƒ¨æ¨¡å—ç­‰çš„å¼•ç”¨\n"),s("ul",[s("li",[t._v("å‘ç°å®ƒçš„æ–¹å¼åŒå†…å­˜æº¢å‡ºï¼Œå¯å†åŠ ä¸ªå®æ—¶è§‚å¯Ÿ")]),t._v(" "),s("li",[s("code",[t._v("jstat -gcutil 7362 2500 70")])])])])]),t._v(" "),s("p",[t._v("é‡ç‚¹å…³æ³¨ï¼š")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("FGC")]),t._v(" â€” ä»åº”ç”¨ç¨‹åºå¯åŠ¨åˆ°é‡‡æ ·æ—¶å‘ç”Ÿ Full GC çš„æ¬¡æ•°ã€‚")]),t._v(" "),s("li",[s("code",[t._v("FGCT")]),t._v(" â€” ä»åº”ç”¨ç¨‹åºå¯åŠ¨åˆ°é‡‡æ ·æ—¶ Full GC æ‰€ç”¨çš„æ—¶é—´ï¼ˆå•ä½ç§’ï¼‰ã€‚")]),t._v(" "),s("li",[s("code",[t._v("FGC")]),t._v(" æ¬¡æ•°è¶Šå¤šï¼Œ"),s("code",[t._v("FGCT")]),t._v(" æ‰€éœ€æ—¶é—´è¶Šå¤šï¼Œè¶Šæœ‰å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼ã€‚")])]),t._v(" "),s("p",[t._v("å¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œå¯ä»¥è¿›ä¸€æ­¥æŸ¥çœ‹æ³„æ¼å¯¹è±¡åˆ° GC Roots çš„å¯¹è±¡å¼•ç”¨é“¾ã€‚è¿™æ ·å°±èƒ½æ‰¾åˆ°æ³„æ¼å¯¹è±¡æ˜¯æ€æ ·ä¸ GC Roots å…³è”å¹¶å¯¼è‡´ GC æ— æ³•å›æ”¶å®ƒä»¬çš„ã€‚æŒæ¡äº†è¿™äº›åŸå› ï¼Œå°±å¯ä»¥è¾ƒå‡†ç¡®çš„å®šä½å‡ºå¼•èµ·å†…å­˜æ³„æ¼çš„ä»£ç ã€‚")]),t._v(" "),s("p",[t._v("å¯¼è‡´å†…å­˜æ³„æ¼çš„å¸¸è§åŸå› æ˜¯ä½¿ç”¨å®¹å™¨ï¼Œä¸”ä¸æ–­å‘å®¹å™¨ä¸­æ·»åŠ å…ƒç´ ï¼Œä½†æ²¡æœ‰æ¸…ç†ï¼Œå¯¼è‡´å®¹å™¨å†…å­˜ä¸æ–­è†¨èƒ€ã€‚")]),t._v(" "),s("p",[t._v("ã€ç¤ºä¾‹ã€‘")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * å†…å­˜æ³„æ¼ç¤ºä¾‹\n * é”™è¯¯ç°è±¡ï¼šjava.lang.OutOfMemoryError: Java heap space\n * VM Argsï¼š-verbose:gc -Xms10M -Xmx10M -XX:+HeapDumpOnOutOfMemoryError\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HeapOutOfMemoryDemo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OomObject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OomObject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OomObject")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"å†…å­˜æº¢å‡º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å†…å­˜æº¢å‡º"}},[t._v("#")]),t._v(" å†…å­˜æº¢å‡º")]),t._v(" "),s("p",[t._v("å¦‚æœä¸å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œå³å†…å­˜ä¸­çš„å¯¹è±¡ç¡®å®éƒ½å¿…é¡»å­˜æ´»ç€ï¼Œåˆ™åº”å½“æ£€æŸ¥è™šæ‹Ÿæœºçš„å †å‚æ•°ï¼ˆ"),s("code",[t._v("-Xmx")]),t._v(" å’Œ "),s("code",[t._v("-Xms")]),t._v("ï¼‰ï¼Œä¸æœºå™¨ç‰©ç†å†…å­˜è¿›è¡Œå¯¹æ¯”ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥è°ƒå¤§ã€‚å¹¶ä»ä»£ç ä¸Šæ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸäº›å¯¹è±¡ç”Ÿå‘½å‘¨æœŸè¿‡é•¿ã€æŒæœ‰æ—¶é—´è¿‡é•¿çš„æƒ…å†µï¼Œå°è¯•å‡å°‘ç¨‹åºè¿è¡ŒæœŸçš„å†…å­˜æ¶ˆè€—ã€‚")]),t._v(" "),s("p",[t._v("ã€ç¤ºä¾‹ã€‘")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * å †æº¢å‡ºç¤ºä¾‹\n * <p>\n * é”™è¯¯ç°è±¡ï¼šjava.lang.OutOfMemoryError: Java heap space\n * <p>\n * VM Argsï¼š-verbose:gc -Xms10M -Xmx10M\n *\n * @author <a href="mailto:forbreak@163.com">Zhang Peng</a>\n * @since 2019-06-25\n */')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HeapOutOfMemoryDemo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("999999999")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"array length = ["')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"]"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("æ‰§è¡Œ "),s("code",[t._v("java -verbose:gc -Xms10M -Xmx10M -XX:+HeapDumpOnOutOfMemoryError io.github.dunwu.javacore.jvm.memory.HeapMemoryLeakMemoryErrorDemo")])]),t._v(" "),s("p",[t._v("ä¸Šé¢çš„ä¾‹å­æ˜¯ä¸€ä¸ªæç«¯çš„ä¾‹å­ï¼Œè¯•å›¾åˆ›å»ºä¸€ä¸ªç»´åº¦å¾ˆå¤§çš„æ•°ç»„ï¼Œå †å†…å­˜æ— æ³•åˆ†é…è¿™ä¹ˆå¤§çš„å†…å­˜ï¼Œä»è€ŒæŠ¥é”™ï¼š"),s("code",[t._v("Java heap space")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("ä½†å¦‚æœåœ¨ç°å®ä¸­ï¼Œä»£ç å¹¶æ²¡æœ‰é—®é¢˜ï¼Œä»…ä»…æ˜¯å› ä¸ºå †å†…å­˜ä¸è¶³ï¼Œå¯ä»¥é€šè¿‡ "),s("code",[t._v("-Xms")]),t._v(" å’Œ "),s("code",[t._v("-Xmx")]),t._v(" é€‚å½“è°ƒæ•´å †å†…å­˜å¤§å°ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_4-3-gc-å¼€é”€è¶…è¿‡é™åˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-gc-å¼€é”€è¶…è¿‡é™åˆ¶"}},[t._v("#")]),t._v(" 4.3. GC å¼€é”€è¶…è¿‡é™åˆ¶")]),t._v(" "),s("p",[s("code",[t._v("java.lang.OutOfMemoryError: GC overhead limit exceeded")]),t._v(" è¿™ä¸ªé”™è¯¯ï¼Œå®˜æ–¹ç»™å‡ºçš„å®šä¹‰æ˜¯ï¼š"),s("strong",[t._v("è¶…è¿‡ "),s("code",[t._v("98%")]),t._v(" çš„æ—¶é—´ç”¨æ¥åš GC å¹¶ä¸”å›æ”¶äº†ä¸åˆ° "),s("code",[t._v("2%")]),t._v(" çš„å †å†…å­˜æ—¶ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸")]),t._v("ã€‚è¿™æ„å‘³ç€ï¼Œå‘ç”Ÿåœ¨ GC å ç”¨å¤§é‡æ—¶é—´ä¸ºé‡Šæ”¾å¾ˆå°ç©ºé—´çš„æ—¶å€™å‘ç”Ÿçš„ï¼Œæ˜¯ä¸€ç§ä¿æŠ¤æœºåˆ¶ã€‚å¯¼è‡´å¼‚å¸¸çš„åŸå› ï¼šä¸€èˆ¬æ˜¯å› ä¸ºå †å¤ªå°ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ã€‚")]),t._v(" "),s("p",[t._v("ã€ç¤ºä¾‹ã€‘")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * GC overhead limit exceeded ç¤ºä¾‹\n * é”™è¯¯ç°è±¡ï¼šjava.lang.OutOfMemoryError: GC overhead limit exceeded\n * å‘ç”Ÿåœ¨GCå ç”¨å¤§é‡æ—¶é—´ä¸ºé‡Šæ”¾å¾ˆå°ç©ºé—´çš„æ—¶å€™å‘ç”Ÿçš„ï¼Œæ˜¯ä¸€ç§ä¿æŠ¤æœºåˆ¶ã€‚å¯¼è‡´å¼‚å¸¸çš„åŸå› ï¼šä¸€èˆ¬æ˜¯å› ä¸ºå †å¤ªå°ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ã€‚\n * å®˜æ–¹å¯¹æ­¤çš„å®šä¹‰ï¼šè¶…è¿‡98%çš„æ—¶é—´ç”¨æ¥åšGCå¹¶ä¸”å›æ”¶äº†ä¸åˆ°2%çš„å †å†…å­˜æ—¶ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚\n * VM Args: -Xms10M -Xmx10M\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GcOverheadLimitExceededDemo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" d "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ã€å¤„ç†ã€‘")]),t._v(" "),s("p",[t._v("ä¸ "),s("strong",[t._v("Java heap space")]),t._v(" é”™è¯¯å¤„ç†æ–¹æ³•ç±»ä¼¼ï¼Œå…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼ã€‚å¦‚æœæœ‰ï¼Œåˆ™ä¿®æ­£ä»£ç ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™é€šè¿‡ "),s("code",[t._v("-Xms")]),t._v(" å’Œ "),s("code",[t._v("-Xmx")]),t._v(" é€‚å½“è°ƒæ•´å †å†…å­˜å¤§å°ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_4-4-æ°¸ä¹…ä»£ç©ºé—´ä¸è¶³"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-æ°¸ä¹…ä»£ç©ºé—´ä¸è¶³"}},[t._v("#")]),t._v(" 4.4. æ°¸ä¹…ä»£ç©ºé—´ä¸è¶³")]),t._v(" "),s("p",[t._v("ã€é”™è¯¯ã€‘")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("java.lang.OutOfMemoryError: PermGen space\n")])])]),s("p",[t._v("ã€åŸå› ã€‘")]),t._v(" "),s("p",[t._v("Perm ï¼ˆæ°¸ä¹…ä»£ï¼‰ç©ºé—´ä¸»è¦ç”¨äºå­˜æ”¾ "),s("code",[t._v("Class")]),t._v(" å’Œ Meta ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»çš„åç§°å’Œå­—æ®µï¼Œå¸¦æœ‰æ–¹æ³•å­—èŠ‚ç çš„æ–¹æ³•ï¼Œå¸¸é‡æ± ä¿¡æ¯ï¼Œä¸ç±»å…³è”çš„å¯¹è±¡æ•°ç»„å’Œç±»å‹æ•°ç»„ä»¥åŠå³æ—¶ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚GC åœ¨ä¸»ç¨‹åºè¿è¡ŒæœŸé—´ä¸ä¼šå¯¹æ°¸ä¹…ä»£ç©ºé—´è¿›è¡Œæ¸…ç†ï¼Œé»˜è®¤æ˜¯ 64M å¤§å°ã€‚")]),t._v(" "),s("p",[t._v("æ ¹æ®ä¸Šé¢çš„å®šä¹‰ï¼Œå¯ä»¥å¾—å‡º "),s("strong",[t._v("PermGen å¤§å°è¦æ±‚å–å†³äºåŠ è½½çš„ç±»çš„æ•°é‡ä»¥åŠæ­¤ç±»å£°æ˜çš„å¤§å°")]),t._v("ã€‚å› æ­¤ï¼Œå¯ä»¥è¯´é€ æˆè¯¥é”™è¯¯çš„ä¸»è¦åŸå› æ˜¯æ°¸ä¹…ä»£ä¸­è£…å…¥äº†å¤ªå¤šçš„ç±»æˆ–å¤ªå¤§çš„ç±»ã€‚")]),t._v(" "),s("p",[t._v("åœ¨ JDK8 ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥é€šè¿‡ "),s("code",[t._v("-XX:PermSize")]),t._v(" å’Œ "),s("code",[t._v("-XX:MaxPermSize")]),t._v(" è®¾ç½®æ°¸ä¹…ä»£ç©ºé—´å¤§å°ï¼Œä»è€Œé™åˆ¶æ–¹æ³•åŒºå¤§å°ï¼Œå¹¶é—´æ¥é™åˆ¶å…¶ä¸­å¸¸é‡æ± çš„å®¹é‡ã€‚")]),t._v(" "),s("h4",{attrs:{id:"åˆå§‹åŒ–æ—¶æ°¸ä¹…ä»£ç©ºé—´ä¸è¶³"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åˆå§‹åŒ–æ—¶æ°¸ä¹…ä»£ç©ºé—´ä¸è¶³"}},[t._v("#")]),t._v(" åˆå§‹åŒ–æ—¶æ°¸ä¹…ä»£ç©ºé—´ä¸è¶³")]),t._v(" "),s("p",[t._v("ã€ç¤ºä¾‹ã€‘")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * æ°¸ä¹…ä»£å†…å­˜ç©ºé—´ä¸è¶³ç¤ºä¾‹\n * <p>\n * é”™è¯¯ç°è±¡ï¼š\n * <ul>\n * <li>java.lang.OutOfMemoryError: PermGen space (JDK8 ä»¥å‰ç‰ˆæœ¬)</li>\n * <li>java.lang.OutOfMemoryError: Metaspace (JDK8 åŠä»¥åç‰ˆæœ¬)</li>\n * </ul>\n * VM Args:\n * <ul>\n * <li>-Xmx100M -XX:MaxPermSize=16M (JDK8 ä»¥å‰ç‰ˆæœ¬)</li>\n * <li>-Xmx100M -XX:MaxMetaspaceSize=16M (JDK8 åŠä»¥åç‰ˆæœ¬)</li>\n * </ul>\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PermOutOfMemoryErrorDemo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100_000_000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eu.plumbr.demo.Generated"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassPool")]),t._v(" pool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassPool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDefault")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" pool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("makeClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæºä»£ç éå†å¾ªç¯å¹¶åœ¨è¿è¡Œæ—¶ç”Ÿæˆç±»ã€‚javassist åº“æ­£åœ¨å¤„ç†ç±»ç”Ÿæˆçš„å¤æ‚æ€§ã€‚")]),t._v(" "),s("h4",{attrs:{id:"é‡éƒ¨ç½²æ—¶æ°¸ä¹…ä»£ç©ºé—´ä¸è¶³"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é‡éƒ¨ç½²æ—¶æ°¸ä¹…ä»£ç©ºé—´ä¸è¶³"}},[t._v("#")]),t._v(" é‡éƒ¨ç½²æ—¶æ°¸ä¹…ä»£ç©ºé—´ä¸è¶³")]),t._v(" "),s("p",[t._v("å¯¹äºæ›´å¤æ‚ï¼Œæ›´å®é™…çš„ç¤ºä¾‹ï¼Œè®©æˆ‘ä»¬é€æ­¥ä»‹ç»ä¸€ä¸‹åœ¨åº”ç”¨ç¨‹åºé‡æ–°éƒ¨ç½²æœŸé—´å‘ç”Ÿçš„ Permgen ç©ºé—´é”™è¯¯ã€‚é‡æ–°éƒ¨ç½²åº”ç”¨ç¨‹åºæ—¶ï¼Œä½ å¸Œæœ›åƒåœ¾å›æ”¶ä¼šæ‘†è„±å¼•ç”¨æ‰€æœ‰å…ˆå‰åŠ è½½çš„ç±»çš„åŠ è½½å™¨ï¼Œå¹¶è¢«åŠ è½½æ–°ç±»çš„ç±»åŠ è½½å™¨å–ä»£ã€‚")]),t._v(" "),s("p",[t._v("ä¸å¹¸çš„æ˜¯ï¼Œè®¸å¤šç¬¬ä¸‰æ–¹åº“ä»¥åŠå¯¹çº¿ç¨‹ï¼ŒJDBC é©±åŠ¨ç¨‹åºæˆ–æ–‡ä»¶ç³»ç»Ÿå¥æŸ„ç­‰èµ„æºçš„ä¸è‰¯å¤„ç†ä½¿å¾—æ— æ³•å¸è½½ä»¥å‰ä½¿ç”¨çš„ç±»åŠ è½½å™¨ã€‚åè¿‡æ¥ï¼Œè¿™æ„å‘³ç€åœ¨æ¯æ¬¡é‡æ–°éƒ¨ç½²æœŸé—´ï¼Œæ‰€æœ‰å…ˆå‰ç‰ˆæœ¬çš„ç±»ä»å°†é©»ç•™åœ¨ PermGen ä¸­ï¼Œä»è€Œåœ¨æ¯æ¬¡é‡æ–°éƒ¨ç½²æœŸé—´ç”Ÿæˆæ•°åå…†çš„åƒåœ¾ã€‚")]),t._v(" "),s("p",[t._v("è®©æˆ‘ä»¬æƒ³è±¡ä¸€ä¸ªä½¿ç”¨ JDBC é©±åŠ¨ç¨‹åºè¿æ¥åˆ°å…³ç³»æ•°æ®åº“çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºã€‚å¯åŠ¨åº”ç”¨ç¨‹åºæ—¶ï¼Œåˆå§‹åŒ–ä»£ç å°†åŠ è½½ JDBC é©±åŠ¨ç¨‹åºä»¥è¿æ¥åˆ°æ•°æ®åº“ã€‚å¯¹åº”äºè§„èŒƒï¼ŒJDBC é©±åŠ¨ç¨‹åºå‘ java.sql.DriverManager è¿›è¡Œæ³¨å†Œã€‚è¯¥æ³¨å†ŒåŒ…æ‹¬å°†å¯¹é©±åŠ¨ç¨‹åºå®ä¾‹çš„å¼•ç”¨å­˜å‚¨åœ¨ DriverManager çš„é™æ€å­—æ®µä¸­ã€‚")]),t._v(" "),s("p",[t._v("ç°åœ¨ï¼Œå½“ä»åº”ç”¨ç¨‹åºæœåŠ¡å™¨å–æ¶ˆéƒ¨ç½²åº”ç”¨ç¨‹åºæ—¶ï¼Œjava.sql.DriverManager ä»å°†ä¿ç•™è¯¥å¼•ç”¨ã€‚æˆ‘ä»¬æœ€ç»ˆè·å¾—äº†å¯¹é©±åŠ¨ç¨‹åºç±»çš„å®æ—¶å¼•ç”¨ï¼Œè€Œé©±åŠ¨ç¨‹åºç±»åˆä¿ç•™äº†ç”¨äºåŠ è½½åº”ç”¨ç¨‹åºçš„ java.lang.Classloader å®ä¾‹çš„å¼•ç”¨ã€‚åè¿‡æ¥ï¼Œè¿™æ„å‘³ç€åƒåœ¾å›æ”¶ç®—æ³•æ— æ³•å›æ”¶ç©ºé—´ã€‚")]),t._v(" "),s("p",[t._v("è€Œä¸”è¯¥ java.lang.ClassLoader å®ä¾‹ä»å¼•ç”¨åº”ç”¨ç¨‹åºçš„æ‰€æœ‰ç±»ï¼Œé€šå¸¸åœ¨ PermGen ä¸­å æ®æ•°åå…†å­—èŠ‚ã€‚è¿™æ„å‘³ç€åªéœ€å°‘é‡é‡æ–°éƒ¨ç½²å³å¯å¡«å……é€šå¸¸å¤§å°çš„ PermGenã€‚")]),t._v(" "),s("h4",{attrs:{id:"permgen-space-è§£å†³æ–¹æ¡ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#permgen-space-è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" PermGen space è§£å†³æ–¹æ¡ˆ")]),t._v(" "),s("p",[t._v("ï¼ˆ1ï¼‰è§£å†³åˆå§‹åŒ–æ—¶çš„ "),s("code",[t._v("OutOfMemoryError")])]),t._v(" "),s("p",[t._v("åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æœŸé—´è§¦å‘ç”±äº PermGen è€—å°½å¯¼è‡´çš„ "),s("code",[t._v("OutOfMemoryError")]),t._v(" æ—¶ï¼Œè§£å†³æ–¹æ¡ˆå¾ˆç®€å•ã€‚è¯¥åº”ç”¨ç¨‹åºä»…éœ€è¦æ›´å¤šç©ºé—´æ‰èƒ½å°†æ‰€æœ‰ç±»åŠ è½½åˆ° PermGen åŒºåŸŸï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦å¢åŠ å…¶å¤§å°å³å¯ã€‚ä¸ºæ­¤ï¼Œæ›´æ”¹ä½ çš„åº”ç”¨ç¨‹åºå¯åŠ¨é…ç½®å¹¶æ·»åŠ ï¼ˆæˆ–å¢åŠ ï¼Œå¦‚æœå­˜åœ¨ï¼‰"),s("code",[t._v("-XX:MaxPermSize")]),t._v(" å‚æ•°ï¼Œç±»ä¼¼äºä»¥ä¸‹ç¤ºä¾‹ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("java -XX:MaxPermSize=512m com.yourcompany.YourClass\n")])])]),s("p",[t._v("ä¸Šé¢çš„é…ç½®å°†å‘Šè¯‰ JVMï¼ŒPermGen å¯ä»¥å¢é•¿åˆ° 512MBã€‚")]),t._v(" "),s("p",[t._v("æ¸…ç†åº”ç”¨ç¨‹åºä¸­ "),s("code",[t._v("WEB-INF/lib")]),t._v(" ä¸‹çš„ jarï¼Œç”¨ä¸ä¸Šçš„ jar åˆ é™¤æ‰ï¼Œå¤šä¸ªåº”ç”¨å…¬å…±çš„ jar ç§»åŠ¨åˆ° Tomcat çš„ lib ç›®å½•ï¼Œå‡å°‘é‡å¤åŠ è½½ã€‚")]),t._v(" "),s("p",[t._v("ğŸ”” æ³¨æ„ï¼š"),s("code",[t._v("-XX:PermSize")]),t._v(" ä¸€èˆ¬è®¾ä¸º 64M")]),t._v(" "),s("p",[t._v("ï¼ˆ2ï¼‰è§£å†³é‡æ–°éƒ¨ç½²æ—¶çš„ "),s("code",[t._v("OutOfMemoryError")])]),t._v(" "),s("p",[t._v("é‡æ–°éƒ¨ç½²åº”ç”¨ç¨‹åºåç«‹å³å‘ç”Ÿ OutOfMemoryError æ—¶ï¼Œåº”ç”¨ç¨‹åºä¼šé­å—ç±»åŠ è½½å™¨æ³„æ¼çš„å›°æ‰°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè§£å†³é—®é¢˜çš„æœ€ç®€å•ï¼Œç»§ç»­è¿›è¡Œå †è½¬å‚¨åˆ†æâ€“ä½¿ç”¨ç±»ä¼¼äºä»¥ä¸‹å‘½ä»¤çš„é‡æ–°éƒ¨ç½²åè¿›è¡Œå †è½¬å‚¨ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("jmap -dump:format=b,file=dump.hprof <process-id>\n")])])]),s("p",[t._v("ç„¶åä½¿ç”¨ä½ æœ€å–œæ¬¢çš„å †è½¬å‚¨åˆ†æå™¨æ‰“å¼€è½¬å‚¨ï¼ˆEclipse MAT æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼‰ã€‚åœ¨åˆ†æå™¨ä¸­å¯ä»¥æŸ¥æ‰¾é‡å¤çš„ç±»ï¼Œå°¤å…¶æ˜¯é‚£äº›æ­£åœ¨åŠ è½½åº”ç”¨ç¨‹åºç±»çš„ç±»ã€‚ä»é‚£é‡Œï¼Œä½ éœ€è¦è¿›è¡Œæ‰€æœ‰ç±»åŠ è½½å™¨çš„æŸ¥æ‰¾ï¼Œä»¥æ‰¾åˆ°å½“å‰æ´»åŠ¨çš„ç±»åŠ è½½å™¨ã€‚")]),t._v(" "),s("p",[t._v("å¯¹äºéæ´»åŠ¨ç±»åŠ è½½å™¨ï¼Œä½ éœ€è¦é€šè¿‡ä»éæ´»åŠ¨ç±»åŠ è½½å™¨æ”¶é›†åˆ° GC æ ¹çš„æœ€çŸ­è·¯å¾„æ¥ç¡®å®šé˜»æ­¢å®ƒä»¬è¢«åƒåœ¾æ”¶é›†çš„å¼•ç”¨ã€‚æœ‰äº†æ­¤ä¿¡æ¯ï¼Œä½ å°†æ‰¾åˆ°æ ¹æœ¬åŸå› ã€‚å¦‚æœæ ¹æœ¬åŸå› æ˜¯åœ¨ç¬¬ä¸‰æ–¹åº“ä¸­ï¼Œåˆ™å¯ä»¥è¿›å…¥ Google/StackOverflow æŸ¥çœ‹æ˜¯å¦æ˜¯å·²çŸ¥é—®é¢˜ä»¥è·å–è¡¥ä¸/è§£å†³æ–¹æ³•ã€‚")]),t._v(" "),s("p",[t._v("ï¼ˆ3ï¼‰è§£å†³è¿è¡Œæ—¶ "),s("code",[t._v("OutOfMemoryError")])]),t._v(" "),s("p",[t._v("ç¬¬ä¸€æ­¥æ˜¯æ£€æŸ¥æ˜¯å¦å…è®¸ GC ä» PermGen å¸è½½ç±»ã€‚åœ¨è¿™æ–¹é¢ï¼Œæ ‡å‡†çš„ JVM ç›¸å½“ä¿å®ˆ-ç±»æ˜¯å¤©ç”Ÿçš„ã€‚å› æ­¤ï¼Œä¸€æ—¦åŠ è½½ï¼Œå³ä½¿æ²¡æœ‰ä»£ç åœ¨ä½¿ç”¨å®ƒä»¬ï¼Œç±»ä¹Ÿä¼šä¿ç•™åœ¨å†…å­˜ä¸­ã€‚å½“åº”ç”¨ç¨‹åºåŠ¨æ€åˆ›å»ºè®¸å¤šç±»å¹¶ä¸”é•¿æ—¶é—´ä¸éœ€è¦ç”Ÿæˆçš„ç±»æ—¶ï¼Œè¿™å¯èƒ½ä¼šæˆä¸ºé—®é¢˜ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå…è®¸ JVM å¸è½½ç±»å®šä¹‰å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚è¿™å¯ä»¥é€šè¿‡åœ¨å¯åŠ¨è„šæœ¬ä¸­ä»…æ·»åŠ ä¸€ä¸ªé…ç½®å‚æ•°æ¥å®ç°ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("-XX:+CMSClassUnloadingEnabled\n")])])]),s("p",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤é€‰é¡¹è®¾ç½®ä¸º falseï¼Œå› æ­¤è¦å¯ç”¨æ­¤åŠŸèƒ½ï¼Œä½ éœ€è¦åœ¨ Java é€‰é¡¹ä¸­æ˜¾å¼è®¾ç½®ã€‚å¦‚æœå¯ç”¨ CMSClassUnloadingEnabledï¼ŒGC ä¹Ÿä¼šæ‰«æ PermGen å¹¶åˆ é™¤ä¸å†ä½¿ç”¨çš„ç±»ã€‚è¯·è®°ä½ï¼Œåªæœ‰åŒæ—¶ä½¿ç”¨ UseConcMarkSweepGC æ—¶æ­¤é€‰é¡¹æ‰èµ·ä½œç”¨ã€‚")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("-XX:+UseConcMarkSweepGC\n")])])]),s("p",[t._v("åœ¨ç¡®ä¿å¯ä»¥å¸è½½ç±»å¹¶ä¸”é—®é¢˜ä»ç„¶å­˜åœ¨ä¹‹åï¼Œä½ åº”è¯¥ç»§ç»­è¿›è¡Œå †è½¬å‚¨åˆ†æâ€“ä½¿ç”¨ç±»ä¼¼äºä»¥ä¸‹å‘½ä»¤çš„æ–¹æ³•è¿›è¡Œå †è½¬å‚¨ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("jmap -dump:file=dump.hprof,format=b <process-id>\n")])])]),s("p",[t._v("ç„¶åï¼Œä½¿ç”¨ä½ æœ€å–œæ¬¢çš„å †è½¬å‚¨åˆ†æå™¨ï¼ˆä¾‹å¦‚ Eclipse MATï¼‰æ‰“å¼€è½¬å‚¨ï¼Œç„¶åæ ¹æ®å·²åŠ è½½çš„ç±»æ•°æŸ¥æ‰¾æœ€æ˜‚è´µçš„ç±»åŠ è½½å™¨ã€‚ä»æ­¤ç±»åŠ è½½å™¨ä¸­ï¼Œä½ å¯ä»¥ç»§ç»­æå–å·²åŠ è½½çš„ç±»ï¼Œå¹¶æŒ‰å®ä¾‹å¯¹æ­¤ç±»è¿›è¡Œæ’åºï¼Œä»¥ä½¿å¯ç–‘å¯¹è±¡æ’åœ¨é¦–ä½ã€‚")]),t._v(" "),s("p",[t._v("ç„¶åï¼Œå¯¹äºæ¯ä¸ªå¯ç–‘è€…ï¼Œå°±éœ€è¦ä½ æ‰‹åŠ¨å°†æ ¹æœ¬åŸå› è¿½æº¯åˆ°ç”Ÿæˆæ­¤ç±»çš„åº”ç”¨ç¨‹åºä»£ç ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_4-5-å…ƒæ•°æ®åŒºç©ºé—´ä¸è¶³"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-å…ƒæ•°æ®åŒºç©ºé—´ä¸è¶³"}},[t._v("#")]),t._v(" 4.5. å…ƒæ•°æ®åŒºç©ºé—´ä¸è¶³")]),t._v(" "),s("p",[t._v("ã€é”™è¯¯ã€‘")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('Exception in thread "main" java.lang.OutOfMemoryError: Metaspace\n')])])]),s("p",[t._v("ã€åŸå› ã€‘")]),t._v(" "),s("p",[t._v("Java8 ä»¥åï¼ŒJVM å†…å­˜ç©ºé—´å‘ç”Ÿäº†å¾ˆå¤§çš„å˜åŒ–ã€‚å–æ¶ˆäº†æ°¸ä¹…ä»£ï¼Œè½¬è€Œå˜ä¸ºå…ƒæ•°æ®åŒºã€‚")]),t._v(" "),s("p",[s("strong",[t._v("å…ƒæ•°æ®åŒºçš„å†…å­˜ä¸è¶³ï¼Œå³æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± çš„ç©ºé—´ä¸è¶³")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("æ–¹æ³•åŒºç”¨äºå­˜æ”¾ Class çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç±»åã€è®¿é—®ä¿®é¥°ç¬¦ã€å¸¸é‡æ± ã€å­—æ®µæè¿°ã€æ–¹æ³•æè¿°ç­‰ã€‚")]),t._v(" "),s("p",[t._v("ä¸€ä¸ªç±»è¦è¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶ï¼Œåˆ¤å®šæ¡ä»¶æ˜¯æ¯”è¾ƒè‹›åˆ»çš„ã€‚åœ¨ç»å¸¸åŠ¨æ€ç”Ÿæˆå¤§é‡ Class çš„åº”ç”¨ä¸­ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„ç±»çš„å›æ”¶çŠ¶å†µã€‚è¿™ç±»å¸¸è§é™¤äº† CGLib å­—èŠ‚ç å¢å¼ºå’ŒåŠ¨æ€è¯­è¨€ä»¥å¤–ï¼Œå¸¸è§çš„è¿˜æœ‰ï¼šå¤§é‡ JSP æˆ–åŠ¨æ€äº§ç”Ÿ JSP æ–‡ä»¶çš„åº”ç”¨ï¼ˆJSP ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶éœ€è¦ç¼–è¯‘ä¸º Java ç±»ï¼‰ã€åŸºäº OSGi çš„åº”ç”¨ï¼ˆå³ä½¿æ˜¯åŒä¸€ä¸ªç±»æ–‡ä»¶ï¼Œè¢«ä¸åŒçš„åŠ è½½å™¨åŠ è½½ä¹Ÿä¼šè§†ä¸ºä¸åŒçš„ç±»ï¼‰ç­‰ã€‚")]),t._v(" "),s("p",[t._v("ã€ç¤ºä¾‹ã€‘æ–¹æ³•åŒºå‡ºç° "),s("code",[t._v("OutOfMemoryError")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MethodAreaOutOfMemoryDemo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Enhancer")]),t._v(" enhancer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Enhancer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            enhancer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSuperclass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            enhancer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUseCache")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            enhancer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MethodInterceptor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("intercept")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Method")]),t._v(" method"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MethodProxy")]),t._v(" proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("invokeSuper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            enhancer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ã€è§£å†³ã€‘")]),t._v(" "),s("p",[t._v("å½“ç”±äºå…ƒç©ºé—´è€Œé¢ä¸´ "),s("code",[t._v("OutOfMemoryError")]),t._v(" æ—¶ï¼Œç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆåº”è¯¥æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚å¦‚æœåº”ç”¨ç¨‹åºè€—å°½äº†å†…å­˜ä¸­çš„ Metaspace åŒºåŸŸï¼Œåˆ™åº”å¢åŠ  Metaspace çš„å¤§å°ã€‚æ›´æ”¹åº”ç”¨ç¨‹åºå¯åŠ¨é…ç½®å¹¶å¢åŠ ä»¥ä¸‹å†…å®¹ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("-XX:MaxMetaspaceSize=512m\n")])])]),s("p",[t._v("ä¸Šé¢çš„é…ç½®ç¤ºä¾‹å‘Šè¯‰ JVMï¼Œå…è®¸ Metaspace å¢é•¿åˆ° 512 MBã€‚")]),t._v(" "),s("p",[t._v("å¦ä¸€ç§è§£å†³æ–¹æ¡ˆç”šè‡³æ›´ç®€å•ã€‚ä½ å¯ä»¥é€šè¿‡åˆ é™¤æ­¤å‚æ•°æ¥å®Œå…¨è§£é™¤å¯¹ Metaspace å¤§å°çš„é™åˆ¶ï¼ŒJVM é»˜è®¤å¯¹ Metaspace çš„å¤§å°æ²¡æœ‰é™åˆ¶ã€‚ä½†æ˜¯è¯·æ³¨æ„ä»¥ä¸‹äº‹å®ï¼šè¿™æ ·åšå¯èƒ½ä¼šå¯¼è‡´å¤§é‡äº¤æ¢æˆ–è¾¾åˆ°æœ¬æœºç‰©ç†å†…å­˜è€Œåˆ†é…å¤±è´¥ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_4-6-æ— æ³•æ–°å»ºæœ¬åœ°çº¿ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-æ— æ³•æ–°å»ºæœ¬åœ°çº¿ç¨‹"}},[t._v("#")]),t._v(" 4.6. æ— æ³•æ–°å»ºæœ¬åœ°çº¿ç¨‹")]),t._v(" "),s("p",[s("code",[t._v("java.lang.OutOfMemoryError: Unable to create new native thread")]),t._v(" è¿™ä¸ªé”™è¯¯æ„å‘³ç€ï¼š"),s("strong",[t._v("Java åº”ç”¨ç¨‹åºå·²è¾¾åˆ°å…¶å¯ä»¥å¯åŠ¨çº¿ç¨‹æ•°çš„é™åˆ¶")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("ã€åŸå› ã€‘")]),t._v(" "),s("p",[t._v("å½“å‘èµ·ä¸€ä¸ªçº¿ç¨‹çš„åˆ›å»ºæ—¶ï¼Œè™šæ‹Ÿæœºä¼šåœ¨ JVM å†…å­˜åˆ›å»ºä¸€ä¸ª "),s("code",[t._v("Thread")]),t._v(" å¯¹è±¡åŒæ—¶åˆ›å»ºä¸€ä¸ªæ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼Œè€Œè¿™ä¸ªç³»ç»Ÿçº¿ç¨‹çš„å†…å­˜ç”¨çš„ä¸æ˜¯ JVM å†…å­˜ï¼Œè€Œæ˜¯ç³»ç»Ÿä¸­å‰©ä¸‹çš„å†…å­˜ã€‚")]),t._v(" "),s("p",[t._v("é‚£ä¹ˆï¼Œç©¶ç«Ÿèƒ½åˆ›å»ºå¤šå°‘çº¿ç¨‹å‘¢ï¼Ÿè¿™é‡Œæœ‰ä¸€ä¸ªå…¬å¼ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("çº¿ç¨‹æ•° = (MaxProcessMemory - JVMMemory - ReservedOsMemory) / (ThreadStackSize)\n")])])]),s("p",[t._v("ã€å‚æ•°ã€‘")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("MaxProcessMemory")]),t._v(" - ä¸€ä¸ªè¿›ç¨‹çš„æœ€å¤§å†…å­˜")]),t._v(" "),s("li",[s("code",[t._v("JVMMemory")]),t._v(" - JVM å†…å­˜")]),t._v(" "),s("li",[s("code",[t._v("ReservedOsMemory")]),t._v(" - ä¿ç•™çš„æ“ä½œç³»ç»Ÿå†…å­˜")]),t._v(" "),s("li",[s("code",[t._v("ThreadStackSize")]),t._v(" - çº¿ç¨‹æ ˆçš„å¤§å°")])]),t._v(" "),s("p",[s("strong",[t._v("ç»™ JVM åˆ†é…çš„å†…å­˜è¶Šå¤šï¼Œé‚£ä¹ˆèƒ½ç”¨æ¥åˆ›å»ºç³»ç»Ÿçº¿ç¨‹çš„å†…å­˜å°±ä¼šè¶Šå°‘ï¼Œè¶Šå®¹æ˜“å‘ç”Ÿ "),s("code",[t._v("unable to create new native thread")])]),t._v("ã€‚æ‰€ä»¥ï¼ŒJVM å†…å­˜ä¸æ˜¯åˆ†é…çš„è¶Šå¤§è¶Šå¥½ã€‚")]),t._v(" "),s("p",[t._v("ä½†æ˜¯ï¼Œé€šå¸¸å¯¼è‡´ "),s("code",[t._v("java.lang.OutOfMemoryError")]),t._v(" çš„æƒ…å†µï¼šæ— æ³•åˆ›å»ºæ–°çš„æœ¬æœºçº¿ç¨‹éœ€è¦ç»å†ä»¥ä¸‹é˜¶æ®µï¼š")]),t._v(" "),s("ol",[s("li",[t._v("JVM å†…éƒ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºè¯·æ±‚æ–°çš„ Java çº¿ç¨‹")]),t._v(" "),s("li",[t._v("JVM æœ¬æœºä»£ç ä»£ç†ä¸ºæ“ä½œç³»ç»Ÿåˆ›å»ºæ–°æœ¬æœºçº¿ç¨‹çš„è¯·æ±‚")]),t._v(" "),s("li",[t._v("æ“ä½œç³»ç»Ÿå°è¯•åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬æœºçº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹éœ€è¦å°†å†…å­˜åˆ†é…ç»™è¯¥çº¿ç¨‹")]),t._v(" "),s("li",[t._v("æ“ä½œç³»ç»Ÿå°†æ‹’ç»æœ¬æœºå†…å­˜åˆ†é…ï¼ŒåŸå› æ˜¯ 32 ä½ Java è¿›ç¨‹å¤§å°å·²è€—å°½å…¶å†…å­˜åœ°å€ç©ºé—´ï¼ˆä¾‹å¦‚ï¼Œå·²è¾¾åˆ°ï¼ˆ2-4ï¼‰GB è¿›ç¨‹å¤§å°é™åˆ¶ï¼‰æˆ–æ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜å·²å®Œå…¨è€—å°½")]),t._v(" "),s("li",[t._v("å¼•å‘ "),s("code",[t._v("java.lang.OutOfMemoryError: Unable to create new native thread")]),t._v(" é”™è¯¯ã€‚")])]),t._v(" "),s("p",[t._v("ã€ç¤ºä¾‹ã€‘")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UnableCreateNativeThreadErrorDemo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MINUTES"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ã€å¤„ç†ã€‘")]),t._v(" "),s("p",[t._v("å¯ä»¥é€šè¿‡å¢åŠ æ“ä½œç³»ç»Ÿçº§åˆ«çš„é™åˆ¶æ¥ç»•è¿‡æ— æ³•åˆ›å»ºæ–°çš„æœ¬æœºçº¿ç¨‹é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé™åˆ¶äº† JVM å¯åœ¨ç”¨æˆ·ç©ºé—´ä¸­äº§ç”Ÿçš„è¿›ç¨‹æ•°ï¼Œåˆ™åº”æ£€æŸ¥å‡ºå¹¶å¯èƒ½å¢åŠ è¯¥é™åˆ¶ï¼š")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@dev ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ulimit -a")]),t._v("\ncore "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" size          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blocks, -c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n--- "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cut")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" brevity ---\nmax user processes              "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("-u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1800")]),t._v("\n")])])]),s("p",[t._v("é€šå¸¸ï¼Œ"),s("code",[t._v("OutOfMemoryError")]),t._v(" å¯¹æ–°çš„æœ¬æœºçº¿ç¨‹çš„é™åˆ¶è¡¨ç¤ºç¼–ç¨‹é”™è¯¯ã€‚å½“åº”ç”¨ç¨‹åºäº§ç”Ÿæ•°åƒä¸ªçº¿ç¨‹æ—¶ï¼Œå¾ˆå¯èƒ½å‡ºäº†ä¸€äº›é—®é¢˜â€”å¾ˆå°‘æœ‰åº”ç”¨ç¨‹åºå¯ä»¥ä»å¦‚æ­¤å¤§é‡çš„çº¿ç¨‹ä¸­å—ç›Šã€‚")]),t._v(" "),s("p",[t._v("è§£å†³é—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯å¼€å§‹è¿›è¡Œçº¿ç¨‹è½¬å‚¨ä»¥äº†è§£æƒ…å†µã€‚")]),t._v(" "),s("h3",{attrs:{id:"_4-7-ç›´æ¥å†…å­˜æº¢å‡º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-7-ç›´æ¥å†…å­˜æº¢å‡º"}},[t._v("#")]),t._v(" 4.7. ç›´æ¥å†…å­˜æº¢å‡º")]),t._v(" "),s("p",[t._v("ç”±ç›´æ¥å†…å­˜å¯¼è‡´çš„å†…å­˜æº¢å‡ºï¼Œä¸€ä¸ªæ˜æ˜¾çš„ç‰¹å¾æ˜¯åœ¨ Head Dump æ–‡ä»¶ä¸­ä¸ä¼šçœ‹è§æ˜æ˜¾çš„å¼‚å¸¸ï¼Œå¦‚æœå‘ç° OOM ä¹‹å Dump æ–‡ä»¶å¾ˆå°ï¼Œè€Œç¨‹åºä¸­åˆç›´æ¥æˆ–é—´æ¥ä½¿ç”¨äº† NIOï¼Œå°±å¯ä»¥è€ƒè™‘æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯è¿™æ–¹é¢çš„åŸå› ã€‚")]),t._v(" "),s("p",[t._v("ã€ç¤ºä¾‹ã€‘ç›´æ¥å†…å­˜ "),s("code",[t._v("OutOfMemoryError")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * æœ¬æœºç›´æ¥å†…å­˜æº¢å‡ºç¤ºä¾‹\n * é”™è¯¯ç°è±¡ï¼šjava.lang.OutOfMemoryError\n * VM Argsï¼š-Xmx20M -XX:MaxDirectMemorySize=10M\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DirectOutOfMemoryDemo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" _1MB "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IllegalAccessException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Field")]),t._v(" unsafeField "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Unsafe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDeclaredFields")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        unsafeField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAccessible")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Unsafe")]),t._v(" unsafe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Unsafe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" unsafeField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            unsafe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("allocateMemory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_1MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_5-stackoverflowerror"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-stackoverflowerror"}},[t._v("#")]),t._v(" 5. StackOverflowError")]),t._v(" "),s("p",[t._v("å¯¹äº HotSpot è™šæ‹Ÿæœºæ¥è¯´ï¼Œæ ˆå®¹é‡åªç”± "),s("code",[t._v("-Xss")]),t._v(" å‚æ•°æ¥å†³å®šå¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æœ€å¤§æ·±åº¦ï¼Œå°†æŠ›å‡º "),s("code",[t._v("StackOverflowError")]),t._v(" å¼‚å¸¸ã€‚")]),t._v(" "),s("p",[t._v("ä»å®æˆ˜æ¥è¯´ï¼Œæ ˆæº¢å‡ºçš„å¸¸è§åŸå› ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("é€’å½’å‡½æ•°è°ƒç”¨å±‚æ•°å¤ªæ·±")])]),t._v(" "),s("li",[s("strong",[t._v("å¤§é‡å¾ªç¯æˆ–æ­»å¾ªç¯")])])]),t._v(" "),s("p",[t._v("ã€ç¤ºä¾‹ã€‘é€’å½’å‡½æ•°è°ƒç”¨å±‚æ•°å¤ªæ·±å¯¼è‡´ "),s("code",[t._v("StackOverflowError")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StackOverflowDemo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" stackLength "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("recursion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        stackLength"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("recursion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StackOverflowDemo")]),t._v(" obj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StackOverflowDemo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("recursion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ ˆæ·±åº¦ï¼š"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stackLength"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_6-å‚è€ƒèµ„æ–™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-å‚è€ƒèµ„æ–™"}},[t._v("#")]),t._v(" 6. å‚è€ƒèµ„æ–™")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://book.douban.com/subject/34907497/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://time.geekbang.org/column/intro/100028001",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€ŠJava æ€§èƒ½è°ƒä¼˜å®æˆ˜ã€‹"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.douban.com/doulist/2545443/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä»è¡¨åˆ°é‡Œå­¦ä¹  JVM å®ç°"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.jianshu.com/p/28935cbfbae0",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä½œä¸ºæµ‹è¯•ä½ åº”è¯¥çŸ¥é“çš„ JAVA OOM åŠå®šä½åˆ†æ"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://blog.csdn.net/sinat_29912455/article/details/51125748",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¼‚å¸¸ã€å †å†…å­˜æº¢å‡ºã€OOM çš„å‡ ç§æƒ…å†µ"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://tianmingxing.com/2019/11/17/%E4%BB%8B%E7%BB%8DJVM%E4%B8%ADOOM%E7%9A%848%E7%A7%8D%E7%B1%BB%E5%9E%8B/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä»‹ç» JVM ä¸­ OOM çš„ 8 ç§ç±»å‹"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);